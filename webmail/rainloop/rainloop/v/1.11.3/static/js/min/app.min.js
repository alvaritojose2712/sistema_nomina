!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="rainloop/v/0.0.0/static/js/min/",t(t.s=212)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function o(e){return!H(e)&&!B(e)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=o(e)&&""!==e?T.a.parseInt(e,10):t;return T.a.isNaN(n)?t:n}function a(e){return o(e)?""+e:""}function r(e){return T.a.decodeURIComponent(e)}function s(e){var t=0,n=0,o=null,i=e.split("&"),a={};for(n=i.length;t<n;t++)a[r((o=i[t].split("="))[0])]=r(o[1]);return a}function c(e){return o(e)?F.a.escape(e.toString()):""}function l(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n="",o="",i=e,a=0,r=0;i.length>t;)a=(o=i.substring(0,t)).lastIndexOf(" "),-1!==(r=o.lastIndexOf("\n"))&&(a=r),-1===a&&(a=t),n+=o.substring(0,a)+"\n",i=i.substring(a+1);return n+i}function u(e,t){return T.a.Math.round(e*T.a.Math.pow(10,t))/T.a.Math.pow(10,t)}function d(){return(new T.a.Date).getTime()}function p(e){e.find("blockquote.rl-bq-switcher").removeClass("rl-bq-switcher hidden-bq"),e.find(".rlBlockquoteSwitcher").off(".rlBlockquoteSwitcher").remove(),e.find("[data-html-editor-font-wrapper]").removeAttr("data-html-editor-font-wrapper")}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;return o=i(o),function(i,a,r,s,c){t.call(n,a&&a.Result?I.SaveSettingsStep.TrueResult:I.SaveSettingsStep.FalseResult),e&&e.call(n,i,a,r,s,c),F.a.delay(function(){t.call(n,I.SaveSettingsStep.Idle)},o)}}function f(e){return R.a?R.a.link(e,{newWindow:!0,stripPrefix:!1,urls:!0,email:!0,mention:!1,phone:!1,hashtag:!1,replaceFn:function(e){return!(e&&"url"===e.getType()&&e.matchedText&&0!==e.matchedText.indexOf("http"))}}):e}function m(e){var t=0,n=0,o=0,i=0,a=0,r="";for(r=e.replace(/<p[^>]*><\/p>/gi,"").replace(/<pre[^>]*>([\s\S\r\n\t]*)<\/pre>/gim,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&1<t.length?t[1].toString().replace(/[\n]/gm,"<br />").replace(/[\r]/gm,""):""}).replace(/[\s]+/gm," ").replace(/((?:href|data)\s?=\s?)("[^"]+?"|'[^']+?')/gim,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&1<t.length?""+t[1]+F.a.escape(t[2]):""}).replace(/<br[^>]*>/gim,"\n").replace(/<\/h[\d]>/gi,"\n").replace(/<\/p>/gi,"\n\n").replace(/<ul[^>]*>/gim,"\n").replace(/<\/ul>/gi,"\n").replace(/<li[^>]*>/gim," * ").replace(/<\/li>/gi,"\n").replace(/<\/td>/gi,"\n").replace(/<\/tr>/gi,"\n").replace(/<hr[^>]*>/gim,"\n_______________________________\n\n").replace(/<div[^>]*>([\s\S\r\n]*)<\/div>/gim,function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];if(n&&1<n.length){var i=M(n[1]);return 0<i.length&&(i=i.replace(/<div[^>]*>([\s\S\r\n]*)<\/div>/gim,e),i="\n"+M(i)+"\n"),i}return""}).replace(/<blockquote[^>]*>/gim,"\n__bq__start__\n").replace(/<\/blockquote>/gim,"\n__bq__end__\n").replace(/<a [^>]*>([\s\S\r\n]*?)<\/a>/gim,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&1<t.length?M(t[1]):""}).replace(/<\/div>/gi,"\n").replace(/&nbsp;/gi," ").replace(/&quot;/gi,'"').replace(/<[^>]*>/gm,""),r=l(r=(r=_.$div.html(r).text()).replace(/\n[ \t]+/gm,"\n").replace(/[\n]{3,}/gm,"\n\n").replace(/&gt;/gi,">").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&")),t=0,n=800;0<n&&(n-=1,-1<(o=r.indexOf("__bq__start__",t)));)i=r.indexOf("__bq__start__",o+5),a=r.indexOf("__bq__end__",o+5),(-1===i||a<i)&&o<a?(r=r.substring(0,o)+function(e){return(e="> "+M(e).replace(/\n/gm,"\n> ")).replace(/(^|\n)([> ]+)/gm,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&2<t.length?t[1]+M(t[2].replace(/[\s]/g,""))+" ":""})}(r.substring(o+13,a))+r.substring(a+11),t=0):t=-1<i&&i<a?i-1:0;return r=r.replace(/__bq__start__/gm,"").replace(/__bq__end__/gm,"")}function b(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1,o=!0,i=!0,a=[],r="",s=0,c=(e=(e=e.toString().replace(/\r/g,"")).replace(/^>[> ]>+/gm,function(e){var t=e[0];return t?t.replace(/[ ]+/g,""):t})).split("\n");do{for(o=!1,a=[],s=0;s<c.length;s++)(i=">"===(r=c[s]).substr(0,1))&&!n?(o=!0,n=!0,a.push("~~~blockquote~~~"),a.push(r.substr(1))):!i&&n?""!==r?(n=!1,a.push("~~~/blockquote~~~"),a.push(r)):a.push(r):i&&n?a.push(r.substr(1)):a.push(r);n&&(n=!1,a.push("~~~/blockquote~~~")),c=a}while(o);return e=c.join("\n"),e=e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/~~~blockquote~~~[\s]*/g,"<blockquote>").replace(/[\s]*~~~\/blockquote~~~/g,"</blockquote>").replace(/\n/g,"<br />"),t?f(e):e}function g(e,t,n,i,a,r,s,c,l,u){var d=null,p=!1,h=0,f=0,m=[];for(u=!H(u)&&!!u,l=o(l)?l:0<e.length,a=o(a)?a:0,r=o(r)?r:null,s=o(s)?s:null,c=o(c)?c:null,k(n)||(n=[]),k(i)||(i=[]),h=0,f=i.length;h<f;h++)m.push({id:i[h][0],name:i[h][1],system:!1,seporator:!1,disabled:!1});for(p=!0,h=0,f=e.length;h<f;h++)d=e[h],s&&!s(d)||(p&&0<m.length&&m.push({id:"---",name:"---",system:!1,seporator:!0,disabled:!0}),p=!1,m.push({id:d.fullNameRaw,name:c?c(d):d.name(),system:!0,seporator:!1,disabled:!d.selectable||-1<D(d.fullNameRaw,n)||!!r&&r(d)}));for(p=!0,h=0,f=t.length;h<f;h++)!(d=t[h]).subScribed()&&d.existen&&!u||!d.selectable&&!d.hasSubScribedSubfolders()||s&&!s(d)||I.FolderType.User!==d.type()&&l&&!d.hasSubScribedSubfolders()||(p&&0<m.length&&m.push({id:"---",name:"---",system:!1,seporator:!0,disabled:!0}),p=!1,m.push({id:d.fullNameRaw,name:new T.a.Array(d.deep+1-a).join("   ")+(c?c(d):d.name()),system:!1,seporator:!1,disabled:!d.selectable||-1<D(d.fullNameRaw,n)||!!r&&r(d)})),d.subScribed()&&0<d.subFolders().length&&(m=m.concat(g([],d.subFolders(),n,[],a,r,s,c,l,u)));return m}function y(e,t){var n=t||e;n&&"function"==typeof n.dispose&&n.dispose()}function v(e){e&&(k(e)?F.a.each(e,function(e){v(e)}):e&&e.onDestroy&&e.onDestroy())}function S(e,t){return!(!e||!e[0])&&(e[0].styleSheet&&!H(e[0].styleSheet.cssText)?e[0].styleSheet.cssText=t:e.text(t),!0)}function O(e){var t=(e=M(e).toLowerCase()).split(".").pop();return t===e?"":t}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"trim",function(){return M}),n.d(t,"inArray",function(){return D}),n.d(t,"isArray",function(){return k}),n.d(t,"isObject",function(){return x}),n.d(t,"isFunc",function(){return U}),n.d(t,"isUnd",function(){return H}),n.d(t,"isNull",function(){return B}),n.d(t,"has",function(){return G}),n.d(t,"bind",function(){return K}),n.d(t,"noop",function(){return V}),n.d(t,"noopTrue",function(){return z}),n.d(t,"noopFalse",function(){return q}),t.silentTryCatch=function(e){try{e()}catch(e){}},t.isNormal=o,t.isPosNumeric=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!o(e)&&(t?/^[0-9]*$/.test(e.toString()):/^[1-9]+[0-9]*$/.test(e.toString()))},t.pInt=i,t.pString=a,t.pBool=function(e){return!!e},t.boolToAjax=function(e){return e?"1":"0"},t.isNonEmptyArray=function(e){return k(e)&&0<e.length},t.encodeURIComponent=function(e){return T.a.encodeURIComponent(e)},t.decodeURIComponent=r,t.decodeURI=function(e){return T.a.decodeURI(e)},t.encodeURI=function(e){return T.a.encodeURI(e)},t.simpleQueryParser=s,t.fakeMd5=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="0123456789abcdefghijklmnopqrstuvwxyz",n=t.length;e=i(e);for(var o="";o.length<e;)o+=t.substr(T.a.Math.round(T.a.Math.random()*n),1);return o},t.encodeHtml=c,t.splitPlainText=l,n.d(t,"timeOutAction",function(){return W}),n.d(t,"timeOutActionSecond",function(){return Y}),t.inFocus=function(){try{if(T.a.document.activeElement)return H(T.a.document.activeElement.__inFocusCache)&&(T.a.document.activeElement.__inFocusCache=A()(T.a.document.activeElement).is("input,textarea,iframe,.cke_editable")),!!T.a.document.activeElement.__inFocusCache}catch(e){}return!1},t.removeInFocus=function(e){if(T.a.document&&T.a.document.activeElement&&T.a.document.activeElement.blur)try{var t=A()(T.a.document.activeElement);t&&t.is("input,textarea")?T.a.document.activeElement.blur():e&&T.a.document.activeElement.blur()}catch(e){}},t.removeSelection=function(){try{if(T.a&&T.a.getSelection){var e=T.a.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}else T.a.document&&T.a.document.selection&&T.a.document.selection.empty&&T.a.document.selection.empty()}catch(e){}},t.replySubjectAdd=function(e,t){e=M(e.toUpperCase()),t=M(t.replace(/[\s]+/g," "));var n=!1,o="RE"===e,i="FWD"===e,a=[],r=!i;return""!==t&&F.a.each(t.split(":"),function(e){var t=M(e);n||!/^(RE|FWD)$/i.test(t)&&!/^(RE|FWD)[\[\(][\d]+[\]\)]$/i.test(t)?(a.push(e),n=!0):(o||(o=!!/^RE/i.test(t)),i||(i=!!/^FWD/i.test(t)))}),r?o=!1:i=!1,M((r?"Re: ":"Fwd: ")+(o?"Re: ":"")+(i?"Fwd: ":"")+M(a.join(":")))},t.roundNumber=u,t.friendlySize=function(e){switch(e=i(e),!0){case 1073741824<=e:return u(e/1073741824,1)+"GB";case 1048576<=e:return u(e/1048576,1)+"MB";case 1024<=e:return u(e/1024,0)+"KB"}return e+"B"},t.log=function(e){T.a.console&&T.a.console.log&&T.a.console.log(e)},t.delegateRun=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e&&e[t]&&(o=i(o),n=k(n)?n:[],0>=o?e[t].apply(e,n):F.a.delay(function(){e[t].apply(e,n)},o))},t.killCtrlACtrlS=function(e){if((e=e||T.a.event)&&e.ctrlKey&&!e.shiftKey&&!e.altKey){var t=e.keyCode||e.which;if(t===I.EventKeyCode.S)return void e.preventDefault();if(t===I.EventKeyCode.A){var n=e.target||e.srcElement;if(n&&("true"==""+n.contentEditable||n.tagName&&n.tagName.match(/INPUT|TEXTAREA/i)))return;T.a.getSelection?T.a.getSelection().removeAllRanges():T.a.document.selection&&T.a.document.selection.clear&&T.a.document.selection.clear(),e.preventDefault()}}},t.createCommandLegacy=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=null;return o=t?function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return o&&o.canExecute&&o.canExecute()&&t.apply(e,i),!1}:V,o.enabled=j.a.observable(!0),o.isCommand=!0,U(n)?o.canExecute=j.a.computed(function(){return o&&o.enabled()&&n.call(e)}):o.canExecute=j.a.computed(function(){return o&&o.enabled()&&!!n}),o},n.d(t,"convertThemeName",function(){return $}),t.quoteName=function(e){return e.replace(/["]/g,'\\"')},t.microtime=d,t.timestamp=function(){return T.a.Math.round(d()/1e3)},t.convertLangName=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n(8).i18n("LANGS_NAMES"+(!0===t?"_EN":"")+"/LANG_"+e.toUpperCase().replace(/[^a-zA-Z0-9]+/g,"_"),null,e)},t.draggablePlace=function(){return A()('<div class="draggablePlace"><span class="text"></span>&nbsp;<i class="icon-copy icon-white visible-on-ctrl"></i><i class="icon-mail icon-white hidden-on-ctrl"></i></div>').appendTo("#rl-hidden")},t.defautOptionsAfterRender=function(e,t){t&&!H(t.disabled)&&e&&A()(e).toggleClass("disabled",t.disabled).prop("disabled",t.disabled)},t.clearBqSwitcher=p,t.previewMessage=function(e,t,o,i){var a=e.title,r=e.subject,s=e.date,l=e.fromCreds,u=e.toCreds,d=e.toLabel,h=e.ccClass,f=e.ccCreds,m=e.ccLabel,b=T.a.open(""),g=b.document,y=t.clone(),v=o?"html":"plain";p(y);var S=y?y.html():"";g.write(n(109).replace("{{title}}",c(a)).replace("{{subject}}",c(r)).replace("{{date}}",c(s)).replace("{{fromCreds}}",c(l)).replace("{{toCreds}}",c(u)).replace("{{toLabel}}",c(d)).replace("{{ccClass}}",c(h)).replace("{{ccCreds}}",c(f)).replace("{{ccLabel}}",c(m)).replace("{{bodyClass}}",v).replace("{{html}}",S)),g.close(),i&&T.a.setTimeout(function(){return b.print()},100)},t.settingsSaveHelperFunction=h,t.settingsSaveHelperSimpleFunction=function(e,t){return h(null,e,t,1e3)},t.settingsSaveHelperSubscribeFunction=function(e,t,n,o){return function(r){if(e){switch(n){case"bool":case"boolean":r=r?"1":"0";break;case"int":case"integer":case"number":r=i(r);break;case"trim":r=M(r);break;default:r=a(r)}var s={};s[t]=r,e.saveAdminConfig?e.saveAdminConfig(o||null,s):e.saveSettings&&e.saveSettings(o||null,s)}}},t.findEmailAndLinks=f,t.htmlToPlain=m,t.plainToHtml=b,t.folderListOptionsBuilder=g,t.selectElement=function(e){var t=null,n=null;T.a.getSelection?((t=T.a.getSelection()).removeAllRanges(),(n=T.a.document.createRange()).selectNodeContents(e),t.addRange(n)):T.a.document.selection&&((n=T.a.document.body.createTextRange()).moveToElementText(e),n.select())},n.d(t,"detectDropdownVisibility",function(){return J}),t.triggerAutocompleteInputChange=function(){var e=function(){A()(".checkAutocomplete").trigger("change")};arguments.length>0&&void 0!==arguments[0]&&arguments[0]?F.a.delay(e,100):e()},t.getConfigurationFromScriptTag=function(e){X[e]||(X[e]=A()('script[type="application/json"][data-configuration="'+e+'"]'));try{return JSON.parse(X[e].text())}catch(e){}return{}},t.disposeOne=y,t.disposeObject=function(e){e&&(k(e.disposables)&&F.a.each(e.disposables,y),j.a.utils.objectForEach(e,y))},t.delegateRunOnDestroy=v,t.appendStyles=S,t.changeTheme=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,n=A()("#app-theme-link"),o=function(){Z=T.a.setTimeout(function(){return t(I.SaveSettingsStep.Idle)},1e3),Q=null},i=A()("#app-theme-style"),a=n.attr("href");a||(a=i.attr("data-href")),a&&(a=a.toString().replace(/\/-\/[^\/]+\/\-\//,"/-/"+e+"/-/"),a=a.replace(/\/Css\/[^\/]+\/User\//,"/Css/0/User/"),"Json/"!==(a=a.replace(/\/Hash\/[^\/]+\//,"/Hash/-/")).substring(a.length-5,a.length)&&(a+="Json/"),T.a.clearTimeout(Z),t(I.SaveSettingsStep.Animate),Q&&Q.abort&&Q.abort(),Q=A.a.ajax({url:a,dataType:"json"}).then(function(e){e&&k(e)&&2===e.length&&(!n||!n[0]||i&&i[0]||(i=A()('<style id="app-theme-style"></style>'),n.after(i),n.remove()),i&&i[0]&&S(i,e[1])&&i.attr("data-href",a).attr("data-theme",e[0]),t(I.SaveSettingsStep.TrueResult))}).then(o,o))},t.computedPagenatorHelper=function(e,t){return function(){var n=e(),o=t(),i=[],a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={current:e===n,name:""===o?e.toString():o.toString(),custom:""!==o,title:""===o?"":e.toString(),value:e.toString()};t?i.push(a):i.unshift(a)},r=0,s=0,c=2;if(1<o||0<o&&o<n){for(o<n?(a(o),r=o,s=o):((3>=n||o-2<=n)&&(c+=2),a(n),r=n,s=n);0<c;)if(r-=1,s+=1,0<r&&(a(r,!1),c-=1),o>=s)a(s,!0),c-=1;else if(0>=r)break;3===r?a(2,!1):3<r&&a(Math.round((r-1)/2),!1,"..."),o-2===s?a(o-1,!0):o-2>s&&a(Math.round((o+s)/2),!0,"..."),1<r&&a(1,!1),o>s&&a(o,!0)}return i}},t.getFileExtension=O,t.mimeContentType=function(e){var t="",n="application/octet-stream";return"winmail.dat"===(e=M(e).toLowerCase())?"application/ms-tnef":((t=O(e))&&0<t.length&&!H(P.a[t])&&(n=P.a[t]),n)},t.isTransparent=function(e){return"rgba(0, 0, 0, 0)"===e||"transparent"===e},t.getRealHeight=function(e){e.clone().show().appendTo(_.$hcont);var t=_.$hcont.height();return _.$hcont.empty(),t},t.resizeAndCrop=function(e,t,n){var o=new T.a.Image;o.onload=function(){var e=[0,0],o=T.a.document.createElement("canvas"),i=o.getContext("2d");o.width=t,o.height=t,e=this.width>this.height?[this.width-this.height,0]:[0,this.height-this.width],i.fillStyle="#fff",i.fillRect(0,0,t,t),i.drawImage(this,e[0]/2,e[1]/2,this.width-e[0],this.height-e[1],0,0,t,t),n(o.toDataURL("image/jpeg"))},o.src=e},t.mailToHelper=function(e,t){if(e&&"mailto:"===e.toString().substr(0,7).toLowerCase()){if(!t)return!0;var o=[],i=null,c=null,l={},u=(e=e.toString().substr(7)).replace(/\?.+$/,""),d=e.replace(/^[^\?]*\?/,""),p=new(0,n(44).default),h=function(e){return e?F.a.compact(F.a.map(r(e).split(/[,]/),function(e){return p.clear(),p.mailsoParse(e),""!==p.email?p:null})):null};return o=h(u),l=s(d),H(l.cc)||(i=h(r(l.cc))),H(l.bcc)||(c=h(r(l.bcc))),n(9).showScreenPopup(t,[I.ComposeType.Empty,null,o,i,c,H(l.subject)?null:a(r(l.subject)),H(l.body)?null:b(a(r(l.body)))]),!0}return!1},t.domReady=function(e){A()(function(){return e()})},n.d(t,"windowResize",function(){return ee}),t.windowResizeCallback=function(){ee()};var w=n(11),T=n.n(w),C=n(12),A=n.n(C),E=n(6),F=n.n(E),j=n(2),N=n(107),R=n.n(N),_=n(7),I=n(3),P=n(108),L=n(84);n.d(t,"jassl",function(){return L.a});var M=A.a.trim,D=A.a.inArray,k=F.a.isArray,x=F.a.isObject,U=F.a.isFunction,H=F.a.isUndefined,B=F.a.isNull,G=F.a.has,K=F.a.bind,V=function(){},z=function(){return!0},q=function(){return!1},W=function(){var e={};return function(t,n,o){e[t]=H(e[t])?0:e[t],T.a.clearTimeout(e[t]),e[t]=T.a.setTimeout(n,o)}}(),Y=function(){var e={};return function(t,n,o){e[t]||(e[t]=T.a.setTimeout(function(){n(),e[t]=0},o))}}(),$=F.a.memoize(function(e){return"@custom"===e.substr(-7)&&(e=M(e.substring(0,e.length-7))),M(e.replace(/[^a-zA-Z0-9]+/g," ").replace(/([A-Z])/g," $1").replace(/[\s]+/g," "))});T.a.rainloop_Utils_htmlToPlain=m,T.a.rainloop_Utils_plainToHtml=b;var J=F.a.debounce(function(){Object(_.dropdownVisibility)(!!F.a.find(_.data.aBootstrapDropdowns,function(e){return e.hasClass("open")}))},50),X={},Z=0,Q=null,ee=F.a.debounce(function(e){H(e)||B(e)?_.$win.resize():T.a.setTimeout(function(){_.$win.resize()},e)},50),te=T.a.String.substr;"b"!=="ab".substr(-1)&&(te=function(e,t,n){return t=0>t?e.length+t:t,e.substr(t,n)},T.a.String.substr=te)},function(e,t,n){"use strict";var o=n(11),i=n.n(o),a=n(6),r=n.n(a),s=n(12),c=n.n(s),l=n(105),u=n(106),d=n.n(u),p=n(3),h=i.a.ko,f=c()(i.a),m=function(e){h.utils.domNodeDisposal.addDisposeCallback(e,function(){e&&e.__opentip&&e.__opentip.deactivate()})};h.bindingHandlers.updateWidth={init:function(e,t){var n=c()(e),o=t(),a=function(){o(n.width()),i.a.setTimeout(function(){o(n.width())},p.Magics.Time500ms)};f.on("resize",a),a(),h.utils.domNodeDisposal.addDisposeCallback(e,function(){f.off("resize",a)})}},h.bindingHandlers.editor={init:function(e,t){var o=null,i=t(),a=n(85).default,r=function(){i&&i.__editor&&i.__editor.setHtmlOrPlain(i())},s=function(){i&&i.__editor&&i(i.__editor.getDataWithHtmlMark())};h.isObservable(i)&&a&&(o=new a(e,s,function(){i.__editor=o,r()},s),i.__fetchEditorValue=s,i.subscribe(r))}},h.bindingHandlers.json={init:function(e,t){c()(e).text(i.a.JSON.stringify(h.unwrap(t())))},update:function(e,t){c()(e).text(i.a.JSON.stringify(h.unwrap(t())))}},h.bindingHandlers.scrollerShadows={init:function(e){var t=c()(e),n=t.find("[data-scroller-shadows-content]")[0]||null,o=r.a.throttle(function(){t.toggleClass("scroller-shadow-top",8<n.scrollTop).toggleClass("scroller-shadow-bottom",n.scrollTop+8<n.scrollHeight-n.clientHeight)},100);n&&(c()(n).on("scroll resize",o),f.on("resize",o),h.utils.domNodeDisposal.addDisposeCallback(n,function(){c()(n).off(),f.off("resize",o)}))}},h.bindingHandlers.pikaday={init:function(e,t,n,o,i){h.bindingHandlers.textInput.init(e,t,n,o,i),d.a&&(e.__pikaday=new d.a({field:e}))}},h.bindingHandlers.visibleAnimated={init:function(e,t){var n=c()(e);n.addClass("rl-animated-inited"),h.unwrap(t())?n.show():n.hide()},update:function(e,t){var n=c()(e);h.unwrap(t())?(n.addClass("rl-animated-hidden").show(),r.a.delay(function(){n.removeClass("rl-animated-hidden")},10)):n.hide().removeClass("rl-animated-hidden")}},h.bindingHandlers.tooltip={init:function(e,t){var o=c()(e),i=t(),a="on"===(o.data("tooltip-mobile")||"off"),s=n(7);if(!s.bMobileDevice||a){var u=!h.isObservable(i)&&r.a.isFunction(i)?i():h.unwrap(i);if(e.__opentip=new l.a(e,{style:"rainloopTip",element:e,tipJoint:o.data("tooltip-join")||"bottom"}),s.dropdownVisibility.subscribe(function(t){t&&e.__opentip.hide()}),""===u?(e.__opentip.hide(),e.__opentip.deactivate(),e.__opentip.setContent("")):e.__opentip.activate(),"on"===(o.data("tooltip-i18n")||"on")){var d=n(8);e.__opentip.setContent(d.i18n(u)),d.trigger.subscribe(function(){e.__opentip.setContent(d.i18n(u))}),s.dropdownVisibility.subscribe(function(){e&&e.__opentip&&e.__opentip.setContent(d.i18n(u))})}else e.__opentip.setContent(u);f.on("rl.tooltips.diactivate",function(){e.__opentip.hide(),e.__opentip.deactivate()}),f.on("rl.tooltips.activate",function(){e.__opentip.activate()})}},update:function(e,t){var o=c()(e),i=t(),a="on"===(o.data("tooltip-mobile")||"off");if((!n(7).bMobileDevice||a)&&e.__opentip){var s=!h.isObservable(i)&&r.a.isFunction(i)?i():h.unwrap(i);s?(e.__opentip.setContent("on"===(o.data("tooltip-i18n")||"on")?n(8).i18n(s):s),e.__opentip.activate()):(e.__opentip.hide(),e.__opentip.deactivate(),e.__opentip.setContent(""))}}},h.bindingHandlers.tooltipErrorTip={init:function(e){var t=c()(e);e.__opentip=new l.a(e,{style:"rainloopErrorTip",hideOn:"mouseout click",element:e,tipJoint:t.data("tooltip-join")||"top"}),e.__opentip.deactivate(),c()(i.a.document).on("click",function(){e&&e.__opentip&&e.__opentip.hide()}),m(e)},update:function(e,t){var n=c()(e),o=t(),i=!h.isObservable(o)&&r.a.isFunction(o)?o():h.unwrap(o),a=e.__opentip;a&&(""===i?(a.hide(),a.deactivate(),a.setContent("")):r.a.delay(function(){n.is(":visible")?(a.setContent(i),a.activate(),a.show()):(a.hide(),a.deactivate(),a.setContent(""))},p.Magics.Time100ms))}},h.bindingHandlers.registrateBootstrapDropdown={init:function(e){var t=n(7);t&&t.data.aBootstrapDropdowns&&(t.data.aBootstrapDropdowns.push(c()(e)),c()(e).click(function(){n(1).detectDropdownVisibility()}))}},h.bindingHandlers.openDropdownTrigger={update:function(e,t){if(h.unwrap(t())){var o=c()(e);o.hasClass("open")||o.find(".dropdown-toggle").dropdown("toggle"),o.find(".dropdown-toggle").focus(),n(1).detectDropdownVisibility(),t()(!1)}}},h.bindingHandlers.dropdownCloser={init:function(e){c()(e).closest(".dropdown").on("click",".e-item",function(){c()(e).dropdown("toggle")})}},h.bindingHandlers.popover={init:function(e,t){c()(e).popover(h.unwrap(t())),h.utils.domNodeDisposal.addDisposeCallback(e,function(){c()(e).popover("destroy")})}},h.bindingHandlers.csstext={},h.bindingHandlers.csstext.init=h.bindingHandlers.csstext.update=function(e,t){e&&e.styleSheet&&void 0!==e.styleSheet.cssText?e.styleSheet.cssText=h.unwrap(t()):c()(e).text(h.unwrap(t()))},h.bindingHandlers.resizecrop={init:function(e){c()(e).addClass("resizecrop").resizecrop({width:"100",height:"100",wrapperCSS:{"border-radius":"10px"}})},update:function(e,t){t()(),c()(e).resizecrop({width:"100",height:"100"})}},h.bindingHandlers.onKeyDown={init:function(e,t,n,o){c()(e).on("keydown.koOnKeyDown",function(e){return!e||t().call(o,e)}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){c()(e).off("keydown.koOnKeyDown")})}},h.bindingHandlers.onEnter={init:function(e,t,n,o){c()(e).on("keypress.koOnEnter",function(n){n&&13===i.a.parseInt(n.keyCode,10)&&(c()(e).trigger("change"),t().call(o))}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){c()(e).off("keypress.koOnEnter")})}},h.bindingHandlers.onSpace={init:function(e,t,n,o){c()(e).on("keyup.koOnSpace",function(e){e&&32===i.a.parseInt(e.keyCode,10)&&t().call(o,e)}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){c()(e).off("keyup.koOnSpace")})}},h.bindingHandlers.onTab={init:function(e,t,n,o){c()(e).on("keydown.koOnTab",function(e){return!e||9!==i.a.parseInt(e.keyCode,10)||t().call(o,!!e.shiftKey)}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){c()(e).off("keydown.koOnTab")})}},h.bindingHandlers.onEsc={init:function(e,t,n,o){c()(e).on("keyup.koOnEsc",function(n){n&&27===i.a.parseInt(n.keyCode,10)&&(c()(e).trigger("change"),t().call(o))}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){c()(e).off("keyup.koOnEsc")})}},h.bindingHandlers.clickOnTrue={update:function(e,t){h.unwrap(t())&&c()(e).click()}},h.bindingHandlers.modal={init:function(e,t){var o=n(7),i=n(1);c()(e).toggleClass("fade",!o.bMobileDevice).modal({keyboard:!1,show:h.unwrap(t())}).on("shown.koModal",i.windowResizeCallback).find(".close").on("click.koModal",function(){t()(!1)}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){c()(e).off("shown.koModal").find(".close").off("click.koModal")})},update:function(e,t){var o=n(7);c()(e).modal(h.unwrap(t())?"show":"hide"),o.$html.hasClass("rl-anim")&&(o.$html.addClass("rl-modal-animation"),r.a.delay(function(){o.$html.removeClass("rl-modal-animation")},p.Magics.Time500ms))}},h.bindingHandlers.moment={init:function(e,t){n(40).momentToNode(c()(e).addClass("moment").data("moment-time",h.unwrap(t())))},update:function(e,t){n(40).momentToNode(c()(e).data("moment-time",h.unwrap(t())))}},h.bindingHandlers.i18nInit={init:function(e){n(8).i18nToNodes(e)}},h.bindingHandlers.translatorInit={init:function(e){n(8).i18nToNodes(e)}},h.bindingHandlers.i18nUpdate={update:function(e,t){h.unwrap(t()),n(8).i18nToNodes(e)}},h.bindingHandlers.link={update:function(e,t){c()(e).attr("href",h.unwrap(t()))}},h.bindingHandlers.title={update:function(e,t){c()(e).attr("title",h.unwrap(t()))}},h.bindingHandlers.textF={init:function(e,t){c()(e).text(h.unwrap(t()))}},h.bindingHandlers.initDom={init:function(e,t){t()(e)}},h.bindingHandlers.initFixedTrigger={init:function(e,t){var n=h.unwrap(t()),o=c()(e),i=n[1]||0,a=c()(n[0]||null);(a=a[0]?a:null)&&f.resize(function(){var e=a?a.offset():null;e&&e.top&&o.css("top",e.top+i)})}},h.bindingHandlers.initResizeTrigger={init:function(e,t){var n=h.unwrap(t());c()(e).css({height:n[1],"min-height":n[1]})},update:function(e,t){var o=n(1),i=n(7),a=h.unwrap(t()),r=o.pInt(a[1]),s=0,l=c()(e).offset().top;0<l&&(l+=o.pInt(a[2]),r<(s=i.$win.height()-l)&&(r=s),c()(e).css({height:r,"min-height":r}))}},h.bindingHandlers.appendDom={update:function(e,t){c()(e).hide().empty().append(h.unwrap(t())).show()}},h.bindingHandlers.draggable={init:function(e,t,o){var a=n(7),r=n(1);if(!a.bMobileDevice){var s=o(),l=s&&s.droppableSelector?s.droppableSelector:"",u={distance:20,handle:".dragHandle",cursorAt:{top:22,left:3},refreshPositions:!0,scroll:!0,drag:null,stop:null,helper:null};l&&(u.drag=function(e){c()(l).each(function(){var t=c()(this),n=t.offset(),o=n.top+t.height();if(i.a.clearInterval(t.data("timerScroll")),t.data("timerScroll",!1),e.pageX>=n.left&&e.pageX<=n.left+t.width()){if(e.pageY>=o-100&&e.pageY<=o){var a=function(){t.scrollTop(t.scrollTop()+3),r.windowResize()};t.data("timerScroll",i.a.setInterval(a,10)),a()}if(e.pageY>=n.top&&e.pageY<=n.top+100){var s=function(){t.scrollTop(t.scrollTop()-3),r.windowResize()};t.data("timerScroll",i.a.setInterval(s,10)),s()}}})},u.stop=function(){c()(l).each(function(){var e=c()(this);i.a.clearInterval(e.data("timerScroll")),e.data("timerScroll",!1)})}),u.helper=function(e){return t()(e&&e.target?h.dataFor(e.target):null)},c()(e).draggable(u).on("mousedown.koDraggable",function(){r.removeInFocus()}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){c()(e).off("mousedown.koDraggable").draggable("destroy")})}}},h.bindingHandlers.droppable={init:function(e,t,o){if(!n(7).bMobileDevice){var i=t(),a=o(),r=a&&a.droppableOver?a.droppableOver:null,s=a&&a.droppableOut?a.droppableOut:null,l={tolerance:"pointer",hoverClass:"droppableHover",drop:null,over:null,out:null};i&&(l.drop=function(e,t){i(e,t)},r&&(l.over=function(e,t){r(e,t)}),s&&(l.out=function(e,t){s(e,t)}),c()(e).droppable(l),h.utils.domNodeDisposal.addDisposeCallback(e,function(){c()(e).droppable("destroy")}))}}},h.bindingHandlers.nano={init:function(e){var t=n(7),o=n(10);t.bDisableNanoScroll||o.appSettingsGet("useNativeScrollbars")||c()(e).addClass("nano").nanoScroller({iOSNativeScrolling:!1,preventPageScrolling:!0})}},h.bindingHandlers.saveTrigger={init:function(e){var t=c()(e);t.data("save-trigger-type",t.is("input[type=text],input[type=email],input[type=password],select,textarea")?"input":"custom"),"custom"===t.data("save-trigger-type")?t.append('&nbsp;&nbsp;<i class="icon-spinner animated"></i><i class="icon-remove error"></i><i class="icon-ok success"></i>').addClass("settings-saved-trigger"):t.addClass("settings-saved-trigger-input")},update:function(e,t){var n=h.unwrap(t()),o=c()(e);if("custom"===o.data("save-trigger-type"))switch(n.toString()){case"1":o.find(".animated,.error").hide().removeClass("visible").end().find(".success").show().addClass("visible");break;case"0":o.find(".animated,.success").hide().removeClass("visible").end().find(".error").show().addClass("visible");break;case"-2":o.find(".error,.success").hide().removeClass("visible").end().find(".animated").show().addClass("visible");break;default:o.find(".animated").hide().end().find(".error,.success").removeClass("visible")}else switch(n.toString()){case"1":o.addClass("success").removeClass("error");break;case"0":o.addClass("error").removeClass("success");break;case"-2":break;default:o.removeClass("error success")}}},h.bindingHandlers.emailsTags={init:function(e,t,o){var i=n(1),a=n(44).default,s=c()(e),l=t(),u=o().autoCompleteSource||null;s.inputosaurus({parseOnBlur:!0,allowDragAndDrop:!0,focusCallback:function(e){l&&l.focused&&l.focused(!!e)},inputDelimiters:[",",";","\n"],autoCompleteSource:u,parseHook:function(e){return r.a.map(e,function(e){var t=i.trim(e);if(""!==t){var n=new a;return n.mailsoParse(t),[n.toLine(!1),n]}return[t,null]})},change:function(e){s.data("EmailsTagsValue",e.target.value),l(e.target.value)}}),l&&l.focused&&l.focused.subscribe&&l.focused.subscribe(function(e){s.inputosaurus(e?"focus":"blur")})},update:function(e,t){var n=c()(e),o=t(),i=h.unwrap(o);n.data("EmailsTagsValue")!==i&&(n.val(i),n.data("EmailsTagsValue",i),n.inputosaurus("refresh"))}},h.bindingHandlers.command={init:function(e,t,n,o,i){var a=c()(e),s=t();if(!s||!s.isCommand)throw new Error("Value should be a command");if(s.enabled||(s.enabled=h.observable(!0)),!s.canExecute){var l=s.__realCanExecute;r.a.isFunction(l)?s.canExecute=h.computed(function(){return s.enabled()&&l.call(o,o)}):s.canExecute=h.computed(function(){return s.enabled()&&!!l})}a.addClass("command"),h.bindingHandlers[a.is("form")?"submit":"click"].init(e,t,n,o,i)},update:function(e,t){var n=c()(e),o=t(),i=o.enabled();n.toggleClass("command-not-enabled",!i),i&&(i=o.canExecute(),n.toggleClass("command-can-not-be-execute",!i)),n.toggleClass("command-disabled disable disabled",!i).toggleClass("no-disabled",!!i),(n.is("input")||n.is("button"))&&n.prop("disabled",!i)}},h.extenders.trimmer=function(e){var t=n(1),o=h.computed({read:e,write:function(n){e(t.trim(n.toString()))}});return o(e()),o},h.extenders.posInterer=function(e,t){var o=n(1),i=h.computed({read:e,write:function(n){var i=o.pInt(n.toString(),t);0>=i&&(i=t),i===e()&&""+i!=""+n&&e(i+1),e(i)}});return i(e()),i},h.extenders.limitedList=function(e,t){var o=n(1),i=h.computed({read:e,write:function(n){var i=h.unwrap(e),a=h.unwrap(t);o.isNonEmptyArray(a)?-1<o.inArray(n,a)?e(n):-1<o.inArray(i,a)?(e(i+" "),e(i)):(e(a[0]+" "),e(a[0])):e("")}}).extend({notify:"always"});return i(e()),i.valueHasMutated||(i.valueHasMutated=function(){e.valueHasMutated()}),i},h.extenders.reversible=function(e){var t=e();return e.commit=function(){t=e()},e.reverse=function(){e(t)},e.commitedValue=function(){return t},e},h.extenders.toggleSubscribe=function(e,t){return e.subscribe(t[1],t[0],"beforeChange"),e.subscribe(t[2],t[0]),e},h.extenders.toggleSubscribeProperty=function(e,t){var n=t[1];return n&&(e.subscribe(function(e){e&&e[n]&&e[n](!1)},t[0],"beforeChange"),e.subscribe(function(e){e&&e[n]&&e[n](!0)},t[0])),e},h.extenders.falseTimeout=function(e,t){return e.iFalseTimeoutTimeout=0,e.subscribe(function(o){o&&(i.a.clearTimeout(e.iFalseTimeoutTimeout),e.iFalseTimeoutTimeout=i.a.setTimeout(function(){e(!1),e.iFalseTimeoutTimeout=0},n(1).pInt(t)))}),e},h.extenders.specialThrottle=function(e,t){return e.iSpecialThrottleTimeoutValue=n(1).pInt(t),0<e.iSpecialThrottleTimeoutValue?(e.iSpecialThrottleTimeout=0,e.valueForRead=h.observable(!!e()).extend({throttle:10}),h.computed({read:e.valueForRead,write:function(t){t?e.valueForRead(t):e.valueForRead()?(i.a.clearTimeout(e.iSpecialThrottleTimeout),e.iSpecialThrottleTimeout=i.a.setTimeout(function(){e.valueForRead(!1),e.iSpecialThrottleTimeout=0},e.iSpecialThrottleTimeoutValue)):e.valueForRead(t)}})):e},h.extenders.idleTrigger=function(e){return e.trigger=h.observable(p.SaveSettingsStep.Idle),e},h.observable.fn.idleTrigger=function(){return this.extend({idleTrigger:!0})},h.observable.fn.validateNone=function(){return this.hasError=h.observable(!1),this},h.observable.fn.validateEmail=function(){var e=this;return this.hasError=h.observable(!1),this.subscribe(function(t){e.hasError(""!==t&&!/^[^@\s]+@[^@\s]+$/.test(t))}),this.valueHasMutated(),this},h.observable.fn.validateSimpleEmail=function(){var e=this;return this.hasError=h.observable(!1),this.subscribe(function(t){e.hasError(""!==t&&!/^.+@.+$/.test(t))}),this.valueHasMutated(),this},h.observable.fn.deleteAccessHelper=function(){return this.extend({falseTimeout:3e3}).extend({toggleSubscribeProperty:[this,"deleteAccess"]}),this},h.observable.fn.validateFunc=function(e){var t=this;return this.hasFuncError=h.observable(!1),r.a.isFunction(e)&&(this.subscribe(function(n){t.hasFuncError(!e(n))}),this.valueHasMutated()),this},t.a=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FileType",function(){return o}),n.d(t,"StorageResultType",function(){return i}),n.d(t,"Focused",function(){return a}),n.d(t,"State",function(){return r}),n.d(t,"StateType",function(){return s}),n.d(t,"Capa",function(){return c}),n.d(t,"KeyState",function(){return l}),n.d(t,"FolderType",function(){return u}),n.d(t,"ServerFolderType",function(){return d}),n.d(t,"LoginSignMeTypeAsString",function(){return p}),n.d(t,"LoginSignMeType",function(){return h}),n.d(t,"ComposeType",function(){return f}),n.d(t,"UploadErrorCode",function(){return m}),n.d(t,"SetSystemFoldersNotification",function(){return b}),n.d(t,"ClientSideKeyName",function(){return g}),n.d(t,"EventKeyCode",function(){return y}),n.d(t,"MessageSetAction",function(){return v}),n.d(t,"MessageSelectAction",function(){return S}),n.d(t,"DesktopNotification",function(){return O}),n.d(t,"MessagePriority",function(){return w}),n.d(t,"EditorDefaultType",function(){return T}),n.d(t,"ServerSecure",function(){return C}),n.d(t,"SearchDateType",function(){return A}),n.d(t,"SaveSettingsStep",function(){return E}),n.d(t,"Layout",function(){return F}),n.d(t,"FilterConditionField",function(){return j}),n.d(t,"FilterConditionType",function(){return N}),n.d(t,"FiltersAction",function(){return R}),n.d(t,"FilterRulesType",function(){return _}),n.d(t,"SignedVerifyStatus",function(){return I}),n.d(t,"ContactPropertyType",function(){return P}),n.d(t,"Magics",function(){return L}),n.d(t,"Ports",function(){return M}),n.d(t,"Notification",function(){return D});var o={Unknown:"unknown",Text:"text",Html:"html",Code:"code",Eml:"eml",WordText:"word-text",Pdf:"pdf",Image:"image",Audio:"audio",Video:"video",Sheet:"sheet",Presentation:"presentation",Certificate:"certificate",CertificateBin:"certificate-bin",Archive:"archive"},i={Success:"success",Abort:"abort",Error:"error",Unload:"unload"},a={None:"none",MessageList:"message-list",MessageView:"message-view",FolderList:"folder-list"},r={Empty:10,Login:20,Auth:30},s={Webmail:0,Admin:1},c={TwoFactor:"TWO_FACTOR",TwoFactorForce:"TWO_FACTOR_FORCE",OpenPGP:"OPEN_PGP",Prefetch:"PREFETCH",Gravatar:"GRAVATAR",Folders:"FOLDERS",Composer:"COMPOSER",Contacts:"CONTACTS",Reload:"RELOAD",Search:"SEARCH",SearchAdv:"SEARCH_ADV",MessageActions:"MESSAGE_ACTIONS",MessageListActions:"MESSAGELIST_ACTIONS",AttachmentsActions:"ATTACHMENTS_ACTIONS",DangerousActions:"DANGEROUS_ACTIONS",Settings:"SETTINGS",Help:"HELP",Themes:"THEMES",UserBackground:"USER_BACKGROUND",Sieve:"SIEVE",Filters:"FILTERS",AttachmentThumbnails:"ATTACHMENT_THUMBNAILS",Templates:"TEMPLATES",AutoLogout:"AUTOLOGOUT",AdditionalAccounts:"ADDITIONAL_ACCOUNTS",Identities:"IDENTITIES"},l={All:"all",None:"none",ContactList:"contact-list",MessageList:"message-list",FolderList:"folder-list",MessageView:"message-view",Compose:"compose",Settings:"settings",Menu:"menu",PopupComposeOpenPGP:"compose-open-pgp",PopupMessageOpenPGP:"message-open-pgp",PopupViewOpenPGP:"view-open-pgp",PopupKeyboardShortcutsHelp:"popup-keyboard-shortcuts-help",PopupAsk:"popup-ask"},u={Inbox:10,SentItems:11,Draft:12,Trash:13,Spam:14,Archive:15,NotSpam:80,User:99},d={USER:0,INBOX:1,SENT:2,DRAFTS:3,JUNK:4,TRASH:5,IMPORTANT:10,FLAGGED:11,ALL:12},p={DefaultOff:"defaultoff",DefaultOn:"defaulton",Unused:"unused"},h={DefaultOff:0,DefaultOn:1,Unused:2},f={Empty:"empty",Reply:"reply",ReplyAll:"replyall",Forward:"forward",ForwardAsAttachment:"forward-as-attachment",Draft:"draft",EditAsNew:"editasnew"},m={Normal:0,FileIsTooBig:1,FilePartiallyUploaded:2,FileNoUploaded:3,MissingTempFolder:4,FileOnSaveingError:5,FileType:98,Unknown:99},b={None:0,Sent:1,Draft:2,Spam:3,Trash:4,Archive:5},g={FoldersLashHash:0,MessagesInboxLastHash:1,MailBoxListSize:2,ExpandedFolders:3,FolderListSize:4,MessageListSize:5,LastReplyAction:6,LastSignMe:7,ComposeLastIdentityID:8,MessageHeaderFullInfo:9,MessageAttachmnetControls:10},y={Backspace:8,Tab:9,Enter:13,Esc:27,PageUp:33,PageDown:34,Left:37,Right:39,Up:38,Down:40,End:35,Home:36,Space:32,Insert:45,Delete:46,A:65,S:83},v={SetSeen:0,UnsetSeen:1,SetFlag:2,UnsetFlag:3},S={All:0,None:1,Invert:2,Unseen:3,Seen:4,Flagged:5,Unflagged:6},O={Allowed:0,NotAllowed:1,Denied:2,NotSupported:9},w={Low:5,Normal:3,High:1},T={Html:"Html",Plain:"Plain",HtmlForced:"HtmlForced",PlainForced:"PlainForced"},C={None:0,SSL:1,TLS:2},A={All:-1,Days3:3,Days7:7,Month:30},E={Animate:-2,Idle:-1,TrueResult:1,FalseResult:0},F={NoPreview:0,SidePreview:1,BottomPreview:2},j={From:"From",Recipient:"Recipient",Subject:"Subject",Header:"Header",Size:"Size"},N={Contains:"Contains",NotContains:"NotContains",EqualTo:"EqualTo",NotEqualTo:"NotEqualTo",Regex:"Regex",Over:"Over",Under:"Under"},R={None:"None",MoveTo:"MoveTo",Discard:"Discard",Vacation:"Vacation",Reject:"Reject",Forward:"Forward"},_={All:"All",Any:"Any"},I={UnknownPublicKeys:-4,UnknownPrivateKey:-3,Unverified:-2,Error:-1,None:0,Success:1},P={Unknown:0,FullName:10,FirstName:15,LastName:16,MiddleName:16,Nick:18,NamePrefix:20,NameSuffix:21,Email:30,Phone:31,Web:32,Birthday:40,Facebook:90,Skype:91,GitHub:92,Note:110,Custom:250},L={EventWhichMouseMiddle:3,ifvisibleIdle10s:10,BitLength2048:2048,BitLength1024:1024,Size350px:350,Size50px:50,Size20px:20,Size1px:1,Time30mInMin:30,Time60m:36e5,Time30m:18e5,Time20m:12e5,Time15m:9e5,Time10m:6e5,Time5m:3e5,Time3m:18e4,Time2m:12e4,Time1m:6e4,Time30s:3e4,Time10s:1e4,Time7s:7e3,Time5s:5e3,Time3s:3e3,Time1s:1e3,Time500ms:500,Time350ms:350,Time250ms:250,Time200ms:200,Time100ms:100,Time50ms:50,Time20ms:20,Time10ms:10,Time1ms:1},M={Imap:143,ImapSsl:993,Smtp:25,SmtpSsl:465,SmtpStartTls:587},D={InvalidToken:101,AuthError:102,AccessError:103,ConnectionError:104,CaptchaError:105,SocialFacebookLoginAccessDisable:106,SocialTwitterLoginAccessDisable:107,SocialGoogleLoginAccessDisable:108,DomainNotAllowed:109,AccountNotAllowed:110,AccountTwoFactorAuthRequired:120,AccountTwoFactorAuthError:121,CouldNotSaveNewPassword:130,CurrentPasswordIncorrect:131,NewPasswordShort:132,NewPasswordWeak:133,NewPasswordForbidden:134,ContactsSyncError:140,CantGetMessageList:201,CantGetMessage:202,CantDeleteMessage:203,CantMoveMessage:204,CantCopyMessage:205,CantSaveMessage:301,CantSendMessage:302,InvalidRecipients:303,CantSaveFilters:351,CantGetFilters:352,FiltersAreNotCorrect:355,CantCreateFolder:400,CantRenameFolder:401,CantDeleteFolder:402,CantSubscribeFolder:403,CantUnsubscribeFolder:404,CantDeleteNonEmptyFolder:405,CantSaveSettings:501,CantSavePluginSettings:502,DomainAlreadyExists:601,CantInstallPackage:701,CantDeletePackage:702,InvalidPluginPackage:703,UnsupportedPluginPackage:704,LicensingServerIsUnavailable:710,LicensingExpired:711,LicensingBanned:712,DemoSendMessageError:750,DemoAccountError:751,AccountAlreadyExists:801,AccountDoesNotExist:802,MailServerError:901,ClientViewError:902,InvalidInputArgument:903,AjaxFalse:950,AjaxAbort:951,AjaxParse:952,AjaxTimeout:953,UnknownNotification:999,UnknownError:999}},function(e,t,n){"use strict";t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(87));t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=o(n(137)),a=o(n(141)),r=o(n(87));t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,r.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t){e.exports=window._},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"$win",function(){return h}),n.d(t,"$doc",function(){return f}),n.d(t,"$html",function(){return m}),n.d(t,"$body",function(){return b}),n.d(t,"$div",function(){return g}),n.d(t,"$hcont",function(){return y}),n.d(t,"startMicrotime",function(){return v}),n.d(t,"community",function(){return S}),n.d(t,"dropdownVisibility",function(){return O}),n.d(t,"useKeyboardShortcuts",function(){return w}),n.d(t,"sUserAgent",function(){return T}),n.d(t,"bIE",function(){return C}),n.d(t,"bChrome",function(){return A}),n.d(t,"bSafari",function(){return E}),n.d(t,"bMobileDevice",function(){return F}),n.d(t,"bDisableNanoScroll",function(){return j}),n.d(t,"bAnimationSupported",function(){return N}),n.d(t,"bXMLHttpRequestSupported",function(){return R}),n.d(t,"bIsHttps",function(){return _}),n.d(t,"htmlEditorDefaultConfig",function(){return I}),n.d(t,"htmlEditorLangsMap",function(){return P}),n.d(t,"bAllowPdfPreview",function(){return L}),n.d(t,"VIEW_MODELS",function(){return M}),n.d(t,"moveAction",function(){return D}),n.d(t,"leftPanelDisabled",function(){return k}),n.d(t,"leftPanelType",function(){return x}),n.d(t,"leftPanelWidth",function(){return U}),n.d(t,"popupVisibilityNames",function(){return H}),n.d(t,"popupVisibility",function(){return B}),n.d(t,"keyScopeReal",function(){return G}),n.d(t,"keyScopeFake",function(){return K}),n.d(t,"keyScope",function(){return V}),n.d(t,"data",function(){return z});var o=n(11),i=n.n(o),a=n(6),r=n.n(a),s=n(12),c=n.n(s),l=n(19),u=n.n(l),d=n(2),p=n(3),h=c()(i.a);h.__sizes=[0,0];var f=c()(i.a.document),m=c()("html"),b=c()("body"),g=c()("<div></div>"),y=c()("<div></div>");y.attr("area","hidden").css({position:"absolute",left:-5e3}).appendTo(b);var v=(new i.a.Date).getTime(),S=!0,O=d.a.observable(!1).extend({rateLimit:0}),w=d.a.observable(!0),T="navigator"in i.a&&"userAgent"in i.a.navigator&&i.a.navigator.userAgent.toLowerCase()||"",C=-1<T.indexOf("msie"),A=-1<T.indexOf("chrome"),E=!A&&-1<T.indexOf("safari"),F=/android/i.test(T)||/iphone/i.test(T)||/ipod/i.test(T)||/ipad/i.test(T)||/blackberry/i.test(T),j=F,N=!F&&m.hasClass("csstransitions")&&m.hasClass("cssanimations"),R=!!i.a.XMLHttpRequest,_=!(!i.a.document||!i.a.document.location)&&"https:"===i.a.document.location.protocol,I={title:!1,stylesSet:!1,customConfig:"",contentsCss:"",toolbarGroups:[{name:"spec"},{name:"styles"},{name:"basicstyles",groups:["basicstyles","cleanup","bidi"]},{name:"colors"},F?{}:{name:"paragraph",groups:["list","indent","blocks","align"]},{name:"links"},{name:"insert"},{name:"document",groups:["mode","document","doctools"]},{name:"others"}],removePlugins:"liststyle",removeButtons:"Format,Undo,Redo,Cut,Copy,Paste,Anchor,Strike,Subscript,Superscript,Image,SelectAll,Source",removeDialogTabs:"link:advanced;link:target;image:advanced;images:advanced",extraPlugins:"plain,signature",allowedContent:!0,extraAllowedContent:!0,fillEmptyBlocks:!1,ignoreEmptyParagraph:!0,disableNativeSpellChecker:!1,colorButton_enableAutomatic:!1,colorButton_enableMore:!0,font_defaultLabel:"Arial",fontSize_defaultLabel:"13",fontSize_sizes:"10/10px;12/12px;13/13px;14/14px;16/16px;18/18px;20/20px;24/24px;28/28px;36/36px;48/48px"},P={ar_sa:"ar-sa",bg_bg:"bg",cs_CZ:"cs",de_de:"de",el_gr:"el",es_es:"es",et_ee:"et",fr_fr:"fr",hu_hu:"hu",is_is:"is",it_it:"it",ja_jp:"ja",ko_kr:"ko",lt_lt:"lt",lv_lv:"lv",fa_ir:"fa",nb_no:"nb",nl_nl:"nl",pl_pl:"pl",pt_br:"pt-br",pt_pt:"pt",ro_ro:"ro",ru_ru:"ru",sk_sk:"sk",sl_si:"sl",sv_se:"sv",tr_tr:"tr",uk_ua:"uk",zh_cn:"zh-cn",zh_tw:"zh"},L=!F;L&&i.a.navigator&&i.a.navigator.mimeTypes&&((L=!!r.a.find(i.a.navigator.mimeTypes,function(e){return e&&"application/pdf"===e.type}))||(L=void 0!==i.a.navigator.mimeTypes["application/pdf"]));var M={settings:[],"settings-removed":[],"settings-disabled":[]},D=d.a.observable(!1),k=d.a.observable(!1),x=d.a.observable(""),U=d.a.observable(0);k.subscribe(function(e){e&&D()&&D(!1)}),D.subscribe(function(e){e&&k()&&k(!1)});var H=d.a.observableArray([]),B=d.a.computed(function(){return 0<H().length});B.subscribe(function(e){m.toggleClass("rl-modal",e)});var G=d.a.observable(p.KeyState.All),K=d.a.observable(p.KeyState.All),V=d.a.computed({read:function(){return K()},write:function(e){p.KeyState.Menu!==e&&(p.KeyState.Compose===e?u.a.filter=function(){return w()}:u.a.filter=function(e){if(w()){var t=e.target||e.srcElement,n=t?t.tagName.toUpperCase():"";return!("INPUT"===n||"SELECT"===n||"TEXTAREA"===n||t&&"DIV"===n&&("editorHtmlArea"===t.className||"true"==""+t.contentEditable))}return!1},K(e),O()&&(e=p.KeyState.Menu)),G(e)}});G.subscribe(function(e){u.a.setScope(e)}),O.subscribe(function(e){e?V(p.KeyState.Menu):p.KeyState.Menu===u.a.getScope()&&V(K())});var z={__APP__:null,iAjaxErrorCount:0,iTokenErrorCount:0,aBootstrapDropdowns:[],iMessageBodyCacheCount:0,bUnload:!1}},function(e,t,n){"use strict";function o(e,t,n){var o="",i=y[e];if(Object(f.isUnd)(i)&&(i=Object(f.isUnd)(n)?e:n),!Object(f.isUnd)(t)&&!Object(f.isNull)(t))for(o in t)Object(f.has)(t,o)&&(i=i.replace("%"+o+"%",t[o]));return i}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l.a.defer(function(){d()("[data-i18n]",e).each(function(e,t){w(t)}),t&&m.bAnimationSupported&&d()(".i18n-animation[data-i18n]",e).letterfx({fx:"fall fade",backwards:!1,timing:50,fx_duration:"50ms",letter_end:"restore",element_end:"restore"})})}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e=s.a.parseInt(e,10)||0,h.Notification.ClientViewError===e&&t?t:(n=n?s.a.parseInt(n,10)||0:0,Object(f.isUnd)(v[e])?n&&Object(f.isUnd)(v[n])?v[n]:"":v[e])}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"trigger",function(){return O}),t.i18n=o,t.i18nToNodes=i,t.initNotificationLanguage=function(){S.forEach(function(e){v[e[0]]=o(e[1])})},t.initOnStartOrLangChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&e(),t?O.subscribe(function(){e&&e(),t&&t()}):e&&O.subscribe(e)},t.getNotification=a,t.getNotificationFromResponse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.Notification.UnknownNotification;return e&&e.ErrorCode?a(Object(f.pInt)(e.ErrorCode),e.ErrorMessage||""):a(t)},t.getUploadErrorDescByCode=function(e){var t="";switch(s.a.parseInt(e,10)||0){case h.UploadErrorCode.FileIsTooBig:t=o("UPLOAD/ERROR_FILE_IS_TOO_BIG");break;case h.UploadErrorCode.FilePartiallyUploaded:t=o("UPLOAD/ERROR_FILE_PARTIALLY_UPLOADED");break;case h.UploadErrorCode.FileNoUploaded:t=o("UPLOAD/ERROR_NO_FILE_UPLOADED");break;case h.UploadErrorCode.MissingTempFolder:t=o("UPLOAD/ERROR_MISSING_TEMP_FOLDER");break;case h.UploadErrorCode.FileOnSaveingError:t=o("UPLOAD/ERROR_ON_SAVING_FILE");break;case h.UploadErrorCode.FileType:t=o("UPLOAD/ERROR_FILE_TYPE");break;default:t=o("UPLOAD/ERROR_UNKNOWN")}return t},t.reload=function(e,t){var n=Object(f.microtime)();return m.$html.addClass("rl-changing-language"),new s.a.Promise(function(o,i){d.a.ajax({url:Object(g.n)(t,e),dataType:"script",cache:!0}).then(function(){l.a.delay(function(){T();var e=-1<Object(f.inArray)((t||"").toLowerCase(),["ar","ar_sa","he","he_he","ur","ur_ir"]);m.$html.removeClass("rl-changing-language").removeClass("rl-rtl rl-ltr").addClass(e?"rl-rtl":"rl-ltr"),o()},500<Object(f.microtime)()-n?1:500)},function(){m.$html.removeClass("rl-changing-language"),s.a.rainloopI18N=null,i()})})};var r=n(11),s=n.n(r),c=n(6),l=n.n(c),u=n(12),d=n.n(u),p=n(2),h=n(3),f=n(1),m=n(7),b=n(40),g=n(14),y=s.a.rainloopI18N||{},v={},S=[[h.Notification.InvalidToken,"NOTIFICATIONS/INVALID_TOKEN"],[h.Notification.InvalidToken,"NOTIFICATIONS/INVALID_TOKEN"],[h.Notification.AuthError,"NOTIFICATIONS/AUTH_ERROR"],[h.Notification.AccessError,"NOTIFICATIONS/ACCESS_ERROR"],[h.Notification.ConnectionError,"NOTIFICATIONS/CONNECTION_ERROR"],[h.Notification.CaptchaError,"NOTIFICATIONS/CAPTCHA_ERROR"],[h.Notification.SocialFacebookLoginAccessDisable,"NOTIFICATIONS/SOCIAL_FACEBOOK_LOGIN_ACCESS_DISABLE"],[h.Notification.SocialTwitterLoginAccessDisable,"NOTIFICATIONS/SOCIAL_TWITTER_LOGIN_ACCESS_DISABLE"],[h.Notification.SocialGoogleLoginAccessDisable,"NOTIFICATIONS/SOCIAL_GOOGLE_LOGIN_ACCESS_DISABLE"],[h.Notification.DomainNotAllowed,"NOTIFICATIONS/DOMAIN_NOT_ALLOWED"],[h.Notification.AccountNotAllowed,"NOTIFICATIONS/ACCOUNT_NOT_ALLOWED"],[h.Notification.AccountTwoFactorAuthRequired,"NOTIFICATIONS/ACCOUNT_TWO_FACTOR_AUTH_REQUIRED"],[h.Notification.AccountTwoFactorAuthError,"NOTIFICATIONS/ACCOUNT_TWO_FACTOR_AUTH_ERROR"],[h.Notification.CouldNotSaveNewPassword,"NOTIFICATIONS/COULD_NOT_SAVE_NEW_PASSWORD"],[h.Notification.CurrentPasswordIncorrect,"NOTIFICATIONS/CURRENT_PASSWORD_INCORRECT"],[h.Notification.NewPasswordShort,"NOTIFICATIONS/NEW_PASSWORD_SHORT"],[h.Notification.NewPasswordWeak,"NOTIFICATIONS/NEW_PASSWORD_WEAK"],[h.Notification.NewPasswordForbidden,"NOTIFICATIONS/NEW_PASSWORD_FORBIDDENT"],[h.Notification.ContactsSyncError,"NOTIFICATIONS/CONTACTS_SYNC_ERROR"],[h.Notification.CantGetMessageList,"NOTIFICATIONS/CANT_GET_MESSAGE_LIST"],[h.Notification.CantGetMessage,"NOTIFICATIONS/CANT_GET_MESSAGE"],[h.Notification.CantDeleteMessage,"NOTIFICATIONS/CANT_DELETE_MESSAGE"],[h.Notification.CantMoveMessage,"NOTIFICATIONS/CANT_MOVE_MESSAGE"],[h.Notification.CantCopyMessage,"NOTIFICATIONS/CANT_MOVE_MESSAGE"],[h.Notification.CantSaveMessage,"NOTIFICATIONS/CANT_SAVE_MESSAGE"],[h.Notification.CantSendMessage,"NOTIFICATIONS/CANT_SEND_MESSAGE"],[h.Notification.InvalidRecipients,"NOTIFICATIONS/INVALID_RECIPIENTS"],[h.Notification.CantSaveFilters,"NOTIFICATIONS/CANT_SAVE_FILTERS"],[h.Notification.CantGetFilters,"NOTIFICATIONS/CANT_GET_FILTERS"],[h.Notification.FiltersAreNotCorrect,"NOTIFICATIONS/FILTERS_ARE_NOT_CORRECT"],[h.Notification.CantCreateFolder,"NOTIFICATIONS/CANT_CREATE_FOLDER"],[h.Notification.CantRenameFolder,"NOTIFICATIONS/CANT_RENAME_FOLDER"],[h.Notification.CantDeleteFolder,"NOTIFICATIONS/CANT_DELETE_FOLDER"],[h.Notification.CantDeleteNonEmptyFolder,"NOTIFICATIONS/CANT_DELETE_NON_EMPTY_FOLDER"],[h.Notification.CantSubscribeFolder,"NOTIFICATIONS/CANT_SUBSCRIBE_FOLDER"],[h.Notification.CantUnsubscribeFolder,"NOTIFICATIONS/CANT_UNSUBSCRIBE_FOLDER"],[h.Notification.CantSaveSettings,"NOTIFICATIONS/CANT_SAVE_SETTINGS"],[h.Notification.CantSavePluginSettings,"NOTIFICATIONS/CANT_SAVE_PLUGIN_SETTINGS"],[h.Notification.DomainAlreadyExists,"NOTIFICATIONS/DOMAIN_ALREADY_EXISTS"],[h.Notification.CantInstallPackage,"NOTIFICATIONS/CANT_INSTALL_PACKAGE"],[h.Notification.CantDeletePackage,"NOTIFICATIONS/CANT_DELETE_PACKAGE"],[h.Notification.InvalidPluginPackage,"NOTIFICATIONS/INVALID_PLUGIN_PACKAGE"],[h.Notification.UnsupportedPluginPackage,"NOTIFICATIONS/UNSUPPORTED_PLUGIN_PACKAGE"],[h.Notification.LicensingServerIsUnavailable,"NOTIFICATIONS/LICENSING_SERVER_IS_UNAVAILABLE"],[h.Notification.LicensingExpired,"NOTIFICATIONS/LICENSING_EXPIRED"],[h.Notification.LicensingBanned,"NOTIFICATIONS/LICENSING_BANNED"],[h.Notification.DemoSendMessageError,"NOTIFICATIONS/DEMO_SEND_MESSAGE_ERROR"],[h.Notification.DemoAccountError,"NOTIFICATIONS/DEMO_ACCOUNT_ERROR"],[h.Notification.AccountAlreadyExists,"NOTIFICATIONS/ACCOUNT_ALREADY_EXISTS"],[h.Notification.AccountDoesNotExist,"NOTIFICATIONS/ACCOUNT_DOES_NOT_EXIST"],[h.Notification.MailServerError,"NOTIFICATIONS/MAIL_SERVER_ERROR"],[h.Notification.InvalidInputArgument,"NOTIFICATIONS/INVALID_INPUT_ARGUMENT"],[h.Notification.UnknownNotification,"NOTIFICATIONS/UNKNOWN_ERROR"],[h.Notification.UnknownError,"NOTIFICATIONS/UNKNOWN_ERROR"]],O=p.a.observable(!1),w=function(e){var t=d()(e),n=t.data("i18n");if(n)if("["===n.substr(0,1))switch(n.substr(0,6)){case"[html]":t.html(o(n.substr(6)));break;case"[place":t.attr("placeholder",o(n.substr(13)));break;case"[title":t.attr("title",o(n.substr(7)))}else t.text(o(n))},T=function(){s.a.rainloopI18N&&(y=s.a.rainloopI18N||{},i(s.a.document,!0),Object(b.reload)(),O(!O())),s.a.rainloopI18N=null};m.$html.addClass("rl-"+(m.$html.attr("dir")||"ltr"))},function(e,t,n){"use strict";function o(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(F.createCommandLegacy)(null,e,t)}function i(e){return""===e||Object(F.isUnd)(R[e])?null:R[e]}function a(e){var t=null;return e&&(t=e,e.default&&(t=e.default)),t}function r(e){var t=a(e);t&&t.__vm&&t.__dom&&t.__vm.modalVisibility(!1)}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;b.a.each(t.__names,function(o){Object(A.f)(e,[o,t.__vm,n])})}function c(e,t){if(e&&!e.__builded){var n=null,i=new e(t),a=e.__type||"",c=a?y()("#rl-content #rl-"+a.toLowerCase()):null;e.__builded=!0,e.__vm=i,i.onShowTrigger=v.a.observable(!1),i.onHideTrigger=v.a.observable(!1),i.viewModelName=e.__name,i.viewModelNames=e.__names,i.viewModelTemplateID=e.__templateID,i.viewModelPosition=e.__type,c&&1===c.length?((n=y()("<div></div>").addClass("rl-view-model").addClass("RL-"+i.viewModelTemplateID).hide()).appendTo(c),i.viewModelDom=n,e.__dom=n,_.Popup===a&&(i.cancelCommand=i.closeCommand=o(function(){r(e)}),i.modalVisibility.subscribe(function(t){t?(i.viewModelDom.show(),i.storeAndSetKeyScope(),E.popupVisibilityNames.push(i.viewModelName),i.viewModelDom.css("z-index",3e3+Object(E.popupVisibilityNames)().length+10),i.onShowTrigger&&i.onShowTrigger(!i.onShowTrigger()),Object(F.delegateRun)(i,"onShowWithDelay",[],500)):(Object(F.delegateRun)(i,"onHide"),Object(F.delegateRun)(i,"onHideWithDelay",[],500),i.onHideTrigger&&i.onHideTrigger(!i.onHideTrigger()),i.restoreKeyScope(),s("view-model-on-hide",e),E.popupVisibilityNames.remove(i.viewModelName),i.viewModelDom.css("z-index",2e3),b.a.delay(function(){return i.viewModelDom.hide()},300))})),s("view-model-pre-build",e,n),v.a.applyBindingAccessorsToNode(n[0],{translatorInit:!0,template:function(){return{name:i.viewModelTemplateID}}},i),Object(F.delegateRun)(i,"onBuild",[n]),i&&_.Popup===a&&i.registerPopupKeyDown(),s("view-model-post-build",e,n)):Object(F.log)("Cannot find view model position: "+a)}return e?e.__vm:null}function l(e,t){var n=null,o=!1,a=null;""===Object(F.pString)(e)&&(e=N),""!==e&&((n=i(e))||(n=i(N))&&(t=e+"/"+t,e=N),n&&n.__started&&(o=j&&n===j,n.__builded||(n.__builded=!0,Object(F.isNonEmptyArray)(n.viewModels())&&b.a.each(n.viewModels(),function(e){c(e,n)}),Object(F.delegateRun)(n,"onBuild")),b.a.defer(function(){j&&!o&&(Object(F.delegateRun)(j,"onHide"),Object(F.delegateRun)(j,"onHideWithDelay",[],500),j.onHideTrigger&&j.onHideTrigger(!j.onHideTrigger()),Object(F.isNonEmptyArray)(j.viewModels())&&b.a.each(j.viewModels(),function(e){e.__vm&&e.__dom&&_.Popup!==e.__vm.viewModelPosition&&(e.__dom.hide(),e.__vm.viewModelVisibility(!1),Object(F.delegateRun)(e.__vm,"onHide"),Object(F.delegateRun)(e.__vm,"onHideWithDelay",[],500),e.__vm.onHideTrigger&&e.__vm.onHideTrigger(!e.__vm.onHideTrigger()))})),(j=n)&&!o&&(Object(F.delegateRun)(j,"onShow"),j.onShowTrigger&&j.onShowTrigger(!j.onShowTrigger()),Object(A.f)("screen-on-show",[j.screenName(),j]),Object(F.isNonEmptyArray)(j.viewModels())&&b.a.each(j.viewModels(),function(e){e.__vm&&e.__dom&&_.Popup!==e.__vm.viewModelPosition&&(Object(F.delegateRun)(e.__vm,"onBeforeShow"),e.__dom.show(),e.__vm.viewModelVisibility(!0),Object(F.delegateRun)(e.__vm,"onShow"),e.__vm.onShowTrigger&&e.__vm.onShowTrigger(!e.__vm.onShowTrigger()),Object(F.delegateRun)(e.__vm,"onShowWithDelay",[],200),s("view-model-on-show",e))})),(a=n&&n.__cross?n.__cross():null)&&a.parse(t)})))}function u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e="/"===(e="#"===e.substr(0,1)?e.substr(1):e).substr(0,1)?e.substr(1):e;var o=n?"replaceHash":"setHash";t?(O.a.changed.active=!1,O.a[o](e),O.a.changed.active=!0):(O.a.changed.active=!0,O.a[o](e),O.a.setHash(e))}function d(e){var t=e.name,n=e.type,o=e.templateID;return function(e){e&&(t&&(Object(F.isArray)(t)?e.__names=t:e.__names=[t],e.__name=e.__names[0]),n&&(e.__type=n),o&&(e.__templateID=o))}}function p(e){var t=e.name,n=e.templateID;return d({name:t,type:_.Popup,templateID:n})}function h(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t,n,o){if(!n||!n.match(/Command$/))throw new Error('name "'+n+'" should end with Command suffix');var i=o.value||o.initializer(),a=Object(F.isFunc)(e)?e:function(){return!!e};return o.value=function(){if(a.call(this,this)){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(this,t)}return!1},o.value.__realCanExecute=a,o.value.isCommand=!0,o}}function f(e){return b.a.throttle(function(t,n){var o=n&&"up"===n.shortcut;if(t&&e.length){var i=e.index(e.filter(".selected"));o&&0<i?i-=1:!o&&i<e.length-1&&(i+=1);var a=e.eq(i).attr("href");a&&u(a,!1,!0)}},C.Magics.Time200ms)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ViewType",function(){return _}),t.hideLoading=function(){y()("#rl-content").addClass("rl-content-show"),y()("#rl-loading").hide().remove()},t.createCommand=o,t.addSettingsViewModel=function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.__rlSettingsData={Label:n,Template:t,Route:o,IsDefault:!!i},E.VIEW_MODELS.settings.push(e)},t.removeSettingsViewModel=function(e){E.VIEW_MODELS["settings-removed"].push(e)},t.disableSettingsViewModel=function(e){E.VIEW_MODELS["settings-disabled"].push(e)},t.routeOff=function(){O.a.changed.active=!1},t.routeOn=function(){O.a.changed.active=!0},t.screen=i,t.getScreenPopup=a,t.hideScreenPopup=r,t.vmRunHook=s,t.buildViewModel=c,t.showScreenPopup=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=a(e);n&&(c(n),n.__vm&&n.__dom&&(Object(F.delegateRun)(n.__vm,"onBeforeShow",t||[]),n.__vm.modalVisibility(!0),Object(F.delegateRun)(n.__vm,"onShow",t||[]),s("view-model-on-show",n,t||[])))},t.warmUpScreenPopup=function(e){var t=a(e);t&&(c(t),t.__vm&&t.__dom&&Object(F.delegateRun)(t.__vm,"onWarmUp"))},t.isPopupVisible=function(e){var t=a(e);return!(!t||!t.__vm)&&t.__vm.modalVisibility()},t.screenOnRoute=l,t.startScreens=function(e){b.a.each(e,function(e){if(e){var t=new e,n=t?t.screenName():"";t&&""!==n&&(""===N&&(N=n),R[n]=t)}}),b.a.each(R,function(e){e&&!e.__started&&e.__start&&(e.__started=!0,e.__start(),Object(A.f)("screen-pre-start",[e.screenName(),e]),Object(F.delegateRun)(e,"onStart"),Object(A.f)("screen-post-start",[e.screenName(),e]))});var t=T.a.create();t.addRoute(/^([a-zA-Z0-9\-]*)\/?(.*)$/,l),O.a.initialized.add(t.parse,t),O.a.changed.add(t.parse,t),O.a.init(),b.a.delay(function(){return E.$html.removeClass("rl-started-trigger").addClass("rl-started")},100),b.a.delay(function(){return E.$html.addClass("rl-started-delay")},200)},t.setHash=u,n.d(t,"commandDecorator",function(){return h}),n.d(t,"command",function(){return h}),n.d(t,"viewDecorator",function(){return d}),n.d(t,"view",function(){return d}),n.d(t,"viewModel",function(){return d}),n.d(t,"popupDecorator",function(){return p}),n.d(t,"popup",function(){return p}),n.d(t,"settingsMenuKeysHendler",function(){return f});var m=n(6),b=n.n(m),g=n(12),y=n.n(g),v=n(2),S=n(110),O=n.n(S),w=n(86),T=n.n(w),C=n(3),A=n(33),E=n(7),F=n(1),j=null,N="",R={},_={Popup:"Popups",Left:"Left",Right:"Right",Center:"Center"}},function(e,t,n){"use strict";function o(e){return Object(r.isUnd)(s[e])?null:s[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.settingsGet=o,t.settingsSet=function(e,t){s[e]=t},t.appSettingsGet=function(e){return Object(r.isUnd)(c[e])?null:c[e]},t.capa=function(e){var t=o("Capa");return Object(r.isArray)(t)&&Object(r.isNormal)(e)&&-1<Object(r.inArray)(e,t)};var i=n(11),a=n.n(i),r=n(1),s=a.a.__rlah_data()||null,c=(s=Object(r.isNormal)(s)?s:{}).System||null;c=Object(r.isNormal)(c)?c:{}},function(e,t){e.exports=window},function(e,t){e.exports=window.jQuery},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),i=n.n(o),a=n(2),r=n(1),s=n(3),c=n(7),l=function(){function e(){i()(this,e),this.bDisabeCloseOnEsc=!1,this.sDefaultKeyScope=s.KeyState.None,this.sCurrentKeyScope=s.KeyState.None,this.viewModelVisibility=a.a.observable(!1),this.modalVisibility=a.a.observable(!1).extend({rateLimit:0}),this.viewModelName="",this.viewModelNames=[],this.viewModelDom=null}return e.prototype.storeAndSetKeyScope=function(){this.sCurrentKeyScope=Object(c.keyScope)(),Object(c.keyScope)(this.sDefaultKeyScope)},e.prototype.restoreKeyScope=function(){Object(c.keyScope)(this.sCurrentKeyScope)},e.prototype.registerPopupKeyDown=function(){var e=this;c.$win.on("keydown",function(t){if(t&&e.modalVisibility&&e.modalVisibility()){if(!e.bDisabeCloseOnEsc&&s.EventKeyCode.Esc===t.keyCode)return Object(r.delegateRun)(e,"cancelCommand"),!1;if(s.EventKeyCode.Backspace===t.keyCode&&!Object(r.inFocus)())return!1}return!0})},e.prototype.cancelCommand=function(){},e.prototype.closeCommand=function(){},e}()},function(e,t,n){"use strict";function o(e,t,n){return n=Object(c.isUnd)(n)?S:n,p+"/Raw/"+h+"/"+n+"/"+e+"/"+h+"/"+t}function i(e){return p+"/"+e+"/"+h+"/"+S+"/"}function a(e){return g+e}t.v=function(){S=l.settingsGet("AuthAccountHash")||"0"},t.E=function(){return h},t.w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d+Object(c.pString)(e)},t.x=function(){return y?u:p+v},t.y=function(){return u},t.c=function(e,t){return o("Download",e,t)},t.e=function(e,t){return o("View",e,t)},t.g=function(e,t){return o("ViewThumbnail",e,t)},t.f=function(e,t){return o("ViewAsPlain",e,t)},t.d=function(e,t){return o("FramedView",e,t)},t.G=function(){return i("Upload")},t.I=function(){return i("UploadContacts")},t.H=function(){return i("UploadBackground")},t.b=function(){return i("Append")},t.i=function(e){return i("Change")+Object(c.encodeURIComponent)(e)+"/"},t.a=function(e){return i("Ajax")+e},t.q=function(e){return p+"/Raw/"+h+"/"+S+"/ViewAsPlain/"+h+"/"+e},t.p=function(e){return p+"/Raw/"+h+"/"+S+"/Download/"+h+"/"+e},t.h=function(e){return p+"/Raw/0/Avatar/"+Object(c.encodeURIComponent)(e)+"/"},t.J=function(e){return p+"/Raw/"+h+"/"+S+"/UserBackground/"+h+"/"+e},t.u=function(){return p+"/Info"},t.n=function(e,t){return p+"/Lang/0/"+(t?"Admin":"App")+"/"+s.a.encodeURI(e)+"/"+f+"/"},t.l=function(){return p+"/Raw/"+h+"/"+S+"/ContactsVcf/"},t.k=function(){return p+"/Raw/"+h+"/"+S+"/ContactsCsv/"},t.B=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p+"SocialGoogle"+(""!==S?"/"+h+"/"+S+"/":"")+(e?"&xauth=1":"")},t.C=function(){return p+"SocialTwitter"+(""!==S?"/"+h+"/"+S+"/":"")},t.A=function(){return p+"SocialFacebook"+(""!==S?"/"+h+"/"+S+"/":"")},t.j=function(){return a("css/images/empty-contact.png")},t.D=function(e){return a("sounds/"+e)},t.r=function(){return a("css/images/icom-message-notification.png")},t.s=function(){return a("js/min/openpgp.min.js")},t.t=function(){return a("js/min/openpgp.worker.min.js")},t.F=function(e){var t=b;return"@custom"===e.substr(-7)&&(e=Object(c.trim)(e.substring(0,e.length-7)),t=m),t+"themes/"+s.a.encodeURI(e)+"/images/preview.png"},t.m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"INBOX";return d+"mailbox/"+e},t.z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d+"settings"+(e?"/"+e:"")},t.o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t=Object(c.isNormal)(t)?Object(c.pInt)(t):1,n=Object(c.pString)(n);var i=d+"mailbox/";if(""!==e){var a=Object(c.pInt)(o);i+=s.a.encodeURI(e)+(0<a?"~"+a:"")}return 1<t&&(i=i.replace(/[\/]+$/,""),i+="/p"+t),""!==n&&(i=i.replace(/[\/]+$/,""),i+="/"+s.a.encodeURI(n)),i};var r=n(11),s=n.n(r),c=n(1),l=n(10),u="./",d="#/",p="./?",h="&q[]=",f=l.appSettingsGet("version"),m=l.appSettingsGet("webPath")||"",b=l.appSettingsGet("webVersionPath")||"rainloop/v/"+f+"/",g=b+"static/",y=!!l.appSettingsGet("adminHostUse"),v=l.appSettingsGet("adminPath")||"admin",S=l.settingsGet("AuthAccountHash")||"0"},function(e,t,n){e.exports={default:n(79),__esModule:!0}},function(e,t,n){"use strict";t.a=function(){return n(173).default}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(1),p=n(20),h=n(27),f=n(14),m=n(217),b=n(10),g=n(34),y=n(41),v=n(16),S=function(e){function t(){i()(this,t);var n=r()(this,e.call(this));return n.oRequests={},n}return c()(t,e),t.prototype.folders=function(e){this.defaultRequest(e,"Folders",{SentFolder:b.settingsGet("SentFolder"),DraftFolder:b.settingsGet("DraftFolder"),SpamFolder:b.settingsGet("SpamFolder"),TrashFolder:b.settingsGet("TrashFolder"),ArchiveFolder:b.settingsGet("ArchiveFolder")},null,"",["Folders"])},t.prototype.login=function(e,t,n,o,i,a,r,s){this.defaultRequest(e,"Login",{Email:t,Login:n,Password:o,Language:a||"",AdditionalCode:r||"",AdditionalCodeSignMe:s?"1":"0",SignMe:i?"1":"0"})},t.prototype.getTwoFactor=function(e){this.defaultRequest(e,"GetTwoFactorInfo")},t.prototype.createTwoFactor=function(e){this.defaultRequest(e,"CreateTwoFactorSecret")},t.prototype.clearTwoFactor=function(e){this.defaultRequest(e,"ClearTwoFactorInfo")},t.prototype.showTwoFactorSecret=function(e){this.defaultRequest(e,"ShowTwoFactorSecret")},t.prototype.testTwoFactor=function(e,t){this.defaultRequest(e,"TestTwoFactorInfo",{Code:t})},t.prototype.enableTwoFactor=function(e,t){this.defaultRequest(e,"EnableTwoFactor",{Enable:t?"1":"0"})},t.prototype.clearTwoFactorInfo=function(e){this.defaultRequest(e,"ClearTwoFactorInfo")},t.prototype.contactsSync=function(e){this.defaultRequest(e,"ContactsSync",null,p.d)},t.prototype.saveContactsSyncData=function(e,t,n,o,i){this.defaultRequest(e,"SaveContactsSyncData",{Enable:t?"1":"0",Url:n,User:o,Password:i})},t.prototype.accountSetup=function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.defaultRequest(e,"AccountSetup",{Email:t,Password:n,New:o?"1":"0"})},t.prototype.accountDelete=function(e,t){this.defaultRequest(e,"AccountDelete",{EmailToDelete:t})},t.prototype.accountsAndIdentitiesSortOrder=function(e,t,n){this.defaultRequest(e,"AccountsAndIdentitiesSortOrder",{Accounts:t,Identities:n})},t.prototype.identityUpdate=function(e,t,n,o,i,a,r,s){this.defaultRequest(e,"IdentityUpdate",{Id:t,Email:n,Name:o,ReplyTo:i,Bcc:a,Signature:r,SignatureInsertBefore:s?"1":"0"})},t.prototype.identityDelete=function(e,t){this.defaultRequest(e,"IdentityDelete",{IdToDelete:t})},t.prototype.accountsAndIdentities=function(e){this.defaultRequest(e,"AccountsAndIdentities")},t.prototype.accountsCounts=function(e){this.defaultRequest(e,"AccountsCounts")},t.prototype.filtersSave=function(e,t,n,o){this.defaultRequest(e,"FiltersSave",{Raw:n,RawIsActive:Object(d.boolToAjax)(o),Filters:u.a.map(t,function(e){return e.toJson()})})},t.prototype.filtersGet=function(e){this.defaultRequest(e,"Filters",{})},t.prototype.templates=function(e){this.defaultRequest(e,"Templates",{})},t.prototype.templateGetById=function(e,t){this.defaultRequest(e,"TemplateGetByID",{ID:t})},t.prototype.templateDelete=function(e,t){this.defaultRequest(e,"TemplateDelete",{IdToDelete:t})},t.prototype.templateSetup=function(e,t,n,o){this.defaultRequest(e,"TemplateSetup",{ID:t,Name:n,Body:o})},t.prototype.messageList=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",r=arguments.length>6&&void 0!==arguments[6]&&arguments[6];t=Object(d.pString)(t);var s=Object(h.g)(t),c=g.a.threadsAllowed()&&y.a.useThreads(),l=Object(h.h)()===t?Object(h.i)(t):"";return""===s||""!==i&&-1!==i.indexOf("is:")?this.defaultRequest(e,"MessageList",{Folder:t,Offset:n,Limit:o,Search:i,UidNext:l,UseThreads:c?"1":"0",ThreadUid:c?a:""},""===i?p.g:p.m,"",r?[]:["MessageList"]):this.defaultRequest(e,"MessageList",{},""===i?p.g:p.m,"MessageList/"+Object(f.E)()+"/"+m.a([t,n,o,i,g.a.projectHash(),s,l,c?"1":"0",c?a:""].join(String.fromCharCode(0))),r?[]:["MessageList"])},t.prototype.messageUploadAttachments=function(e,t){this.defaultRequest(e,"MessageUploadAttachments",{Attachments:t},999e3)},t.prototype.message=function(e,t,n){return t=Object(d.pString)(t),n=Object(d.pInt)(n),!!(Object(h.e)(t)&&0<n)&&(this.defaultRequest(e,"Message",{},null,"Message/"+Object(f.E)()+"/"+m.a([t,n,g.a.projectHash(),g.a.threadsAllowed()&&y.a.useThreads()?"1":"0"].join(String.fromCharCode(0))),["Message"]),!0)},t.prototype.composeUploadExternals=function(e,t){this.defaultRequest(e,"ComposeUploadExternals",{Externals:t},999e3)},t.prototype.composeUploadDrive=function(e,t,n){this.defaultRequest(e,"ComposeUploadDrive",{AccessToken:n,Url:t},999e3)},t.prototype.folderInformation=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=!0,i=[];Object(d.isArray)(n)&&0<n.length&&(o=!1,u.a.each(n,function(e){Object(h.j)(e.folderFullNameRaw,e.uid)||i.push(e.uid),0<e.threads().length&&u.a.each(e.threads(),function(t){Object(h.j)(e.folderFullNameRaw,t)||i.push(t)})}),0<i.length&&(o=!0)),o?this.defaultRequest(e,"FolderInformation",{Folder:t,FlagsUids:Object(d.isArray)(i)?i.join(","):"",UidNext:Object(h.h)()===t?Object(h.i)(t):""}):y.a.useThreads()&&Object(v.a)().reloadFlagsCurrentMessageListAndMessageFromCache()},t.prototype.folderInformationMultiply=function(e,t){this.defaultRequest(e,"FolderInformationMultiply",{Folders:t})},t.prototype.logout=function(e){this.defaultRequest(e,"Logout")},t.prototype.messageSetFlagged=function(e,t,n,o){this.defaultRequest(e,"MessageSetFlagged",{Folder:t,Uids:n.join(","),SetAction:o?"1":"0"})},t.prototype.messageSetSeen=function(e,t,n,o){this.defaultRequest(e,"MessageSetSeen",{Folder:t,Uids:n.join(","),SetAction:o?"1":"0"})},t.prototype.messageSetSeenToAll=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.defaultRequest(e,"MessageSetSeenToAll",{Folder:t,SetAction:n?"1":"0",ThreadUids:o?o.join(","):""})},t.prototype.saveMessage=function(e,t,n,o,i,a,r,s,c,l,u,d,h,f,m,b,g){this.defaultRequest(e,"SaveMessage",{IdentityID:t,MessageFolder:n,MessageUid:o,DraftFolder:i,To:a,Cc:r,Bcc:s,ReplyTo:c,Subject:l,TextIsHtml:u?"1":"0",Text:d,DraftInfo:f,InReplyTo:m,References:b,MarkAsImportant:g?"1":"0",Attachments:h},p.l)},t.prototype.sendReadReceiptMessage=function(e,t,n,o,i,a){this.defaultRequest(e,"SendReadReceiptMessage",{MessageFolder:t,MessageUid:n,ReadReceipt:o,Subject:i,Text:a})},t.prototype.sendMessage=function(e,t,n,o,i,a,r,s,c,l,u,d,h,f,m,b,g,y,v){this.defaultRequest(e,"SendMessage",{IdentityID:t,MessageFolder:n,MessageUid:o,SentFolder:i,To:a,Cc:r,Bcc:s,ReplyTo:c,Subject:l,TextIsHtml:u?"1":"0",Text:d,DraftInfo:f,InReplyTo:m,References:b,Dsn:g?"1":"0",ReadReceiptRequest:y?"1":"0",MarkAsImportant:v?"1":"0",Attachments:h},p.n)},t.prototype.saveSystemFolders=function(e,t){this.defaultRequest(e,"SystemFoldersUpdate",t)},t.prototype.saveSettings=function(e,t){this.defaultRequest(e,"SettingsUpdate",t)},t.prototype.saveSettingsHelper=function(e,t,n){var o=this;return function(i){var a;o.saveSettings(n||null,(a={},a[e]=t?t(i):i,a))}},t.prototype.changePassword=function(e,t,n){this.defaultRequest(e,"ChangePassword",{PrevPassword:t,NewPassword:n})},t.prototype.folderClear=function(e,t){this.defaultRequest(e,"FolderClear",{Folder:t})},t.prototype.folderSetSubscribe=function(e,t,n){this.defaultRequest(e,"FolderSubscribe",{Folder:t,Subscribe:n?"1":"0"})},t.prototype.folderSetCheckable=function(e,t,n){this.defaultRequest(e,"FolderCheckable",{Folder:t,Checkable:n?"1":"0"})},t.prototype.messagesMove=function(e,t,n,o,i,a){this.defaultRequest(e,"MessageMove",{FromFolder:t,ToFolder:n,Uids:o.join(","),MarkAsRead:a?"1":"0",Learning:i||""},null,"",["MessageList"])},t.prototype.messagesCopy=function(e,t,n,o){this.defaultRequest(e,"MessageCopy",{FromFolder:t,ToFolder:n,Uids:o.join(",")})},t.prototype.messagesDelete=function(e,t,n){this.defaultRequest(e,"MessageDelete",{Folder:t,Uids:n.join(",")},null,"",["MessageList"])},t.prototype.appDelayStart=function(e){this.defaultRequest(e,"AppDelayStart")},t.prototype.quota=function(e){this.defaultRequest(e,"Quota")},t.prototype.contacts=function(e,t,n,o){this.defaultRequest(e,"Contacts",{Offset:t,Limit:n,Search:o},null,"",["Contacts"])},t.prototype.contactSave=function(e,t,n,o){this.defaultRequest(e,"ContactSave",{RequestUid:t,Uid:Object(d.trim)(n),Properties:o})},t.prototype.contactsDelete=function(e,t){this.defaultRequest(e,"ContactsDelete",{Uids:t.join(",")})},t.prototype.suggestions=function(e,t,n){this.defaultRequest(e,"Suggestions",{Query:t,Page:n},null,"",["Suggestions"])},t.prototype.clearUserBackground=function(e){this.defaultRequest(e,"ClearUserBackground")},t.prototype.facebookUser=function(e){this.defaultRequest(e,"SocialFacebookUserInformation")},t.prototype.facebookDisconnect=function(e){this.defaultRequest(e,"SocialFacebookDisconnect")},t.prototype.twitterUser=function(e){this.defaultRequest(e,"SocialTwitterUserInformation")},t.prototype.twitterDisconnect=function(e){this.defaultRequest(e,"SocialTwitterDisconnect")},t.prototype.googleUser=function(e){this.defaultRequest(e,"SocialGoogleUserInformation")},t.prototype.googleDisconnect=function(e){this.defaultRequest(e,"SocialGoogleDisconnect")},t.prototype.socialUsers=function(e){this.defaultRequest(e,"SocialUsers")},t}(n(148).a);t.a=new S},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d});var o=n(0),i=n.n(o),a=n(12),r=n.n(a),s=n(2),c=n(1),l=n(8),u=function(){function e(){i()(this,e),this.disposable=[]}return e.prototype.dispose=function(){this.disposable.forEach(function(e){e&&e.dispose&&e.dispose()})},e}(),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{template:t?{element:t}:"<b></b>",viewModel:{createViewModel:function(t,n){return t=t||{},t.element=null,n&&n.element&&(t.component=n,t.element=r()(n.element),Object(l.i18nToNodes)(t.element),!Object(c.isUnd)(t.inline)&&s.a.unwrap(t.inline)&&t.element.css("display","inline-block")),new e(t)}}}}},function(e,t){e.exports=window.key},function(e,t,n){"use strict";n.d(t,"i",function(){return o}),n.d(t,"j",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"g",function(){return r}),n.d(t,"m",function(){return s}),n.d(t,"n",function(){return c}),n.d(t,"l",function(){return l}),n.d(t,"d",function(){return u}),n.d(t,"r",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"h",function(){return h}),n.d(t,"p",function(){return f}),n.d(t,"o",function(){return m}),n.d(t,"k",function(){return b}),n.d(t,"a",function(){return g}),n.d(t,"q",function(){return y}),n.d(t,"f",function(){return v}),n.d(t,"e",function(){return S});var o=20,i=[10,20,30,50,100],a=50,r=3e4,s=3e5,c=3e5,l=2e5,u=2e5,d="__UNUSE__",p="rlcsc",h=143,f=25,m=4190,b=15,g=7,y=10,v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAHHklEQVRoQ7VZW08bVxCeXRuwIbTGXIwNtBBaqjwgVUiR8lDlbza9qe1DpVZ9aNQ/0KpPeaJK07SpcuEeCEmUAObm21bfrL9lONjexSYrWfbunj37zXdmvpkz9oIgCKTD0Wg0xPd94TDP83Q0zvWa50vzklSrdanVanqf4/D84GBGr+F+Op3S8fqoJxLOdnZgTvsO/nYhenHA+UC7CWF1uXwkb9++ldPTUwVerVbVqFQqpR8YPjQ0JCMjI5LNDijoRgP3PQVu5+5Eor2XGLg7IV4GkIdHJ/LmzRs5ODiIwNbrdR0O0GCcq4Xz4eFhmZyclP7+tDQaIik/BG5XKQn4SwG3zJTLZXn9+rUclI8UHD5YVoDDN8bSzXhONwL48fFxGR4eilzFZT1uFRIB5yT8BqCdnR3Z3d0VP9Un6XRawYJpggVrZBv38ME4XKtUKnLt2jUplUoy1PR/l3U7T6sVSAQcgMAkj8PDQ9ne3pajoyMRL7zeKsYZWHgWYDGmv78/mmdwcFA+mJlSgziHDWrERrsjEXDXegTi1tZW+DLxI2bxIrqFNYTXyDyCFweMAHCwb8e4RnTNuOsqe3t7sra21pTD0Kct666E8XlcZyzw9/RUUXK5nK5oUinUQI6TQ3cynO/v78vq6qrKXCNwlTiJJpyNGc3nZHp6uqV2dwrQWOCtZBDAV1ZWwsQk7f0wiQn5kffbAu/0/KWBYzIC1+XukfGx0RGZmppKlC2tIV0Bh4aDcZW7HhkfH8urLLZL7T2pihvlkMNnz56FiadHxicL41IsFpN41bkxsYxbRdFo9jwB8KdPn14J8KnSpBQKhQs63nPmbCVRcBUAR2Lq1VVmpksyMTFxAXjcEsQybiegESionjx5osCZOeNe1O4+EhCAX7bQSgQcxRHTMgAgcz5+/Dis/hL4uHU3/B4YGNASGHIKxuEql0k+l05AeIAF1vPnz5VxFFmdDlaJrMtZITJeSsXCOTlMunKxjLtMYOKNjQ158eJFuAuKkUOb5sEwgff19SkJUBVkThZUbnXZrtCKBQ6gbnWIkjZpyne3ejAWoGnA7Icz6irvBLgbOMicCM6TkxPx/LAkbXfgWcsazuE2kFRsKD5Z+CiqDumKncpZvieWcS6dDVD8xiYCNflpJdwcdwJOf9airLmVQ7DPzMxIYWLsXGXoVqLt5k0M3K3JUVPDZdbWNzsCp48TPFdvdnZWUz32nDha7bJ63kgAJPzSdRks9/Kf9xMJAQ1gq2NpaUmy2Yz4zar4nQC3xb99AQwCcGzLAAwuhG8YiWvcOKts+r4GOe5nMhm5efOm9lUA3E3vSZJRrKvE0fnPv//Jy5cvo5cTHIPQbSjhOoqq69evS19f6lxDKK4+sVhigZPtKJqbrQeqxd5+WR4+fKgqgT0k2XX3nhiPgETWXFhYkFzuPZ2yVq1GTSOXpE47/VjgNnD4m4GG7/LhsTx69EiwD4Vr2MwIIxgbAH18fKx1yfz8vEogNvGtWnCuhLZa9UTAreVWFsHy/b/+Vrbdl7E5REMQD2jDoUbByty+/ZnU64GkU2HzyJLhktU1cLv8nARgkYS2d3ajAgwG8qU2oLmDZ92CMaOjo7K4uCiZgbDWaRWgnZhPxLhrMUCvr69riwKZk1LHF7XqrWAO9hJxH6ozNzcnCx/PqztZg9mf6SQMscCtm2C5ke4BGMlHWTUp36036AJajDVrFMzBrhhWslQsSrFYiOqVpMriNYIgqFRq2j3FAb/zffT6zuxFXxsNzs3NTXn16lW4gYiW96w1FyedF+83xG/2FNGCRpU4NjamMsn+OZ9xE5RXqdaDdPpib6RWCzuwKF9RxqI2AVNQBwQYJoK0wdBejnqtEikP3pfP51XjUTESl12FqJEKxsEorARYDD44ONTeID7YpsEnrRvQfWAI2e8WfDaTUSIwJ0iBCmFOtOUAHvVMPp/TPwvYFVYFIuP8l+DBgwdaa2Miqwa0GgYwfeMltovbDfh6c1vIgMYcliSsKv4IWFr6VDHxvldvBAH+1sA+cnl5WYOPmmr9ir+1l9I0Cgz0yjhXjfJJ0JROnmezWbl165ayr/5fqwcBNr7IfhjMqKcvESSM4eRcCasQ3bDNObmKPLdGUGpZsN24cUNLBm9zazu4d++e6qpNBFaTuUS26U5dpuR1CxyA7J9ddrMRqlz4pwLLYawymPd++/2PADt2ugcGwq9gCCdhQ96C6xWwa6j1ceuq+I0EhW0i8MAIVJfeL3d/DVD8EKi12P6/2S2jV/EccVB54O/ejz/9HGCpoBBMta5rXMXLu53D1XAwjhXwvvv+h4BAXVe4bOu3O3ChxF08LiZFG3fel199G9CH3fLyqv24NcB44MRhpdK788U3CpyKwsCw590xmfSpzsBt0Fqc3ud3vtZigxWcVZCklVpSiN0w3q5E/h9TGMIUuA3+EQAAAABJRU5ErkJggg==",S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(30)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var o=n(81),i=n(49);e.exports=function(e){return o(i(e))}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var o=n(35),i=n(55),a=n(46),r=Object.defineProperty;t.f=n(23)?Object.defineProperty:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return r(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";function o(e,t){return e+"#"+t}function i(e,t){p[e]=t}function a(e,t){return b[e]&&b[e][t]?b[e][t]:null}function r(e,t,n){b[e]||(b[e]={}),b[e][t]=n}t.k=function(e,t){e=Object(u.trim)(e),t(S&&""!==e?d.h(e):"",e)},t.b=function(e,t){v[o(e,t)]=!0},t.m=function(e,t){return!0===v[o(e,t)]},t.a=function(e,t){g[o(e,t)]=!0},t.l=function(e,t){return!!g[o(e,t)]&&(g[o(e,t)]=null,!0)},t.d=function(){g={}},t.h=function(){return""===y?"INBOX":y},t.f=function(e){return""!==e&&h[e]?h[e]:""},t.p=function(e,t){h[e]=t,"INBOX"!==t&&""!==y||(y=t)},t.g=function(e){return""!==e&&f[e]?f[e]:""},t.q=function(e,t){""!==e&&(f[e]=t)},t.i=function(e){return""!==e&&m[e]?m[e]:""},t.s=function(e,t){m[e]=t},t.e=function(e){return""!==e&&p[e]?p[e]:null},t.r=i,t.o=function(e){i(e,null)},t.j=a,t.t=r,t.c=function(e){b[e]={}},t.n=function(e){if(e){var t=e.uid,n=a(e.folderFullNameRaw,t);if(n&&0<n.length&&(e.flagged(!!n[1]),e.isSimpleMessage||(e.unseen(!!n[0]),e.answered(!!n[2]),e.forwarded(!!n[3]),e.isReadReceipt(!!n[4]),e.deletedMark(!!n[5]))),0<e.threads().length){var o=c.a.find(e.threads(),function(n){if(t!==n){var o=a(e.folderFullNameRaw,n);return o&&0<o.length&&!!o[0]}return!1}),i=c.a.find(e.threads(),function(n){if(t!==n){var o=a(e.folderFullNameRaw,n);return o&&0<o.length&&!!o[1]}return!1});e.hasUnseenSubMessage(o&&0<Object(u.pInt)(o)),e.hasFlaggedSubMessage(i&&0<Object(u.pInt)(i))}}},t.u=function(e){e&&r(e.folderFullNameRaw,e.uid,[e.unseen(),e.flagged(),e.answered(),e.forwarded(),e.isReadReceipt(),e.deletedMark()])},t.v=function(e,t,n){Object(u.isArray)(n)&&0<n.length&&r(e,t,n)},t.w=function(e,t,n){var o=0,i=a(e,t);if(Object(u.isArray)(i)&&0<i.length){switch(i[0]&&(o=1),n){case l.MessageSetAction.SetSeen:i[0]=!1;break;case l.MessageSetAction.UnsetSeen:i[0]=!0;break;case l.MessageSetAction.SetFlag:i[1]=!0;break;case l.MessageSetAction.UnsetFlag:i[1]=!1}r(e,t,i)}return o};var s=n(6),c=n.n(s),l=n(3),u=n(1),d=n(14),p={},h={},f={},m={},b={},g={},y="",v={},S=n(10).capa(l.Capa.Gravatar)},function(e,t,n){var o=n(26),i=n(39);e.exports=n(23)?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},,function(e,t,n){var o=n(21),i=n(22),a=n(58),r=n(28),s=function(e,t,n){var c,l,u,d=e&s.F,p=e&s.G,h=e&s.S,f=e&s.P,m=e&s.B,b=e&s.W,g=p?i:i[t]||(i[t]={}),y=g.prototype,v=p?o:h?o[t]:(o[t]||{}).prototype;p&&(n=t);for(c in n)(l=!d&&v&&void 0!==v[c])&&c in g||(u=l?v[c]:n[c],g[c]=p&&"function"!=typeof v[c]?n[c]:m&&l?a(u,o):b&&v[c]==u?function(e){var t=function(t,n,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,o)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):f&&"function"==typeof u?a(Function.call,u):u,f&&((g.virtual||(g.virtual={}))[c]=u,e&s.R&&y&&!y[c]&&r(y,c,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";t.a=function(e,t){Object(a.isFunc)(t)&&(Object(a.isArray)(c[e])||(c[e]=[]),c[e].push(t))},t.f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(a.isArray)(c[e])&&i.a.each(c[e],function(e){e.apply(void 0,t)})},t.d=function(e){return s.settingsGet(e)},t.e=function(e,t,n,o){r.data.__APP__&&r.data.__APP__.remote().defaultRequest(e,"Plugin"+t,n,o)},t.b=function(e,t,n,o){l.push([e,t,n,o])},t.c=function(e,t,n,o){u.push([e,t,n,o])},t.g=function(e){var t=n(9);i.a.each(e?u:l,function(e){t.addSettingsViewModel(e[0],e[1],e[2],e[3])})},t.h=function(e,t){var n=s.settingsGet("Plugins");return(n=n&&!Object(a.isUnd)(n[e])?n[e]:null)?Object(a.isUnd)(n[t])?null:n[t]:null};var o=n(6),i=n.n(o),a=n(1),r=n(7),s=n(10),c={},l=[],u=[]},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(2),u=n(3),d=n(7),p=n(1),h=n(10),f=function(e){function t(){i()(this,t);var n=r()(this,e.call(this));n.currentAudio=l.a.observable(""),n.focusedState=l.a.observable(u.Focused.None);var o=h.appSettingsGet("mobile");return n.focusedState.subscribe(function(e){switch(e){case u.Focused.MessageList:Object(d.keyScope)(u.KeyState.MessageList),o&&Object(d.leftPanelDisabled)(!0);break;case u.Focused.MessageView:Object(d.keyScope)(u.KeyState.MessageView),o&&Object(d.leftPanelDisabled)(!0);break;case u.Focused.FolderList:Object(d.keyScope)(u.KeyState.FolderList),o&&Object(d.leftPanelDisabled)(!1)}}),n.projectHash=l.a.observable(""),n.threadsAllowed=l.a.observable(!1),n.composeInEdit=l.a.observable(!1),n.contactsAutosave=l.a.observable(!1),n.useLocalProxyForExternalImages=l.a.observable(!1),n.contactsIsAllowed=l.a.observable(!1),n.attachmentsActions=l.a.observableArray([]),n.devEmail="",n.devPassword="",n}return c()(t,e),t.prototype.populate=function(){e.prototype.populate.call(this),this.projectHash(h.settingsGet("ProjectHash")),this.contactsAutosave(!!h.settingsGet("ContactsAutosave")),this.useLocalProxyForExternalImages(!!h.settingsGet("UseLocalProxyForExternalImages")),this.contactsIsAllowed(!!h.settingsGet("ContactsIsAllowed"));var t=h.appSettingsGet("attachmentsActions");this.attachmentsActions(Object(p.isNonEmptyArray)(t)?t:[]),this.devEmail=h.settingsGet("DevEmail"),this.devPassword=h.settingsGet("DevPassword")},t}(n(144).a);t.a=new f},function(e,t,n){var o=n(29);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var o=n(67)("wks"),i=n(52),a=n(21).Symbol,r="function"==typeof a;(e.exports=function(e){return o[e]||(o[e]=r&&a[e]||(r?a:i)("Symbol."+e))}).store=o},function(e,t,n){"use strict";function o(e,t,n){Object(r.isObject)(e)?(n=t||null,t=null,a.a.each(e,function(e,t){o(t,e,n)})):(Object(r.isUnd)(c[e])&&(c[e]=[]),c[e].push([t,n]))}t.b=o,t.a=function(e,t){s.f("rl-pub",[e,t]),Object(r.isUnd)(c[e])||a.a.each(c[e],function(e){e[0]&&e[0].apply(e[1]||null,t||[])})};var i=n(6),a=n.n(i),r=n(1),s=n(33),c={}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(2),r=n(6),s=n.n(r),c=n(10),l=n(3),u=n(20),d=n(1),p=n(27),h=n(40),f=function(){function e(){i()(this,e),this.displaySpecSetting=a.a.observable(!0),this.sentFolder=a.a.observable(""),this.draftFolder=a.a.observable(""),this.spamFolder=a.a.observable(""),this.trashFolder=a.a.observable(""),this.archiveFolder=a.a.observable(""),this.namespace="",this.folderList=a.a.observableArray([]),this.folderList.optimized=a.a.observable(!1),this.folderList.error=a.a.observable(""),this.foldersLoading=a.a.observable(!1),this.foldersCreating=a.a.observable(!1),this.foldersDeleting=a.a.observable(!1),this.foldersRenaming=a.a.observable(!1),this.foldersInboxUnreadCount=a.a.observable(0),this.currentFolder=a.a.observable(null).extend({toggleSubscribeProperty:[this,"selected"]}),this.sieveAllowFileintoInbox=!!Object(c.settingsGet)("SieveAllowFileintoInbox"),this.computers(),this.subscribers()}return e.prototype.computers=function(){var e=this;this.draftFolderNotEnabled=a.a.computed(function(){return""===e.draftFolder()||u.r===e.draftFolder()}),this.foldersListWithSingleInboxRootFolder=a.a.computed(function(){return!s.a.find(e.folderList(),function(e){return e&&!e.isSystemFolder()&&e.visible()})}),this.currentFolderFullNameRaw=a.a.computed(function(){return e.currentFolder()?e.currentFolder().fullNameRaw:""}),this.currentFolderFullName=a.a.computed(function(){return e.currentFolder()?e.currentFolder().fullName:""}),this.currentFolderFullNameHash=a.a.computed(function(){return e.currentFolder()?e.currentFolder().fullNameHash:""}),this.foldersChanging=a.a.computed(function(){var t=e.foldersLoading(),n=e.foldersCreating(),o=e.foldersDeleting(),i=e.foldersRenaming();return t||n||o||i}),this.folderListSystemNames=a.a.computed(function(){var t=[Object(p.h)()],n=e.folderList(),o=e.sentFolder(),i=e.draftFolder(),a=e.spamFolder(),r=e.trashFolder(),s=e.archiveFolder();return Object(d.isArray)(n)&&0<n.length&&(""!==o&&u.r!==o&&t.push(o),""!==i&&u.r!==i&&t.push(i),""!==a&&u.r!==a&&t.push(a),""!==r&&u.r!==r&&t.push(r),""!==s&&u.r!==s&&t.push(s)),t}),this.folderListSystem=a.a.computed(function(){return s.a.compact(s.a.map(e.folderListSystemNames(),function(e){return Object(p.e)(e)}))}),this.folderMenuForMove=a.a.computed(function(){return Object(d.folderListOptionsBuilder)(e.folderListSystem(),e.folderList(),[e.currentFolderFullNameRaw()],null,null,null,null,function(e){return e?e.localName():""})}),this.folderMenuForFilters=a.a.computed(function(){return Object(d.folderListOptionsBuilder)(e.folderListSystem(),e.folderList(),[e.sieveAllowFileintoInbox?"":"INBOX"],[["",""]],null,null,null,function(e){return e?e.localName():""})})},e.prototype.subscribers=function(){var e=function(e){return function(){var t=Object(p.e)(e());t&&t.type(l.FolderType.User)}},t=function(e){return function(t){var n=Object(p.e)(t);n&&n.type(e)}};this.sentFolder.subscribe(e(this.sentFolder),this,"beforeChange"),this.draftFolder.subscribe(e(this.draftFolder),this,"beforeChange"),this.spamFolder.subscribe(e(this.spamFolder),this,"beforeChange"),this.trashFolder.subscribe(e(this.trashFolder),this,"beforeChange"),this.archiveFolder.subscribe(e(this.archiveFolder),this,"beforeChange"),this.sentFolder.subscribe(t(l.FolderType.SentItems),this),this.draftFolder.subscribe(t(l.FolderType.Draft),this),this.spamFolder.subscribe(t(l.FolderType.Spam),this),this.trashFolder.subscribe(t(l.FolderType.Trash),this),this.archiveFolder.subscribe(t(l.FolderType.Archive),this)},e.prototype.getNextFolderNames=function(){var e=[],t=Object(h.momentNowUnix)(),n=t-300,o=[],i=Object(p.h)();return function e(t){s.a.each(t,function(t){t&&i!==t.fullNameRaw&&t.selectable&&t.existen&&n>t.interval&&(t.isSystemFolder()||t.subScribed()&&t.checkable())&&o.push([t.interval,t.fullNameRaw]),t&&0<t.subFolders().length&&e(t.subFolders())})}(this.folderList()),o.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),s.a.find(o,function(n){var o=Object(p.e)(n[1]);return o&&(o.interval=t,e.push(n[1])),5<=e.length}),s.a.uniq(e)},e}();t.a=new f},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";function o(){return v(),g||m()()}function i(){return S(),y||0}function a(e){var t=o();if(e&&t)switch(!0){case 4>=t.diff(e,"hours"):return e.fromNow();case t.format("L")===e.format("L"):return Object(b.i18n)("MESSAGE_LIST/TODAY_AT",{TIME:e.format("LT")});case t.clone().subtract(1,"days").format("L")===e.format("L"):return Object(b.i18n)("MESSAGE_LIST/YESTERDAY_AT",{TIME:e.format("LT")});case t.year()===e.year():return e.format("D MMM.")}return e?e.format("LL"):""}function r(e,t){var n=null,o="",r=i();if(e=0<e?e:0===e?r:0,e=r<e?r:e,(n=0<e?m.a.unix(e):null)&&1970===n.year()&&(n=null),n)switch(t){case"FROMNOW":o=n.fromNow();break;case"SHORT":o=a(n);break;case"FULL":o=n.format("LLL");break;default:o=n.format(t)}return o}function s(e){var t="",n=0,o=h()(e);(n=o.data("moment-time"))&&((t=o.data("moment-format"))&&o.text(r(n,t)),(t=o.data("moment-format-title"))&&o.attr("title",r(n,t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.momentNow=o,t.momentNowUnix=i,t.searchSubtractFormatDateHelper=function(e){return o().clone().subtract(e,"days").format("YYYY.MM.DD")},t.format=r,t.momentToNode=s,t.reload=function(){d.a.defer(function(){h()(".moment",l.a.document).each(function(e,t){s(t)})})};var c=n(11),l=n.n(c),u=n(6),d=n.n(u),p=n(12),h=n.n(p),f=n(75),m=n.n(f),b=n(8),g=null,y=0,v=d.a.debounce(function(){g=m()()},500,!0),S=d.a.debounce(function(){y=m()().unix()},500,!0)},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(2),c=n(20),l=n(3),u=n(7),d=n(1),p=n(37),h=n(10),f=function(){function e(){i()(this,e),this.iAutoLogoutTimer=0,this.layout=s.a.observable(l.Layout.SidePreview).extend({limitedList:[l.Layout.SidePreview,l.Layout.BottomPreview,l.Layout.NoPreview]}),this.editorDefaultType=s.a.observable(l.EditorDefaultType.Html).extend({limitedList:[l.EditorDefaultType.Html,l.EditorDefaultType.Plain,l.EditorDefaultType.HtmlForced,l.EditorDefaultType.PlainForced]}),this.messagesPerPage=s.a.observable(c.i).extend({limitedList:c.j}),this.showImages=s.a.observable(!1),this.useCheckboxesInList=s.a.observable(!0),this.allowDraftAutosave=s.a.observable(!0),this.useThreads=s.a.observable(!1),this.replySameFolder=s.a.observable(!1),this.autoLogout=s.a.observable(l.Magics.Time30mInMin),this.computers(),this.subscribers()}return e.prototype.computers=function(){var e=this;this.usePreviewPane=s.a.computed(function(){return l.Layout.NoPreview!==e.layout()})},e.prototype.subscribers=function(){this.layout.subscribe(function(e){u.$html.toggleClass("rl-no-preview-pane",l.Layout.NoPreview===e),u.$html.toggleClass("rl-side-preview-pane",l.Layout.SidePreview===e),u.$html.toggleClass("rl-bottom-preview-pane",l.Layout.BottomPreview===e),p.a("layout",[e])})},e.prototype.populate=function(){var e=this;this.layout(Object(d.pInt)(h.settingsGet("Layout"))),this.editorDefaultType(h.settingsGet("EditorDefaultType")),this.autoLogout(Object(d.pInt)(h.settingsGet("AutoLogout"))),this.messagesPerPage(h.settingsGet("MPP")),this.showImages(!!h.settingsGet("ShowImages")),this.useCheckboxesInList(!!h.settingsGet("UseCheckboxesInList")),this.allowDraftAutosave(!!h.settingsGet("AllowDraftAutosave")),this.useThreads(!!h.settingsGet("UseThreads")),this.replySameFolder(!!h.settingsGet("ReplySameFolder")),p.b("rl.auto-logout-refresh",function(){r.a.clearTimeout(e.iAutoLogoutTimer),0<e.autoLogout()&&!h.settingsGet("AccountSignMe")&&(e.iAutoLogoutTimer=r.a.setTimeout(function(){p.a("rl.auto-logout")},e.autoLogout()*l.Magics.Time1m))}),p.a("rl.auto-logout-refresh")},e}();t.a=new f},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(0),i=n.n(o),a=n(1),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i()(this,e),this.sModelName="",this.disposables=[],this.sModelName=t||""}return e.prototype.regDisposables=function(e){var t=this;Object(a.isArray)(e)?e.forEach(function(e){t.disposables.push(e)}):e&&this.disposables.push(e)},e.prototype.onDestroy=function(){Object(a.disposeObject)(this)},e}()},function(e,t,n){"use strict";function o(e,t,n,o,i){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ComposePopupView",function(){return oe}),n.d(t,"default",function(){return oe});var i,a,r,s,c,l,u,d,p,h,f=n(15),m=n.n(f),b=n(0),g=n.n(b),y=n(4),v=n.n(y),S=n(5),O=n.n(S),w=n(11),T=n.n(w),C=n(6),A=n.n(C),E=n(12),F=n.n(E),j=n(2),N=n(19),R=n.n(N),_=n(99),I=n.n(_),P=n(3),L=n(1),M=n(20),D=n(7),k=n(14),x=n(8),U=n(40),H=n(27),B=n(85),G=n(34),K=n(41),V=n(98),z=n(47),q=n(38),W=n(53),Y=n(45),$=n(56),J=n(17),X=n(10),Z=n(37),Q=n(233),ee=n(16),te=n(9),ne=n(13),oe=(i=Object(te.popup)({name:"View/Popup/Compose",templateID:"PopupsCompose"}),a=Object(te.command)(function(e){return e.canBeSentOrSaved()}),r=Object(te.command)(function(e){return e.canBeSentOrSaved()}),s=Object(te.command)(function(e){return e.isDraftFolderMessage()}),c=Object(te.command)(function(e){return e.canBeSentOrSaved()}),l=Object(te.command)(function(e){return e.allowContacts}),u=Object(te.command)(function(e){return e.dropboxEnabled()}),d=Object(te.command)(function(e){return e.driveEnabled()}),i((h=function(e){function t(){g()(this,t);var n=v()(this,e.call(this)),o=function(e,t,n,o){if(t&&e&&t[n]()&&(o||e[n]())){var i=t[n](),a=Object(L.trim)(e[n]()).split(/[,]/);a=A.a.filter(a,function(e){return(e=Object(L.trim)(e))&&Object(L.trim)(i)!==e}),o&&a.push(i),e[n](a.join(","))}};return n.oLastMessage=null,n.oEditor=null,n.aDraftInfo=null,n.sInReplyTo="",n.bFromDraft=!1,n.sReferences="",n.sLastFocusedField="to",n.resizerTrigger=A.a.bind(n.resizerTrigger,n),n.allowContacts=!!G.a.contactsIsAllowed(),n.allowFolders=!!X.capa(P.Capa.Folders),n.bSkipNextHide=!1,n.composeInEdit=G.a.composeInEdit,n.editorDefaultType=K.a.editorDefaultType,n.capaOpenPGP=W.a.capaOpenPGP,n.identitiesDropdownTrigger=j.a.observable(!1),n.to=j.a.observable(""),n.to.focused=j.a.observable(!1),n.cc=j.a.observable(""),n.cc.focused=j.a.observable(!1),n.bcc=j.a.observable(""),n.bcc.focused=j.a.observable(!1),n.replyTo=j.a.observable(""),n.replyTo.focused=j.a.observable(!1),j.a.computed(function(){switch(!0){case n.to.focused():n.sLastFocusedField="to";break;case n.cc.focused():n.sLastFocusedField="cc";break;case n.bcc.focused():n.sLastFocusedField="bcc"}}).extend({notify:"always"}),n.subject=j.a.observable(""),n.subject.focused=j.a.observable(!1),n.isHtml=j.a.observable(!1),n.requestDsn=j.a.observable(!1),n.requestReadReceipt=j.a.observable(!1),n.markAsImportant=j.a.observable(!1),n.sendError=j.a.observable(!1),n.sendSuccessButSaveError=j.a.observable(!1),n.savedError=j.a.observable(!1),n.sendButtonSuccess=j.a.computed(function(){return!n.sendError()&&!n.sendSuccessButSaveError()}),n.sendErrorDesc=j.a.observable(""),n.savedErrorDesc=j.a.observable(""),n.sendError.subscribe(function(e){e||n.sendErrorDesc("")}),n.savedError.subscribe(function(e){e||n.savedErrorDesc("")}),n.sendSuccessButSaveError.subscribe(function(e){e||n.savedErrorDesc("")}),n.savedTime=j.a.observable(0),n.savedTimeText=j.a.computed(function(){return 0<n.savedTime()?Object(x.i18n)("COMPOSE/SAVED_TIME",{TIME:Object(U.format)(n.savedTime()-1,"LT")}):""}),n.emptyToError=j.a.observable(!1),n.emptyToErrorTooltip=j.a.computed(function(){return n.emptyToError()?Object(x.i18n)("COMPOSE/EMPTY_TO_ERROR_DESC"):""}),n.attachmentsInProcessError=j.a.observable(!1),n.attachmentsInErrorError=j.a.observable(!1),n.attachmentsErrorTooltip=j.a.computed(function(){var e="";switch(!0){case n.attachmentsInProcessError():e=Object(x.i18n)("COMPOSE/ATTACHMENTS_UPLOAD_ERROR_DESC");break;case n.attachmentsInErrorError():e=Object(x.i18n)("COMPOSE/ATTACHMENTS_ERROR_DESC")}return e}),n.showCc=j.a.observable(!1),n.showBcc=j.a.observable(!1),n.showReplyTo=j.a.observable(!1),n.cc.subscribe(function(e){!1===n.showCc()&&0<e.length&&n.showCc(!0)}),n.bcc.subscribe(function(e){!1===n.showBcc()&&0<e.length&&n.showBcc(!0)}),n.replyTo.subscribe(function(e){!1===n.showReplyTo()&&0<e.length&&n.showReplyTo(!0)}),n.draftFolder=j.a.observable(""),n.draftUid=j.a.observable(""),n.sending=j.a.observable(!1),n.saving=j.a.observable(!1),n.attachments=j.a.observableArray([]),n.attachmentsInProcess=n.attachments.filter(function(e){return e&&!e.complete()}),n.attachmentsInReady=n.attachments.filter(function(e){return e&&e.complete()}),n.attachmentsInError=n.attachments.filter(function(e){return e&&""!==e.error()}),n.attachmentsCount=j.a.computed(function(){return n.attachments().length}),n.attachmentsInErrorCount=j.a.computed(function(){return n.attachmentsInError().length}),n.attachmentsInProcessCount=j.a.computed(function(){return n.attachmentsInProcess().length}),n.isDraftFolderMessage=j.a.computed(function(){return""!==n.draftFolder()&&""!==n.draftUid()}),n.attachmentsPlace=j.a.observable(!1),n.attachments.subscribe(n.resizerTrigger),n.attachmentsPlace.subscribe(n.resizerTrigger),n.attachmentsInErrorCount.subscribe(function(e){0===e&&n.attachmentsInErrorError(!1)}),n.composeUploaderButton=j.a.observable(null),n.composeUploaderDropPlace=j.a.observable(null),n.dragAndDropEnabled=j.a.observable(!1),n.dragAndDropOver=j.a.observable(!1).extend({throttle:1}),n.dragAndDropVisible=j.a.observable(!1).extend({throttle:1}),n.attacheMultipleAllowed=j.a.observable(!1),n.addAttachmentEnabled=j.a.observable(!1),n.composeEditorArea=j.a.observable(null),n.identities=V.a.identities,n.identitiesOptions=j.a.computed(function(){return A.a.map(V.a.identities(),function(e){return{item:e,optValue:e.id(),optText:e.formattedName()}})}),n.currentIdentity=j.a.observable(n.identities()[0]?n.identities()[0]:null),n.currentIdentity.extend({toggleSubscribe:[n,function(e){o(n,e,"bcc"),o(n,e,"replyTo")},function(e){o(n,e,"bcc",!0),o(n,e,"replyTo",!0)}]}),n.currentIdentityView=j.a.computed(function(){var e=n.currentIdentity();return e?e.formattedName():"unknown"}),n.to.subscribe(function(e){n.emptyToError()&&0<e.length&&n.emptyToError(!1)}),n.attachmentsInProcess.subscribe(function(e){n.attachmentsInProcessError()&&Object(L.isArray)(e)&&0===e.length&&n.attachmentsInProcessError(!1)}),n.resizer=j.a.observable(!1).extend({throttle:50}),n.resizer.subscribe(function(){n.oEditor&&n.oEditor.resize()}),n.canBeSentOrSaved=j.a.computed(function(){return!n.sending()&&!n.saving()}),n.sendMessageResponse=A.a.bind(n.sendMessageResponse,n),n.saveMessageResponse=A.a.bind(n.saveMessageResponse,n),Z.b("interval.2m",function(){!n.modalVisibility()||q.a.draftFolderNotEnabled()||!K.a.allowDraftAutosave()||n.isEmptyForm(!1)||n.saving()||n.sending()||n.savedError()||n.saveCommand()}),n.showCc.subscribe(n.resizerTrigger),n.showBcc.subscribe(n.resizerTrigger),n.showReplyTo.subscribe(n.resizerTrigger),n.dropboxEnabled=$.a.dropbox.enabled,n.dropboxApiKey=$.a.dropbox.apiKey,n.driveEnabled=j.a.observable(D.bXMLHttpRequestSupported&&!!X.settingsGet("AllowGoogleSocial")&&!!X.settingsGet("AllowGoogleSocialDrive")&&!!X.settingsGet("GoogleClientID")&&!!X.settingsGet("GoogleApiKey")),n.driveVisible=j.a.observable(!1),n.driveCallback=A.a.bind(n.driveCallback,n),n.onMessageUploadAttachments=A.a.bind(n.onMessageUploadAttachments,n),n.bDisabeCloseOnEsc=!0,n.sDefaultKeyScope=P.KeyState.Compose,n.tryToClosePopup=A.a.debounce(A.a.bind(n.tryToClosePopup,n),P.Magics.Time200ms),n.emailsSource=A.a.bind(n.emailsSource,n),n.autosaveFunction=A.a.bind(n.autosaveFunction,n),n.iTimer=0,n}return O()(t,e),t.prototype.sendCommand=function(){var e=Object(L.trim)(this.to()),t=Object(L.trim)(this.cc()),o=Object(L.trim)(this.bcc()),i=q.a.sentFolder();if(this.attachmentsInProcessError(!1),this.attachmentsInErrorError(!1),this.emptyToError(!1),0<this.attachmentsInProcess().length?(this.attachmentsInProcessError(!0),this.attachmentsPlace(!0)):0<this.attachmentsInError().length&&(this.attachmentsInErrorError(!0),this.attachmentsPlace(!0)),""===e&&""===t&&""===o&&this.emptyToError(!0),!this.emptyToError()&&!this.attachmentsInErrorError()&&!this.attachmentsInProcessError())if(K.a.replySameFolder()&&Object(L.isArray)(this.aDraftInfo)&&3===this.aDraftInfo.length&&Object(L.isNormal)(this.aDraftInfo[2])&&0<this.aDraftInfo[2].length&&(i=this.aDraftInfo[2]),this.allowFolders||(i=M.r),""===i)Object(te.showScreenPopup)(n(100),[P.SetSystemFoldersNotification.Sent]);else{if(this.sendError(!1),this.sending(!0),Object(L.isArray)(this.aDraftInfo)&&3===this.aDraftInfo.length){var a=Object(H.j)(this.aDraftInfo[2],this.aDraftInfo[1]);a&&("forward"===this.aDraftInfo[0]?a[3]=!0:a[2]=!0,Object(H.t)(this.aDraftInfo[2],this.aDraftInfo[1],a),Object(ee.a)().reloadFlagsCurrentMessageListAndMessageFromCache(),Object(H.q)(this.aDraftInfo[2],""))}i=M.r===i?"":i,Object(H.q)(this.draftFolder(),""),Object(H.q)(i,""),J.a.sendMessage(this.sendMessageResponse,this.currentIdentity()?this.currentIdentity().id():"",this.draftFolder(),this.draftUid(),i,e,this.cc(),this.bcc(),this.replyTo(),this.subject(),!!this.oEditor&&this.oEditor.isHtml(),this.oEditor?this.oEditor.getData(!0):"",this.prepearAttachmentsForSendOrSave(),this.aDraftInfo,this.sInReplyTo,this.sReferences,this.requestDsn(),this.requestReadReceipt(),this.markAsImportant())}},t.prototype.saveCommand=function(){return!!this.allowFolders&&(q.a.draftFolderNotEnabled()?Object(te.showScreenPopup)(n(100),[P.SetSystemFoldersNotification.Draft]):(this.savedError(!1),this.saving(!0),this.autosaveStart(),Object(H.q)(q.a.draftFolder(),""),J.a.saveMessage(this.saveMessageResponse,this.currentIdentity()?this.currentIdentity().id():"",this.draftFolder(),this.draftUid(),q.a.draftFolder(),this.to(),this.cc(),this.bcc(),this.replyTo(),this.subject(),!!this.oEditor&&this.oEditor.isHtml(),this.oEditor?this.oEditor.getData(!0):"",this.prepearAttachmentsForSendOrSave(),this.aDraftInfo,this.sInReplyTo,this.sReferences,this.markAsImportant())),!0)},t.prototype.deleteCommand=function(){var e=this,o=n(77);!Object(te.isPopupVisible)(o)&&this.modalVisibility()&&Object(te.showScreenPopup)(o,[Object(x.i18n)("POPUPS_ASK/DESC_WANT_DELETE_MESSAGES"),function(){e.modalVisibility()&&(Object(ee.a)().deleteMessagesFromFolderWithoutCheck(e.draftFolder(),[e.draftUid()]),Object(te.hideScreenPopup)(t))}])},t.prototype.skipCommand=function(){this.bSkipNextHide=!0,!this.modalVisibility()||this.saving()||this.sending()||q.a.draftFolderNotEnabled()||!K.a.allowDraftAutosave()||this.saveCommand(),this.tryToClosePopup()},t.prototype.contactsCommand=function(){var e=this;this.allowContacts&&(this.skipCommand(),A.a.delay(function(){Object(te.showScreenPopup)(n(181),[!0,e.sLastFocusedField])},P.Magics.Time200ms))},t.prototype.dropboxCommand=function(){var e=this;return T.a.Dropbox&&T.a.Dropbox.choose({success:function(t){t&&t[0]&&t[0].link&&e.addDropboxAttachment(t[0])},linkType:"direct",multiselect:!1}),!0},t.prototype.driveCommand=function(){return this.driveOpenPopup(),!0},t.prototype.autosaveFunction=function(){!this.modalVisibility()||q.a.draftFolderNotEnabled()||!K.a.allowDraftAutosave()||this.isEmptyForm(!1)||this.saving()||this.sending()||this.savedError()||this.saveCommand(),this.autosaveStart()},t.prototype.autosaveStart=function(){T.a.clearTimeout(this.iTimer),this.iTimer=T.a.setTimeout(this.autosaveFunction,P.Magics.Time1m)},t.prototype.autosaveStop=function(){T.a.clearTimeout(this.iTimer)},t.prototype.emailsSource=function(e,t){Object(ee.a)().getAutocomplete(e.term,function(e){t(A.a.map(e,function(e){return e.toLine(!1)}))})},t.prototype.openOpenPgpPopup=function(){var e=this;W.a.capaOpenPGP()&&this.oEditor&&!this.oEditor.isHtml()&&Object(te.showScreenPopup)(n(236),[function(t){e.editor(function(e){e.setPlain(t)})},this.oEditor.getData(!1),this.currentIdentity(),this.to(),this.cc(),this.bcc()])},t.prototype.reloadDraftFolder=function(){var e=q.a.draftFolder();""!==e&&M.r!==e&&(Object(H.q)(e,""),q.a.currentFolderFullNameRaw()===e?Object(ee.a)().reloadMessageList(!0):Object(ee.a)().folderInformation(e))},t.prototype.findIdentityByMessage=function(e,t){var n=1e3,o=null,i=V.a.identities(),a={},r=function(e){e&&e.email&&a[e.email]&&(!o||n>a[e.email][1])&&(o=a[e.email][0],n=a[e.email][1])};if(A.a.each(i,function(e,t){a[e.email()]=[e,t]}),t)switch(e){case P.ComposeType.Empty:break;case P.ComposeType.Reply:case P.ComposeType.ReplyAll:case P.ComposeType.Forward:case P.ComposeType.ForwardAsAttachment:A.a.each(A.a.union(t.to,t.cc,t.bcc),r),o||A.a.each(t.deliveredTo,r);break;case P.ComposeType.Draft:A.a.each(A.a.union(t.from,t.replyTo),r)}return o||i[0]||null},t.prototype.selectIdentity=function(e){e&&e.item&&(this.currentIdentity(e.item),this.setSignatureFromIdentity(e.item))},t.prototype.sendMessageResponse=function(e,t){var n=!1,o="";this.sending(!1),P.StorageResultType.Success===e&&t&&t.Result&&(n=!0,this.modalVisibility()&&Object(L.delegateRun)(this,"closeCommand")),this.modalVisibility()&&!n&&(t&&P.Notification.CantSaveMessage===t.ErrorCode?(this.sendSuccessButSaveError(!0),this.savedErrorDesc(Object(L.trim)(Object(x.i18n)("COMPOSE/SAVED_ERROR_ON_SEND")))):(o=Object(x.getNotification)(t&&t.ErrorCode?t.ErrorCode:P.Notification.CantSendMessage,t&&t.ErrorMessage?t.ErrorMessage:""),this.sendError(!0),this.sendErrorDesc(o||Object(x.getNotification)(P.Notification.CantSendMessage)))),this.reloadDraftFolder()},t.prototype.saveMessageResponse=function(e,t){var n=!1;if(this.saving(!1),P.StorageResultType.Success===e&&t&&t.Result&&t.Result.NewFolder&&t.Result.NewUid){if(n=!0,this.bFromDraft){var o=Y.a.message();o&&this.draftFolder()===o.folderFullNameRaw&&this.draftUid()===o.uid&&Y.a.message(null)}this.draftFolder(t.Result.NewFolder),this.draftUid(t.Result.NewUid),this.savedTime(T.a.Math.round((new T.a.Date).getTime()/1e3)),this.bFromDraft&&Object(H.q)(this.draftFolder(),"")}n||(this.savedError(!0),this.savedErrorDesc(Object(x.getNotification)(P.Notification.CantSaveMessage))),this.reloadDraftFolder()},t.prototype.onHide=function(){this.autosaveStop(),this.bSkipNextHide||(G.a.composeInEdit(!1),this.reset()),this.bSkipNextHide=!1,this.to.focused(!1),Object(te.routeOn)()},t.prototype.editor=function(e){var t=this;e&&(!this.oEditor&&this.composeEditorArea()?this.oEditor=new B.HtmlEditor(this.composeEditorArea(),null,function(){e(t.oEditor),t.resizerTrigger()},function(e){t.isHtml(!!e)}):this.oEditor&&(e(this.oEditor),this.resizerTrigger()))},t.prototype.converSignature=function(e){var t=10,n="",o=[],i=/{{MOMENT:([^}]+)}}/g;if(e=e.replace(/[\r]/g,""),""!==(n=this.oLastMessage?this.emailArrayToStringLineHelper(this.oLastMessage.from,!0):"")&&(e=e.replace(/{{FROM-FULL}}/g,n),-1===n.indexOf(" ")&&0<n.indexOf("@")&&(n=n.replace(/@[\S]+/,"")),e=e.replace(/{{FROM}}/g,n)),e=e.replace(/[\s]{1,2}{{FROM}}/g,"{{FROM}}"),e=e.replace(/[\s]{1,2}{{FROM-FULL}}/g,"{{FROM-FULL}}"),e=e.replace(/{{FROM}}/g,""),-1<(e=e.replace(/{{FROM-FULL}}/g,"")).indexOf("{{DATE}}")&&(e=e.replace(/{{DATE}}/g,Object(U.format)(0,"llll"))),-1<e.indexOf("{{TIME}}")&&(e=e.replace(/{{TIME}}/g,Object(U.format)(0,"LT"))),-1<e.indexOf("{{MOMENT:"))try{for(var a=null;null!==(a=i.exec(e))&&(a&&a[0]&&a[1]&&o.push([a[0],a[1]]),0!=(t-=1)););o&&0<o.length&&A.a.each(o,function(t){e=e.replace(t[0],Object(U.format)(0,t[1]))}),e=e.replace(/{{MOMENT:[^}]+}}/g,"")}catch(e){}return e},t.prototype.setSignatureFromIdentity=function(e){var t=this;e&&this.editor(function(n){var o=!1,i=e.signature();""!==i&&":HTML:"===i.substr(0,6)&&(o=!0,i=i.substr(6)),n.setSignature(t.converSignature(i),o,!!e.signatureInsertBefore())})},t.prototype.onShow=function(e,t,o,i,a,r,s){var c=this;Object(te.routeOff)(),this.autosaveStart(),G.a.composeInEdit()?(e=e||P.ComposeType.Empty,P.ComposeType.Empty!==e?Object(te.showScreenPopup)(n(77),[Object(x.i18n)("COMPOSE/DISCARD_UNSAVED_DATA"),function(){c.initOnShow(e,t,o,i,a,r,s)},null,null,null,!1]):(this.addEmailsTo(this.to,o),this.addEmailsTo(this.cc,i),this.addEmailsTo(this.bcc,a),Object(L.isNormal)(r)&&""!==r&&""===this.subject()&&this.subject(r))):this.initOnShow(e,t,o,i,a,r,s)},t.prototype.onWarmUp=function(){this.modalVisibility&&!this.modalVisibility()&&this.editor(function(e){return e.modeToggle(!1)})},t.prototype.addEmailsTo=function(e,t){if(Object(L.isNonEmptyArray)(t)){var n=Object(L.trim)(e()),o=A.a.uniq(A.a.compact(A.a.map(t,function(e){return e?e.toLine(!1):null})));e(n+(""===n?"":", ")+Object(L.trim)(o.join(", ")))}},t.prototype.emailArrayToStringLineHelper=function(e,t){return t=!!t,A.a.map(e,function(e){return e.toLine(t)}).join(", ")},t.prototype.initOnShow=function(e,t,n,o,i,a,r){var s=this;G.a.composeInEdit(!0);var c="",l="",u="",d="",p="",h="",f="",m=null,b=null,g=null,y={},v=z.a.email(),S=e||P.ComposeType.Empty;if((t=t||null)&&Object(L.isNormal)(t)&&(g=Object(L.isArray)(t)&&1===t.length?t[0]:Object(L.isArray)(t)?null:t),this.oLastMessage=g,null!==v&&(y[v]=!0),this.reset(),(m=this.findIdentityByMessage(S,g))&&(y[m.email()]=!0),Object(L.isNonEmptyArray)(n)&&this.to(this.emailArrayToStringLineHelper(n)),Object(L.isNonEmptyArray)(o)&&this.cc(this.emailArrayToStringLineHelper(o)),Object(L.isNonEmptyArray)(i)&&this.bcc(this.emailArrayToStringLineHelper(i)),""!==S&&g){d=Object(U.format)(g.dateTimeStampInUTC(),"FULL"),p=g.subject(),b=g.aDraftInfo;var O=F()(g.body).clone();O&&(Object(L.clearBqSwitcher)(O),h=O.html());var w=null;switch(S){case P.ComposeType.Empty:break;case P.ComposeType.Reply:this.to(this.emailArrayToStringLineHelper(g.replyEmails(y))),this.subject(Object(L.replySubjectAdd)("Re",p)),this.prepearMessageAttachments(g,S),this.aDraftInfo=["reply",g.uid,g.folderFullNameRaw],this.sInReplyTo=g.sMessageId,this.sReferences=Object(L.trim)(this.sInReplyTo+" "+g.sReferences);break;case P.ComposeType.ReplyAll:w=g.replyAllEmails(y),this.to(this.emailArrayToStringLineHelper(w[0])),this.cc(this.emailArrayToStringLineHelper(w[1])),this.subject(Object(L.replySubjectAdd)("Re",p)),this.prepearMessageAttachments(g,S),this.aDraftInfo=["reply",g.uid,g.folderFullNameRaw],this.sInReplyTo=g.sMessageId,this.sReferences=Object(L.trim)(this.sInReplyTo+" "+g.references());break;case P.ComposeType.Forward:case P.ComposeType.ForwardAsAttachment:this.subject(Object(L.replySubjectAdd)("Fwd",p)),this.prepearMessageAttachments(g,S),this.aDraftInfo=["forward",g.uid,g.folderFullNameRaw],this.sInReplyTo=g.sMessageId,this.sReferences=Object(L.trim)(this.sInReplyTo+" "+g.sReferences);break;case P.ComposeType.Draft:this.to(this.emailArrayToStringLineHelper(g.to)),this.cc(this.emailArrayToStringLineHelper(g.cc)),this.bcc(this.emailArrayToStringLineHelper(g.bcc)),this.replyTo(this.emailArrayToStringLineHelper(g.replyTo)),this.bFromDraft=!0,this.draftFolder(g.folderFullNameRaw),this.draftUid(g.uid),this.subject(p),this.prepearMessageAttachments(g,S),this.aDraftInfo=Object(L.isNonEmptyArray)(b)&&3===b.length?b:null,this.sInReplyTo=g.sInReplyTo,this.sReferences=g.sReferences;break;case P.ComposeType.EditAsNew:this.to(this.emailArrayToStringLineHelper(g.to)),this.cc(this.emailArrayToStringLineHelper(g.cc)),this.bcc(this.emailArrayToStringLineHelper(g.bcc)),this.replyTo(this.emailArrayToStringLineHelper(g.replyTo)),this.subject(p),this.prepearMessageAttachments(g,S),this.aDraftInfo=Object(L.isNonEmptyArray)(b)&&3===b.length?b:null,this.sInReplyTo=g.sInReplyTo,this.sReferences=g.sReferences}switch(S){case P.ComposeType.Reply:case P.ComposeType.ReplyAll:c=g.fromToLine(!1,!0),f=Object(x.i18n)("COMPOSE/REPLY_MESSAGE_TITLE",{DATETIME:d,EMAIL:c}),h="<br /><br />"+f+":<br /><br /><blockquote>"+Object(L.trim)(h)+"</blockquote>";break;case P.ComposeType.Forward:c=g.fromToLine(!1,!0),l=g.toToLine(!1,!0),u=g.ccToLine(!1,!0),h="<br /><br />"+Object(x.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_TITLE")+"<br />"+Object(x.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_FROM")+": "+c+"<br />"+Object(x.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_TO")+": "+l+(0<u.length?"<br />"+Object(x.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_CC")+": "+u:"")+"<br />"+Object(x.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_SENT")+": "+Object(L.encodeHtml)(d)+"<br />"+Object(x.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_SUBJECT")+": "+Object(L.encodeHtml)(p)+"<br /><br />"+Object(L.trim)(h)+"<br /><br />";break;case P.ComposeType.ForwardAsAttachment:h=""}this.editor(function(e){e.setHtml(h,!1),(P.EditorDefaultType.PlainForced===s.editorDefaultType()||!g.isHtml()&&P.EditorDefaultType.HtmlForced!==s.editorDefaultType())&&e.modeToggle(!1),m&&P.ComposeType.Draft!==S&&P.ComposeType.EditAsNew!==S&&s.setSignatureFromIdentity(m),s.setFocusInPopup()})}else P.ComposeType.Empty===S?(this.subject(Object(L.isNormal)(a)?""+a:""),h=Object(L.isNormal)(r)?""+r:"",this.editor(function(e){e.setHtml(h,!1),P.EditorDefaultType.Html!==s.editorDefaultType()&&P.EditorDefaultType.HtmlForced!==s.editorDefaultType()&&e.modeToggle(!1),m&&s.setSignatureFromIdentity(m),s.setFocusInPopup()})):Object(L.isNonEmptyArray)(t)?(A.a.each(t,function(e){s.addMessageAsAttachment(e)}),this.editor(function(e){e.setHtml("",!1),P.EditorDefaultType.Html!==s.editorDefaultType()&&P.EditorDefaultType.HtmlForced!==s.editorDefaultType()&&e.modeToggle(!1),m&&P.ComposeType.Draft!==S&&P.ComposeType.EditAsNew!==S&&s.setSignatureFromIdentity(m),s.setFocusInPopup()})):this.setFocusInPopup();var T=this.getAttachmentsDownloadsForUpload();Object(L.isNonEmptyArray)(T)&&J.a.messageUploadAttachments(this.onMessageUploadAttachments,T),m&&this.currentIdentity(m),this.resizerTrigger()},t.prototype.onMessageUploadAttachments=function(e,t){var n=this;P.StorageResultType.Success===e&&t&&t.Result?this.viewModelVisibility()||A.a.each(t.Result,function(e,t){var o=n.getAttachmentById(e);o&&(o.tempName(t),o.waiting(!1).uploading(!1).complete(!0))}):this.setMessageAttachmentFailedDownloadText()},t.prototype.setFocusInPopup=function(){var e=this;D.bMobileDevice||A.a.delay(function(){""===e.to()?e.to.focused(!0):e.oEditor&&(e.to.focused()||e.oEditor.focus())},P.Magics.Time100ms)},t.prototype.onShowWithDelay=function(){this.resizerTrigger()},t.prototype.tryToClosePopup=function(){var e=this,t=n(77);!Object(te.isPopupVisible)(t)&&this.modalVisibility()&&(this.bSkipNextHide||this.isEmptyForm()&&!this.draftUid()?Object(L.delegateRun)(this,"closeCommand"):Object(te.showScreenPopup)(t,[Object(x.i18n)("POPUPS_ASK/DESC_WANT_CLOSE_THIS_WINDOW"),function(){e.modalVisibility()&&Object(L.delegateRun)(e,"closeCommand")}]))},t.prototype.onBuild=function(){var e=this;this.initUploader(),R()("ctrl+q, command+q, ctrl+w, command+w",P.KeyState.Compose,L.noopFalse),R()("`",P.KeyState.Compose,function(){return!(e.oEditor&&!e.oEditor.hasFocus()&&!Object(L.inFocus)())||(e.identitiesDropdownTrigger(!0),!1)}),R()("ctrl+`",P.KeyState.Compose,function(){return e.identitiesDropdownTrigger(!0),!1}),R()("esc, ctrl+down, command+down",P.KeyState.Compose,function(){return e.skipCommand(),!1}),this.allowFolders&&R()("ctrl+s, command+s",P.KeyState.Compose,function(){return e.saveCommand(),!1}),X.appSettingsGet("allowCtrlEnterOnCompose")&&R()("ctrl+enter, command+enter",P.KeyState.Compose,function(){return e.sendCommand(),!1}),R()("shift+esc",P.KeyState.Compose,function(){return e.modalVisibility()&&e.tryToClosePopup(),!1}),Z.b("window.resize.real",this.resizerTrigger),Z.b("window.resize.real",A.a.debounce(this.resizerTrigger,P.Magics.Time50ms)),$.a.appendDropbox(),this.driveEnabled()&&F.a.getScript("https://apis.google.com/js/api.js",function(){T.a.gapi&&e.driveVisible(!0)}),T.a.setInterval(function(){e.modalVisibility()&&e.oEditor&&e.oEditor.resize()},P.Magics.Time5s)},t.prototype.driveCallback=function(e,t){var n=this;if(t&&T.a.XMLHttpRequest&&T.a.google&&t[T.a.google.picker.Response.ACTION]===T.a.google.picker.Action.PICKED&&t[T.a.google.picker.Response.DOCUMENTS]&&t[T.a.google.picker.Response.DOCUMENTS][0]&&t[T.a.google.picker.Response.DOCUMENTS][0].id){var o=new T.a.XMLHttpRequest;o.open("GET","https://www.googleapis.com/drive/v2/files/"+t[T.a.google.picker.Response.DOCUMENTS][0].id),o.setRequestHeader("Authorization","Bearer "+e),o.addEventListener("load",function(){if(o&&o.responseText){var t=T.a.JSON.parse(o.responseText),i=function(e,n,o){e&&e.exportLinks&&(e.exportLinks[n]?(t.downloadUrl=e.exportLinks[n],t.title=e.title+"."+o,t.mimeType=n):e.exportLinks["application/pdf"]&&(t.downloadUrl=e.exportLinks["application/pdf"],t.title=e.title+".pdf",t.mimeType="application/pdf"))};if(t&&!t.downloadUrl&&t.mimeType&&t.exportLinks)switch(t.mimeType.toString().toLowerCase()){case"application/vnd.google-apps.document":i(t,"application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx");break;case"application/vnd.google-apps.spreadsheet":i(t,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx");break;case"application/vnd.google-apps.drawing":i(t,"image/png","png");break;case"application/vnd.google-apps.presentation":i(t,"application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx");break;default:i(t,"application/pdf","pdf")}t&&t.downloadUrl&&n.addDriveAttachment(t,e)}}),o.send()}},t.prototype.driveCreatePiker=function(e){var t=this;T.a.gapi&&e&&e.access_token&&T.a.gapi.load("picker",{callback:function(){T.a.google&&T.a.google.picker&&(new T.a.google.picker.PickerBuilder).addView(T.a.google.picker.ViewId.DOCS).setAppId(X.settingsGet("GoogleClientID")).setOAuthToken(e.access_token).setCallback(A.a.bind(t.driveCallback,t,e.access_token)).enableFeature(T.a.google.picker.Feature.NAV_HIDDEN).build().setVisible(!0)}})},t.prototype.driveOpenPopup=function(){var e=this;T.a.gapi&&T.a.gapi.load("auth",{callback:function(){var t=T.a.gapi.auth.getToken(),n=function(t){if(t&&!t.error){var n=T.a.gapi.auth.getToken();return n&&e.driveCreatePiker(n),!0}return!1};t?e.driveCreatePiker(t):T.a.gapi.auth.authorize({client_id:X.settingsGet("GoogleClientID"),scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!0},function(e){n(e)||T.a.gapi.auth.authorize({client_id:X.settingsGet("GoogleClientID"),scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!1},n)})}})},t.prototype.getAttachmentById=function(e){return A.a.find(this.attachments(),function(t){return t&&e===t.id})},t.prototype.cancelAttachmentHelper=function(e,t){var n=this;return function(){var o=A.a.find(n.attachments(),function(t){return t&&t.id===e});o&&(n.attachments.remove(o),Object(L.delegateRunOnDestroy)(o),t&&t.cancel(e))}},t.prototype.initUploader=function(){var e=this;if(this.composeUploaderButton()){var t={},n=Object(L.pInt)(X.settingsGet("AttachmentLimit")),o=new I.a({action:Object(k.G)(),name:"uploader",queueSize:2,multipleSizeLimit:50,clickElement:this.composeUploaderButton(),dragAndDropElement:this.composeUploaderDropPlace()});o?(o.on("onDragEnter",function(){e.dragAndDropOver(!0)}).on("onDragLeave",function(){e.dragAndDropOver(!1)}).on("onBodyDragEnter",function(){e.attachmentsPlace(!0),e.dragAndDropVisible(!0)}).on("onBodyDragLeave",function(){e.dragAndDropVisible(!1)}).on("onProgress",function(n,o,i){var a=t[n];a||(a=e.getAttachmentById(n))&&(t[n]=a),a&&a.progress(T.a.Math.floor(o/i*100))}).on("onSelect",function(t,i){e.dragAndDropOver(!1);var a=Object(L.isUnd)(i.FileName)?"":i.FileName.toString(),r=Object(L.isNormal)(i.Size)?Object(L.pInt)(i.Size):null,s=new Q.a(t,a,r);return s.cancel=e.cancelAttachmentHelper(t,o),e.attachments.push(s),e.attachmentsPlace(!0),!(0<r&&0<n&&n<r)||(s.waiting(!1).uploading(!0).complete(!0).error(Object(x.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1)}).on("onStart",function(n){var o=t[n];o||(o=e.getAttachmentById(n))&&(t[n]=o),o&&o.waiting(!1).uploading(!0).complete(!1)}).on("onComplete",function(n,o,i){var a=e.getAttachmentById(n),r=i&&i.Result&&i.Result.ErrorCode?i.Result.ErrorCode:null,s=o&&i&&i.Result&&i.Result.Attachment?i.Result.Attachment:null,c="";null!==r?c=Object(x.getUploadErrorDescByCode)(r):s||(c=Object(x.i18n)("UPLOAD/ERROR_UNKNOWN")),a&&(""!==c&&0<c.length?a.waiting(!1).uploading(!1).complete(!0).error(c):s&&(a.waiting(!1).uploading(!1).complete(!0),a.initByUploadJson(s)),Object(L.isUnd)(t[n])&&delete t[n])}),this.addAttachmentEnabled(!0).dragAndDropEnabled(o.isDragAndDropSupported())):this.addAttachmentEnabled(!1).dragAndDropEnabled(!1)}},t.prototype.prepearAttachmentsForSendOrSave=function(){var e={};return A.a.each(this.attachmentsInReady(),function(t){t&&""!==t.tempName()&&t.enabled()&&(e[t.tempName()]=[t.fileName(),t.isInline?"1":"0",t.CID,t.contentLocation])}),e},t.prototype.addMessageAsAttachment=function(e){if(e){var t=e.subject();t=".eml"===t.substr(-4).toLowerCase()?t:t+".eml";var n=new Q.a(e.requestHash,t,e.size());n.fromMessage=!0,n.cancel=this.cancelAttachmentHelper(e.requestHash),n.waiting(!1).uploading(!0).complete(!0),this.attachments.push(n)}},t.prototype.addAttachmentHelper=function(e,t,n){var o=new Q.a(e,t,n);return o.fromMessage=!1,o.cancel=this.cancelAttachmentHelper(e),o.waiting(!1).uploading(!0).complete(!1),this.attachments.push(o),this.attachmentsPlace(!0),o},t.prototype.addDropboxAttachment=function(e){var t=Object(L.pInt)(X.settingsGet("AttachmentLimit")),n=e.bytes,o=this.addAttachmentHelper(e.link,e.name,n);return 0<n&&0<t&&t<n?(o.uploading(!1).complete(!0),o.error(Object(x.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1):(J.a.composeUploadExternals(function(e,t){var n=!1;o.uploading(!1).complete(!0),P.StorageResultType.Success===e&&t&&t.Result&&t.Result[o.id]&&(n=!0,o.tempName(t.Result[o.id])),n||o.error(Object(x.getUploadErrorDescByCode)(P.UploadErrorCode.FileNoUploaded))},[e.link]),!0)},t.prototype.addDriveAttachment=function(e,t){var n=Object(L.pInt)(X.settingsGet("AttachmentLimit")),o=e.fileSize?Object(L.pInt)(e.fileSize):0,i=this.addAttachmentHelper(e.downloadUrl,e.title,o);return 0<o&&0<n&&n<o?(i.uploading(!1).complete(!0),i.error(Object(x.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1):(J.a.composeUploadDrive(function(e,t){var n=!1;i.uploading(!1).complete(!0),P.StorageResultType.Success===e&&t&&t.Result&&t.Result[i.id]&&(n=!0,i.tempName(t.Result[i.id][0]),i.size(Object(L.pInt)(t.Result[i.id][1]))),n||i.error(Object(x.getUploadErrorDescByCode)(P.UploadErrorCode.FileNoUploaded))},e.downloadUrl,t),!0)},t.prototype.prepearMessageAttachments=function(e,t){var n=this;if(e)if(P.ComposeType.ForwardAsAttachment===t)this.addMessageAsAttachment(e);else{var o=e.attachments();A.a.each(Object(L.isNonEmptyArray)(o)?o:[],function(e){var o=!1;switch(t){case P.ComposeType.Reply:case P.ComposeType.ReplyAll:o=e.isLinked;break;case P.ComposeType.Forward:case P.ComposeType.Draft:case P.ComposeType.EditAsNew:o=!0}if(o){var i=new Q.a(e.download,e.fileName,e.estimatedSize,e.isInline,e.isLinked,e.cid,e.contentLocation);i.fromMessage=!0,i.cancel=n.cancelAttachmentHelper(e.download),i.waiting(!1).uploading(!0).complete(!1),n.attachments.push(i)}})}},t.prototype.removeLinkedAttachments=function(){var e=A.a.find(this.attachments(),function(e){return e&&e.isLinked});e&&(this.attachments.remove(e),Object(L.delegateRunOnDestroy)(e))},t.prototype.setMessageAttachmentFailedDownloadText=function(){A.a.each(this.attachments(),function(e){e&&e.fromMessage&&e.waiting(!1).uploading(!1).complete(!0).error(Object(x.getUploadErrorDescByCode)(P.UploadErrorCode.FileNoUploaded))})},t.prototype.isEmptyForm=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?0===this.attachments().length:0===this.attachmentsInReady().length;return 0===this.to().length&&0===this.cc().length&&0===this.bcc().length&&0===this.replyTo().length&&0===this.subject().length&&e&&(!this.oEditor||""===this.oEditor.getData())},t.prototype.reset=function(){this.to(""),this.cc(""),this.bcc(""),this.replyTo(""),this.subject(""),this.requestDsn(!1),this.requestReadReceipt(!1),this.markAsImportant(!1),this.attachmentsPlace(!1),this.aDraftInfo=null,this.sInReplyTo="",this.bFromDraft=!1,this.sReferences="",this.sendError(!1),this.sendSuccessButSaveError(!1),this.savedError(!1),this.savedTime(0),this.emptyToError(!1),this.attachmentsInProcessError(!1),this.showCc(!1),this.showBcc(!1),this.showReplyTo(!1),Object(L.delegateRunOnDestroy)(this.attachments()),this.attachments([]),this.dragAndDropOver(!1),this.dragAndDropVisible(!1),this.draftFolder(""),this.draftUid(""),this.sending(!1),this.saving(!1),this.oEditor&&this.oEditor.clear(!1)},t.prototype.getAttachmentsDownloadsForUpload=function(){return A.a.map(A.a.filter(this.attachments(),function(e){return e&&""===e.tempName()}),function(e){return e.id})},t.prototype.resizerTrigger=function(){this.resizer(!this.resizer())},t}(ne.a),o(h.prototype,"sendCommand",[a],m()(h.prototype,"sendCommand"),h.prototype),o(h.prototype,"saveCommand",[r],m()(h.prototype,"saveCommand"),h.prototype),o(h.prototype,"deleteCommand",[s],m()(h.prototype,"deleteCommand"),h.prototype),o(h.prototype,"skipCommand",[c],m()(h.prototype,"skipCommand"),h.prototype),o(h.prototype,"contactsCommand",[l],m()(h.prototype,"contactsCommand"),h.prototype),o(h.prototype,"dropboxCommand",[u],m()(h.prototype,"dropboxCommand"),h.prototype),o(h.prototype,"driveCommand",[d],m()(h.prototype,"driveCommand"),h.prototype),p=h))||p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"EmailModel",function(){return r}),n.d(t,"default",function(){return r});var o=n(0),i=n.n(o),a=n(1),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";i()(this,e),this.email="",this.name="",this.dkimStatus="",this.dkimValue="",this.email=t,this.name=n,this.dkimStatus=o,this.dkimValue=a,this.clearDuplicateName()}return e.newInstanceFromJson=function(t){var n=new e;return n.initByJson(t)?n:null},e.splitHelper=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";",n=0,o=0,i=!1,a="",r="";for(o=(e=e.replace(/[\r\n]+/g,"; ").replace(/[\s]+/g," ")).length;n<o;n++){switch(a=e.charAt(n)){case"@":i=!0;break;case" ":i&&(i=!1,r+=t)}r+=a}return r.split(t)},e.prototype.clear=function(){this.email="",this.name="",this.dkimStatus="none",this.dkimValue=""},e.prototype.validate=function(){return""!==this.name||""!==this.email},e.prototype.hash=function(){return"#"+(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"":this.name)+"#"+this.email+"#"},e.prototype.clearDuplicateName=function(){this.name===this.email&&(this.name="")},e.prototype.search=function(e){return-1<(this.name+" "+this.email).toLowerCase().indexOf(e.toLowerCase())},e.prototype.parse=function(e){this.clear(),e=Object(a.trim)(e);var t=/(?:"([^"]+)")? ?[<]?(.*?@[^>,]+)>?,? ?/g.exec(e);t?(this.name=t[1]||"",this.email=t[2]||"",this.clearDuplicateName()):/^[^@]+@[^@]+$/.test(e)&&(this.name="",this.email=e)},e.prototype.initByJson=function(e){var t=!1;return e&&"Object/Email"===e["@Object"]&&(this.name=Object(a.trim)(e.Name),this.email=Object(a.trim)(e.Email),this.dkimStatus=Object(a.trim)(e.DkimStatus||""),this.dkimValue=Object(a.trim)(e.DkimValue||""),t=""!==this.email,this.clearDuplicateName()),t},e.prototype.toLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="";return""!==this.email&&(e&&""!==this.name?o=t?'<a href="mailto:'+Object(a.encodeHtml)('"'+this.name+'" <'+this.email+">")+'" target="_blank" tabindex="-1">'+Object(a.encodeHtml)(this.name)+"</a>":n?Object(a.encodeHtml)(this.name):this.name:(o=this.email,""!==this.name?t?o=Object(a.encodeHtml)('"'+this.name+'" <')+'<a href="mailto:'+Object(a.encodeHtml)('"'+this.name+'" <'+this.email+">")+'" target="_blank" tabindex="-1">'+Object(a.encodeHtml)(o)+"</a>"+Object(a.encodeHtml)(">"):(o='"'+this.name+'" <'+o+">",n&&(o=Object(a.encodeHtml)(o))):t&&(o='<a href="mailto:'+Object(a.encodeHtml)(this.email)+'" target="_blank" tabindex="-1">'+Object(a.encodeHtml)(this.email)+"</a>"))),o},e.prototype.mailsoParse=function(e){if(""===(e=Object(a.trim)(e)))return!1;for(var t=function(e,t,n){var o=(e=Object(a.pString)(e)).length;return 0>t&&(t+=o),o=void 0===n?o:0>n?n+o:n+t,!(t>=e.length||0>t||t>o)&&e.slice(t,o)},n=function(e,t,n,o){return e=Object(a.pString)(e),0>n&&(n+=e.length),0>(o=void 0!==o?o:e.length)&&(o=o+e.length-n),e.slice(0,n)+t.substr(0,o)+t.slice(o)+e.slice(n+o)},o="",i="",r="",s=!1,c=!1,l=!1,u=null,d=0,p=0,h=0;h<e.length;){switch(e.substr(h,1)){case'"':s||c||l?c||l||(o=t(e,d+1,(p=h)-d-1),e=n(e,"",d,p-d+1),p=0,h=0,d=0,s=!1):(s=!0,d=h);break;case"<":s||c||l||(0<h&&0===o.length&&(o=t(e,0,h)),c=!0,d=h);break;case">":c&&(i=t(e,d+1,(p=h)-d-1),e=n(e,"",d,p-d+1),p=0,h=0,d=0,c=!1);break;case"(":s||c||l||(l=!0,d=h);break;case")":l&&(r=t(e,d+1,(p=h)-d-1),e=n(e,"",d,p-d+1),p=0,h=0,d=0,l=!1);break;case"\\":h+=1}h+=1}return 0===i.length&&((u=e.match(/[^@\s]+@\S+/i))&&u[0]?i=u[0]:o=e),0<i.length&&0===o.length&&0===r.length&&(o=e.replace(i,"")),i=Object(a.trim)(i).replace(/^[<]+/,"").replace(/[>]+$/,""),o=Object(a.trim)(o).replace(/^["']+/,"").replace(/["']+$/,""),r=Object(a.trim)(r).replace(/^[(]+/,"").replace(/[)]+$/,""),o=o.replace(/\\\\(.)/g,"$1"),r=r.replace(/\\\\(.)/g,"$1"),this.name=o,this.email=i,this.clearDuplicateName(),!0},e}()},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(6),c=n.n(s),l=n(2),u=n(12),d=n.n(u),p=n(3),h=n(1),f=n(27),m=n(20),b=n(7),g=n(14),y=n(8),v=n(40),S=n(175),O=n(214),w=n(9),T=n(34),C=n(47),A=n(38),E=n(53),F=n(41),j=n(145),N=n(16),R=n(17),_=function(){function e(){i()(this,e),this.staticMessage=new O.a,this.messageList=l.a.observableArray([]).extend({rateLimit:0}),this.messageListCount=l.a.observable(0),this.messageListSearch=l.a.observable(""),this.messageListThreadUid=l.a.observable(""),this.messageListPage=l.a.observable(1),this.messageListPageBeforeThread=l.a.observable(1),this.messageListError=l.a.observable(""),this.messageListEndFolder=l.a.observable(""),this.messageListEndSearch=l.a.observable(""),this.messageListEndThreadUid=l.a.observable(""),this.messageListEndPage=l.a.observable(1),this.messageListLoading=l.a.observable(!1),this.messageListIsNotCompleted=l.a.observable(!1),this.messageListCompleteLoadingThrottle=l.a.observable(!1).extend({throttle:200}),this.messageListCompleteLoadingThrottleForAnimation=l.a.observable(!1).extend({specialThrottle:700}),this.messageListDisableAutoSelect=l.a.observable(!1).extend({falseTimeout:500}),this.selectorMessageSelected=l.a.observable(null),this.selectorMessageFocused=l.a.observable(null),this.message=l.a.observable(null),this.message.viewTrigger=l.a.observable(!1),this.messageError=l.a.observable(""),this.messageCurrentLoading=l.a.observable(!1),this.messageLoadingThrottle=l.a.observable(!1).extend({throttle:p.Magics.Time50ms}),this.messageFullScreenMode=l.a.observable(!1),this.messagesBodiesDom=l.a.observable(null),this.messageActiveDom=l.a.observable(null),this.computers(),this.subscribers(),this.onMessageResponse=c.a.bind(this.onMessageResponse,this),this.purgeMessageBodyCacheThrottle=c.a.throttle(this.purgeMessageBodyCache,p.Magics.Time30s)}return e.prototype.computers=function(){var e=this;this.messageLoading=l.a.computed(function(){return e.messageCurrentLoading()}),this.messageListEndHash=l.a.computed(function(){return e.messageListEndFolder()+"|"+e.messageListEndSearch()+"|"+e.messageListEndThreadUid()+"|"+e.messageListEndPage()}),this.messageListPageCount=l.a.computed(function(){var t=r.a.Math.ceil(e.messageListCount()/F.a.messagesPerPage());return 0>=t?1:t}),this.mainMessageListSearch=l.a.computed({read:this.messageListSearch,write:function(t){Object(w.setHash)(Object(g.o)(A.a.currentFolderFullNameHash(),1,Object(h.trim)(t.toString()),e.messageListThreadUid()))}}),this.messageListCompleteLoading=l.a.computed(function(){var t=e.messageListLoading(),n=e.messageListIsNotCompleted();return t||n}),this.isMessageSelected=l.a.computed(function(){return null!==e.message()}),this.messageListChecked=l.a.computed(function(){return c.a.filter(e.messageList(),function(e){return e.checked()})}).extend({rateLimit:0}),this.hasCheckedMessages=l.a.computed(function(){return 0<e.messageListChecked().length}).extend({rateLimit:0}),this.messageListCheckedOrSelected=l.a.computed(function(){var t=e.messageListChecked(),n=e.selectorMessageSelected(),o=e.selectorMessageFocused();return t.length?c.a.union(t,n?[n]:[]):n?[n]:o?[o]:[]}),this.messageListCheckedOrSelectedUidsWithSubMails=l.a.computed(function(){var t=[];return c.a.each(e.messageListCheckedOrSelected(),function(e){e&&(t.push(e.uid),1<e.threadsLen()&&(t=c.a.union(t,e.threads())))}),t})},e.prototype.subscribers=function(){var e=this;this.messageListCompleteLoading.subscribe(function(t){t=!!t,e.messageListCompleteLoadingThrottle(t),e.messageListCompleteLoadingThrottleForAnimation(t)}),this.messageList.subscribe(c.a.debounce(function(e){c.a.each(e,function(e){e&&e.newForAnimation()&&e.newForAnimation(!1)})},p.Magics.Time500ms)),this.message.subscribe(function(t){t?p.Layout.NoPreview===F.a.layout()&&T.a.focusedState(p.Focused.MessageView):(T.a.focusedState(p.Focused.MessageList),e.messageFullScreenMode(!1),e.hideMessageBodies())}),this.messageLoading.subscribe(function(t){e.messageLoadingThrottle(t)}),this.messagesBodiesDom.subscribe(function(t){!t||t instanceof d.a||e.messagesBodiesDom(d()(t))}),this.messageListEndFolder.subscribe(function(t){var n=e.message();n&&t&&t!==n.folderFullNameRaw&&e.message(null)})},e.prototype.purgeMessageBodyCache=function(){var e=0,t=b.data.iMessageBodyCacheCount-m.k;if(0<t){var n=this.messagesBodiesDom();n&&(n.find(".rl-cache-class").each(function(){var n=d()(this);t>n.data("rl-cache-count")&&(n.addClass("rl-cache-purge"),e+=1)}),0<e&&c.a.delay(function(){return n.find(".rl-cache-purge").remove()},p.Magics.Time350ms))}},e.prototype.initUidNextAndNewMessages=function(e,t,n){if(Object(f.h)()===e&&Object(h.isNormal)(t)&&""!==t){if(Object(h.isArray)(n)&&0<n.length){c.a.each(n,function(t){Object(f.a)(e,t.Uid)}),j.a.playSoundNotification();var o=n.length;3<o?j.a.displayDesktopNotification(Object(g.r)(),C.a.email(),Object(y.i18n)("MESSAGE_LIST/NEW_MESSAGE_NOTIFICATION",{COUNT:o}),{Folder:"",Uid:""}):c.a.each(n,function(e){j.a.displayDesktopNotification(Object(g.r)(),S.b(S.a(e.From),!1),e.Subject,{Folder:e.Folder,Uid:e.Uid})})}Object(f.s)(e,t)}},e.prototype.hideMessageBodies=function(){var e=this.messagesBodiesDom();e&&e.find(".b-text-part").hide()},e.prototype.removeMessagesFromList=function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t=c.a.map(t,function(e){return Object(h.pInt)(e)});var a=0,r=this.messageList(),s=this.message(),l=A.a.trashFolder(),u=A.a.spamFolder(),d=Object(f.e)(e),m=""===o?null:Object(f.e)(o||""),b=A.a.currentFolderFullNameRaw()===e?c.a.filter(r,function(e){return e&&-1<Object(h.inArray)(Object(h.pInt)(e.uid),t)}):[];if(c.a.each(b,function(e){e&&e.unseen()&&(a+=1)}),d&&!i&&(d.messageCountAll(0<=d.messageCountAll()-t.length?d.messageCountAll()-t.length:0),0<a&&d.messageCountUnread(0<=d.messageCountUnread()-a?d.messageCountUnread()-a:0)),m&&(l!==m.fullNameRaw&&u!==m.fullNameRaw||(a=0),m.messageCountAll(m.messageCountAll()+t.length),0<a&&m.messageCountUnread(m.messageCountUnread()+a),m.actionBlink(!0)),0<b.length&&(i?c.a.each(b,function(e){e.checked(!1)}):(this.messageListIsNotCompleted(!0),c.a.each(b,function(e){s&&s.hash===e.hash&&(s=null,n.message(null)),e.deleted(!0)}),c.a.delay(function(){c.a.each(b,function(e){n.messageList.remove(e)})},p.Magics.Time350ms))),""!==e&&Object(f.q)(e,""),""!==o&&Object(f.q)(o,""),""!==this.messageListThreadUid()&&(r=this.messageList())&&0<r.length&&c.a.find(r,function(e){return!(!e||!e.deleted()||e.uid!==n.messageListThreadUid())})){var y=c.a.find(r,function(e){return e&&!e.deleted()});y&&this.messageListThreadUid()!==Object(h.pString)(y.uid)?(this.messageListThreadUid(Object(h.pString)(y.uid)),Object(w.setHash)(Object(g.o)(A.a.currentFolderFullNameHash(),this.messageListPage(),this.messageListSearch(),this.messageListThreadUid()),!0,!0)):y||(1<this.messageListPage()?(this.messageListPage(this.messageListPage()-1),Object(w.setHash)(Object(g.o)(A.a.currentFolderFullNameHash(),this.messageListPage(),this.messageListSearch(),this.messageListThreadUid()),!0,!0)):(this.messageListThreadUid(""),Object(w.setHash)(Object(g.o)(A.a.currentFolderFullNameHash(),this.messageListPageBeforeThread(),this.messageListSearch()),!0,!0)))}},e.prototype.initBlockquoteSwitcher=function(e){if(e){var t=d()("blockquote:not(.rl-bq-switcher)",e).filter(function(){return 0===d()(this).parent().closest("blockquote",e).length});t&&0<t.length&&t.each(function(){var e=d()(this),t=e.height();0===t&&(t=Object(h.getRealHeight)(e)),""!==Object(h.trim)(e.text())&&(0===t||100<t)&&(e.addClass("rl-bq-switcher hidden-bq"),d()('<span class="rlBlockquoteSwitcher"><i class="icon-ellipsis" /></span>').insertBefore(e).on("click.rlBlockquoteSwitcher",function(){e.toggleClass("hidden-bq"),Object(h.windowResize)()}).after("<br />").before("<br />"))})}},e.prototype.initOpenPgpControls=function(e,t){e&&e.find&&e.find(".b-plain-openpgp:not(.inited)").each(function(){E.a.initMessageBodyControls(d()(this),t)})},e.prototype.setMessage=function(e,t){var n=!1,o=null,i="",a="",r="",s=!1,l=this.messagesBodiesDom(),u=this.selectorMessageSelected(),m=this.message();if(e&&m&&e.Result&&"Object/Message"===e.Result["@Object"]&&m.folderFullNameRaw===e.Result.Folder){var g=m.threads();if(m.uid!==e.Result.Uid&&1<g.length&&-1<Object(h.inArray)(e.Result.Uid,g)&&(m=O.a.newInstanceFromJson(e.Result))&&(m.threads(g),Object(f.n)(m),this.message(this.staticMessage.populateByMessageListItem(m)),m=this.message(),n=!0),m&&m.uid===e.Result.Uid){if(this.messageError(""),m.initUpdateByMessageJson(e.Result),Object(f.b)(m.folderFullNameRaw,m.uid),t||m.initFlagsByJson(e.Result),l=l&&l[0]?l:null){i="rl-mgs-"+m.hash.replace(/[^a-zA-Z0-9]/g,"");var y=l.find("#"+i);if(y&&y[0])m.body=y,m.body&&(b.data.iMessageBodyCacheCount+=1,m.body.data("rl-cache-count",b.data.iMessageBodyCacheCount),m.fetchDataFromDom());else{var v=!1;if(Object(h.isNormal)(e.Result.Html)&&""!==e.Result.Html)v=!0,r=e.Result.Html.toString();else if(Object(h.isNormal)(e.Result.Plain)&&""!==e.Result.Plain)if(v=!1,r=Object(h.plainToHtml)(e.Result.Plain.toString(),!1),(m.isPgpSigned()||m.isPgpEncrypted())&&E.a.capaOpenPGP()){a=Object(h.pString)(e.Result.Plain);var S=/---BEGIN PGP MESSAGE---/.test(a);S||(s=/-----BEGIN PGP SIGNED MESSAGE-----/.test(a)&&/-----BEGIN PGP SIGNATURE-----/.test(a)),b.$div.empty(),r=s&&m.isPgpSigned()?b.$div.append(d()('<pre class="b-plain-openpgp signed"></pre>').text(a)).html():S&&m.isPgpEncrypted()?b.$div.append(d()('<pre class="b-plain-openpgp encrypted"></pre>').text(a)).html():"<pre>"+r+"</pre>",b.$div.empty(),m.isPgpSigned(s),m.isPgpEncrypted(S)}else r="<pre>"+r+"</pre>";else v=!1,r="<pre>"+r+"</pre>";b.data.iMessageBodyCacheCount+=1,(o=d()('<div id="'+i+'" ></div>').hide().addClass("rl-cache-class")).data("rl-cache-count",b.data.iMessageBodyCacheCount),o.html(Object(h.findEmailAndLinks)(r)).addClass("b-text-part "+(v?"html":"plain")),m.isHtml(!!v),m.hasImages(!!e.Result.HasExternals),m.body=o,m.body&&l.append(m.body),m.storeDataInDom(),e.Result.HasInternals&&m.showInternalImages(!0),m.hasImages()&&F.a.showImages()&&m.showExternalImages(!0),this.purgeMessageBodyCacheThrottle()}this.messageActiveDom(m.body),this.hideMessageBodies(),o&&(this.initOpenPgpControls(o,m),this.initBlockquoteSwitcher(o)),m.body.show()}Object(f.n)(m),(m.unseen()||m.hasUnseenSubMessage())&&Object(N.a)().messageListAction(m.folderFullNameRaw,p.MessageSetAction.SetSeen,[m]),n&&(m=this.message(),u&&m&&(m.folderFullNameRaw!==u.folderFullNameRaw||m.uid!==u.uid)?(this.selectorMessageSelected(null),1===this.messageList().length&&this.selectorMessageFocused(null)):!u&&m&&(u=c.a.find(this.messageList(),function(e){return e&&e.folderFullNameRaw===m.folderFullNameRaw&&e.uid===m.uid}))&&(this.selectorMessageSelected(u),this.selectorMessageFocused(u))),Object(h.windowResize)()}}},e.prototype.selectMessage=function(e){e?(this.message(this.staticMessage.populateByMessageListItem(e)),this.populateMessageBody(this.message())):this.message(null)},e.prototype.selectMessageByFolderAndUid=function(e,t){e&&t?(this.message(this.staticMessage.populateByMessageListItem(null)),this.message().folderFullNameRaw=e,this.message().uid=t,this.populateMessageBody(this.message())):this.message(null)},e.prototype.populateMessageBody=function(e){e&&R.a.message(this.onMessageResponse,e.folderFullNameRaw,e.uid)&&this.messageCurrentLoading(!0)},e.prototype.onMessageResponse=function(e,t,n){this.hideMessageBodies(),this.messageCurrentLoading(!1),p.StorageResultType.Success===e&&t&&t.Result?this.setMessage(t,n):p.StorageResultType.Unload===e?(this.message(null),this.messageError("")):p.StorageResultType.Abort!==e&&(this.message(null),this.messageError(t&&t.ErrorCode?Object(y.getNotification)(t.ErrorCode):Object(y.getNotification)(p.Notification.UnknownError)))},e.prototype.calculateMessageListHash=function(e){return c.a.map(e,function(e){return e.hash+"_"+e.threadsLen()+"_"+e.flagHash()}).join("|")},e.prototype.setMessageList=function(e,t){if(e&&e.Result&&"Collection/MessageCollection"===e.Result["@Object"]&&e.Result["@Collection"]&&Object(h.isArray)(e.Result["@Collection"])){var n=0,o=!1,i=[],a=Object(v.momentNowUnix)(),s=Object(h.pInt)(e.Result.MessageResultCount),l=Object(h.pInt)(e.Result.Offset),u=Object(f.e)(Object(h.isNormal)(e.Result.Folder)?e.Result.Folder:"");u&&!t&&(u.interval=a,Object(f.q)(e.Result.Folder,e.Result.FolderHash),Object(h.isNormal)(e.Result.MessageCount)&&u.messageCountAll(e.Result.MessageCount),Object(h.isNormal)(e.Result.MessageUnseenCount)&&(Object(h.pInt)(u.messageCountUnread())!==Object(h.pInt)(e.Result.MessageUnseenCount)&&(o=!0),u.messageCountUnread(e.Result.MessageUnseenCount)),this.initUidNextAndNewMessages(u.fullNameRaw,e.Result.UidNext,e.Result.NewMessages)),o&&u&&Object(f.c)(u.fullNameRaw),c.a.each(e.Result["@Collection"],function(e){if(e&&"Object/Message"===e["@Object"]){var o=O.a.newInstanceFromJson(e);o&&(Object(f.l)(o.folderFullNameRaw,o.uid)&&5>=n&&(n+=1,o.newForAnimation(!0)),o.deleted(!1),t?Object(f.n)(o):Object(f.u)(o),i.push(o))}}),this.messageListCount(s),this.messageListSearch(Object(h.isNormal)(e.Result.Search)?e.Result.Search:""),this.messageListPage(r.a.Math.ceil(l/F.a.messagesPerPage()+1)),this.messageListThreadUid(Object(h.isNormal)(e.Result.ThreadUid)?Object(h.pString)(e.Result.ThreadUid):""),this.messageListEndFolder(Object(h.isNormal)(e.Result.Folder)?e.Result.Folder:""),this.messageListEndSearch(this.messageListSearch()),this.messageListEndThreadUid(this.messageListThreadUid()),this.messageListEndPage(this.messageListPage()),this.messageListDisableAutoSelect(!0),this.messageList(i),this.messageListIsNotCompleted(!1),Object(f.d)(),u&&(t||o||F.a.useThreads())&&Object(N.a)().folderInformation(u.fullNameRaw,i)}else this.messageListCount(0),this.messageList([]),this.messageListError(Object(y.getNotification)(e&&e.ErrorCode?e.ErrorCode:p.Notification.CantGetMessageList))},e}();t.a=new _},function(e,t,n){var o=n(29);e.exports=function(e,t){if(!o(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!o(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(2),r=n(6),s=n.n(r),c=n(3),l=n(10),u=function(){function e(){i()(this,e),this.email=a.a.observable(""),this.parentEmail=a.a.observable(""),this.signature=a.a.observable(""),this.accounts=a.a.observableArray([]),this.accounts.loading=a.a.observable(!1).extend({throttle:c.Magics.Time100ms}),this.computers()}return e.prototype.computers=function(){var e=this;this.accountsEmails=a.a.computed(function(){return s.a.compact(s.a.map(e.accounts(),function(e){return e?e.email:null}))}),this.accountsUnreadCount=a.a.computed(function(){return 0})},e.prototype.populate=function(){this.email(l.settingsGet("Email")),this.parentEmail(l.settingsGet("ParentEmail"))},e.prototype.isRootAccount=function(){return""===this.parentEmail()},e}();t.a=new u},,function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var o=n(51),i=n(39),a=n(24),r=n(46),s=n(25),c=n(55),l=Object.getOwnPropertyDescriptor;t.f=n(23)?l:function(e,t){if(e=a(e),t=r(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var n=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(2),r=n(6),s=n.n(r),c=n(12),l=n.n(c),u=n(8),d=n(1),p=n(47),h=n(9),f=function(){function e(){i()(this,e),this.capaOpenPGP=a.a.observable(!1),this.openpgp=null,this.openpgpkeys=a.a.observableArray([]),this.openpgpKeyring=null,this.openpgpkeysPublic=this.openpgpkeys.filter(function(e){return!(!e||e.isPrivate)}),this.openpgpkeysPrivate=this.openpgpkeys.filter(function(e){return!(!e||!e.isPrivate)})}return e.prototype.isSupported=function(){return!!this.openpgp},e.prototype.findKeyByHex=function(e,t){return s.a.find(e,function(e){return t&&e&&(t===e.id||-1<e.ids.indexOf(t))})},e.prototype.findPublicKeyByHex=function(e){return this.findKeyByHex(this.openpgpkeysPublic(),e)},e.prototype.findPrivateKeyByHex=function(e){return this.findKeyByHex(this.openpgpkeysPrivate(),e)},e.prototype.findPublicKeysByEmail=function(e){return s.a.compact(s.a.flatten(s.a.map(this.openpgpkeysPublic(),function(t){var n=t&&-1<t.emails.indexOf(e)?t:null;return n?n.getNativeKeys():[null]}),!0))},e.prototype.findPublicKeysBySigningKeyIds=function(e){var t=this;return s.a.compact(s.a.flatten(s.a.map(e,function(e){var n=e&&e.toHex?t.findPublicKeyByHex(e.toHex()):null;return n?n.getNativeKeys():[null]}),!0))},e.prototype.findPrivateKeysByEncryptionKeyIds=function(e,t,n){var o=this,i=Object(d.isArray)(e)?s.a.compact(s.a.flatten(s.a.map(e,function(e){var t=e&&e.toHex?o.findPrivateKeyByHex(e.toHex()):null;return t?n?[t]:t.getNativeKeys():[null]}),!0)):[];return 0===i.length&&Object(d.isNonEmptyArray)(t)&&(i=s.a.uniq(s.a.compact(s.a.flatten(s.a.map(t,function(e){var t=e?o.findAllPrivateKeysByEmailNotNative(e):null;return t?n?t:s.a.flatten(s.a.map(t,function(e){return e.getNativeKeys()}),!0):[null]}),!0)),function(e){return e.id})),i},e.prototype.findPublicKeyByEmailNotNative=function(e){return s.a.find(this.openpgpkeysPublic(),function(t){return t&&-1<t.emails.indexOf(e)})||null},e.prototype.findPrivateKeyByEmailNotNative=function(e){return s.a.find(this.openpgpkeysPrivate(),function(t){return t&&-1<t.emails.indexOf(e)})||null},e.prototype.findAllPublicKeysByEmailNotNative=function(e){return s.a.filter(this.openpgpkeysPublic(),function(t){return t&&-1<t.emails.indexOf(e)})||null},e.prototype.findAllPrivateKeysByEmailNotNative=function(e){return s.a.filter(this.openpgpkeysPrivate(),function(t){return t&&-1<t.emails.indexOf(e)})||null},e.prototype.findPrivateKeyByEmail=function(e,t){var n=null,o=s.a.find(this.openpgpkeysPrivate(),function(t){return t&&-1<t.emails.indexOf(e)});if(o)try{(n=o.getNativeKeys()[0]||null)&&n.decrypt(Object(d.pString)(t))}catch(e){n=null}return n},e.prototype.findSelfPrivateKey=function(e){return this.findPrivateKeyByEmail(p.a.email(),e)},e.prototype.decryptMessage=function(e,t,o){var i=this;if(e&&e.getEncryptionKeyIds){var a=this.findPrivateKeysByEncryptionKeyIds(e.getEncryptionKeyIds(),t,!0);if(a&&0<a.length)return Object(h.showScreenPopup)(n(213),[function(t){t?e.decrypt(t).then(function(e){var n=null;e&&(n=i.findPrivateKeyByHex(t.primaryKey.keyid.toHex()))?i.verifyMessage(e,function(t,i){o(n,e,t||null,i||null)}):o(n,e)},function(){o(null,null)}):o(null,null)},a]),!1}return o(null,null),!1},e.prototype.verifyMessage=function(e,t){if(e&&e.getSigningKeyIds){var n=e.getSigningKeyIds();if(n&&0<n.length){var o=this.findPublicKeysBySigningKeyIds(n);if(o&&0<o.length)try{var i=e.verify(o),a=s.a.find(s.a.isArray(i)?i:[],function(e){return e&&e.valid&&e.keyid});if(a&&a.keyid&&a.keyid&&a.keyid.toHex)return t(this.findPublicKeyByHex(a.keyid.toHex())),!0}catch(e){Object(d.log)(e)}return t(null,n),!1}}return t(null),!1},e.prototype.controlsHelper=function(e,t,n,o,i){n?(e.removeClass("error").addClass("success").attr("title",o),t.removeClass("error").addClass("success").attr("title",o)):(e.removeClass("success").addClass("error").attr("title",o),t.removeClass("success").addClass("error").attr("title",o)),Object(d.isUnd)(i)||e.text(Object(d.trim)(i))},e.domControlEncryptedClickHelper=function(e,t,n,o){return function(){var i=null,a=l()(this);if(a.hasClass("success"))return!1;try{i=e.openpgp.message.readArmored(n)}catch(e){Object(d.log)(e)}return i&&i.getText&&i.verify&&i.decrypt?(e.decryptMessage(i,o,function(n,o,i,r){if(o)if(i)e.controlsHelper(t,a,!0,Object(u.i18n)("PGP_NOTIFICATIONS/GOOD_SIGNATURE",{USER:i.user+" ("+i.id+")"}),o.getText());else if(n){var c=Object(d.isNonEmptyArray)(r)?r:null,l=c?s.a.compact(s.a.map(c,function(e){return e&&e.toHex?e.toHex():null})).join(", "):"";e.controlsHelper(t,a,!1,Object(u.i18n)("PGP_NOTIFICATIONS/UNVERIFIRED_SIGNATURE")+(l?" ("+l+")":""),o.getText())}else e.controlsHelper(t,a,!1,Object(u.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR"));else e.controlsHelper(t,a,!1,Object(u.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR"))}),!1):(e.controlsHelper(t,a,!1,Object(u.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR")),!1)}},e.domControlSignedClickHelper=function(e,t,n){return function(){var o=null,i=l()(this);if(i.hasClass("success")||i.hasClass("error"))return!1;try{o=e.openpgp.cleartext.readArmored(n)}catch(e){Object(d.log)(e)}return o&&o.getText&&o.verify?(e.verifyMessage(o,function(n,a){if(n)e.controlsHelper(t,i,!0,Object(u.i18n)("PGP_NOTIFICATIONS/GOOD_SIGNATURE",{USER:n.user+" ("+n.id+")"}),o.getText());else{var r=Object(d.isNonEmptyArray)(a)?a:null,c=r?s.a.compact(s.a.map(r,function(e){return e&&e.toHex?e.toHex():null})).join(", "):"";e.controlsHelper(t,i,!1,Object(u.i18n)("PGP_NOTIFICATIONS/UNVERIFIRED_SIGNATURE")+(c?" ("+c+")":""))}}),!1):(e.controlsHelper(t,i,!1,Object(u.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR")),!1)}},e.prototype.initMessageBodyControls=function(t,n){if(t&&!t.hasClass("inited")){t.addClass("inited");var o=t.hasClass("encrypted"),i=t.hasClass("signed"),a=n?n.getEmails(["from","to","cc"]):[],r=null;if(o||i){var s=t.text();t.data("openpgp-original",s),o?r=l()('<div class="b-openpgp-control"><i class="icon-lock"></i></div>').attr("title",Object(u.i18n)("MESSAGE/PGP_ENCRYPTED_MESSAGE_DESC")).on("click",e.domControlEncryptedClickHelper(this,t,s,a)):i&&(r=l()('<div class="b-openpgp-control"><i class="icon-lock"></i></div>').attr("title",Object(u.i18n)("MESSAGE/PGP_SIGNED_MESSAGE_DESC")).on("click",e.domControlSignedClickHelper(this,t,s))),r&&t.before(r).before("<div></div>")}}},e}();t.a=new f},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(2),u=n(1),d=n(3),p=function(e){function t(n){i()(this,t);var o=r()(this,e.call(this));return o.value=n.value||"",o.size=n.size||0,o.label=n.label||"",o.preLabel=n.preLabel||"",o.enable=!!Object(u.isUnd)(n.enable)||n.enable,o.trigger=n.trigger&&n.trigger.subscribe?n.trigger:null,o.placeholder=n.placeholder||"",o.labeled=!Object(u.isUnd)(n.label),o.preLabeled=!Object(u.isUnd)(n.preLabel),o.triggered=!Object(u.isUnd)(n.trigger)&&!!o.trigger,o.classForTrigger=l.a.observable(""),o.className=l.a.computed(function(){var e=l.a.unwrap(o.size),t=o.trigger?" "+Object(u.trim)("settings-saved-trigger-input "+o.classForTrigger()):"";return(0<e?"span"+e:"")+t}),!Object(u.isUnd)(n.width)&&n.element&&n.element.find("input,select,textarea").css("width",n.width),o.disposable.push(o.className),o.trigger&&(o.setTriggerState(o.trigger()),o.disposable.push(o.trigger.subscribe(o.setTriggerState,o))),o}return c()(t,e),t.prototype.setTriggerState=function(e){switch(Object(u.pInt)(e)){case d.SaveSettingsStep.TrueResult:this.classForTrigger("success");break;case d.SaveSettingsStep.FalseResult:this.classForTrigger("error");break;default:this.classForTrigger("")}},t}(n(18).a)},function(e,t,n){e.exports=!n(23)&&!n(30)(function(){return 7!=Object.defineProperty(n(59)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(2),c=n(12),l=n.n(c),u=n(10),d=function(){function e(){var t=this;i()(this,e),this.google={},this.twitter={},this.facebook={},this.dropbox={},this.google.enabled=s.a.observable(!1),this.google.clientID=s.a.observable(""),this.google.clientSecret=s.a.observable(""),this.google.apiKey=s.a.observable(""),this.google.loading=s.a.observable(!1),this.google.userName=s.a.observable(""),this.google.loggined=s.a.computed(function(){return""!==t.google.userName()}),this.google.capa={},this.google.capa.auth=s.a.observable(!1),this.google.capa.authFast=s.a.observable(!1),this.google.capa.drive=s.a.observable(!1),this.google.capa.preview=s.a.observable(!1),this.google.require={},this.google.require.clientSettings=s.a.computed(function(){return t.google.enabled()&&(t.google.capa.auth()||t.google.capa.drive())}),this.google.require.apiKeySettings=s.a.computed(function(){return t.google.enabled()&&t.google.capa.drive()}),this.facebook.enabled=s.a.observable(!1),this.facebook.appID=s.a.observable(""),this.facebook.appSecret=s.a.observable(""),this.facebook.loading=s.a.observable(!1),this.facebook.userName=s.a.observable(""),this.facebook.supported=s.a.observable(!1),this.facebook.loggined=s.a.computed(function(){return""!==t.facebook.userName()}),this.twitter.enabled=s.a.observable(!1),this.twitter.consumerKey=s.a.observable(""),this.twitter.consumerSecret=s.a.observable(""),this.twitter.loading=s.a.observable(!1),this.twitter.userName=s.a.observable(""),this.twitter.loggined=s.a.computed(function(){return""!==t.twitter.userName()}),this.dropbox.enabled=s.a.observable(!1),this.dropbox.apiKey=s.a.observable("")}return e.prototype.populate=function(){this.google.enabled(!!u.settingsGet("AllowGoogleSocial")),this.google.clientID(u.settingsGet("GoogleClientID")),this.google.clientSecret(u.settingsGet("GoogleClientSecret")),this.google.apiKey(u.settingsGet("GoogleApiKey")),this.google.capa.auth(!!u.settingsGet("AllowGoogleSocialAuth")),this.google.capa.authFast(!!u.settingsGet("AllowGoogleSocialAuthFast")),this.google.capa.drive(!!u.settingsGet("AllowGoogleSocialDrive")),this.google.capa.preview(!!u.settingsGet("AllowGoogleSocialPreview")),this.facebook.enabled(!!u.settingsGet("AllowFacebookSocial")),this.facebook.appID(u.settingsGet("FacebookAppID")),this.facebook.appSecret(u.settingsGet("FacebookAppSecret")),this.facebook.supported(!!u.settingsGet("SupportedFacebookSocial")),this.twitter.enabled=s.a.observable(!!u.settingsGet("AllowTwitterSocial")),this.twitter.consumerKey=s.a.observable(u.settingsGet("TwitterConsumerKey")),this.twitter.consumerSecret=s.a.observable(u.settingsGet("TwitterConsumerSecret")),this.dropbox.enabled(!!u.settingsGet("AllowDropboxSocial")),this.dropbox.apiKey(u.settingsGet("DropboxApiKey"))},e.prototype.appendDropbox=function(){if(!r.a.Dropbox&&this.dropbox.enabled()&&this.dropbox.apiKey()&&!r.a.document.getElementById("dropboxjs")){var e=r.a.document.createElement("script");e.type="text/javascript",e.src="https://www.dropbox.com/static/api/2/dropins.js",l()(e).attr("id","dropboxjs").attr("data-app-key",this.dropbox.apiKey()),r.a.document.body.appendChild(e)}},e}();t.a=new d},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(2),r=n(1),s=n(10),c=function(){function e(){i()(this,e),this.languages=a.a.observableArray([]),this.languagesAdmin=a.a.observableArray([]),this.language=a.a.observable("").extend({limitedList:this.languages}).extend({reversible:!0}),this.languageAdmin=a.a.observable("").extend({limitedList:this.languagesAdmin}).extend({reversible:!0}),this.userLanguage=a.a.observable(""),this.userLanguageAdmin=a.a.observable("")}return e.prototype.populate=function(){var e=s.appSettingsGet("languages"),t=s.appSettingsGet("languagesAdmin");this.languages(Object(r.isArray)(e)?e:[]),this.languagesAdmin(Object(r.isArray)(t)?t:[]),this.language(s.settingsGet("Language")),this.languageAdmin(s.settingsGet("LanguageAdmin")),this.userLanguage(s.settingsGet("UserLanguage")),this.userLanguageAdmin(s.settingsGet("UserLanguageAdmin"))},e}();t.a=new c},function(e,t,n){var o=n(78);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var o=n(29),i=n(21).document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},function(e,t){e.exports=!0},function(e,t){e.exports={}},function(e,t,n){var o=n(35),i=n(116),a=n(68),r=n(66)("IE_PROTO"),s=function(){},c=function(){var e,t=n(59)("iframe"),o=a.length;for(t.style.display="none",n(120).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;o--;)delete c.prototype[a[o]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=o(e),n=new s,s.prototype=null,n[r]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var o=n(90),i=n(68);e.exports=Object.keys||function(e){return o(e,i)}},function(e,t,n){var o=n(67)("keys"),i=n(52);e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){var o=n(21),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var o=n(26).f,i=n(25),a=n(36)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&o(e,a,{configurable:!0,value:t})}},function(e,t,n){t.f=n(36)},function(e,t,n){var o=n(21),i=n(22),a=n(62),r=n(70),s=n(26).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:o.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:r.f(e)})}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(2),r=n(1),s=n(10),c=function(){function e(){i()(this,e),this.themes=a.a.observableArray([]),this.themeBackgroundName=a.a.observable(""),this.themeBackgroundHash=a.a.observable(""),this.theme=a.a.observable("").extend({limitedList:this.themes})}return e.prototype.populate=function(){var e=s.appSettingsGet("themes");this.themes(Object(r.isArray)(e)?e:[]),this.theme(s.settingsGet("Theme")),this.themeBackgroundName(s.settingsGet("UserBackgroundName")),this.themeBackgroundHash(s.settingsGet("UserBackgroundHash"))},e}();t.a=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(18),u=function(e){function t(){return i()(this,t),r()(this,e.apply(this,arguments))}return c()(t,e),t}(n(96).a);t.default=Object(l.b)(u,"CheckboxComponent")},,function(e,t){e.exports=window.moment},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),i=n.n(o),a=n(6),r=n.n(a),s=n(86),c=n.n(s),l=n(1),u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];i()(this,e),this.oCross=null,this.sScreenName=t,this.aViewModels=Object(l.isArray)(n)?n:[]}return e.prototype.viewModels=function(){return this.aViewModels},e.prototype.screenName=function(){return this.sScreenName},e.prototype.routes=function(){return null},e.prototype.__cross=function(){return this.oCross},e.prototype.__start=function(){var e=null,t=null,n=this.routes();Object(l.isNonEmptyArray)(n)&&(t=r.a.bind(this.onRoute||l.noop,this),e=c.a.create(),n.forEach(function(n){n&&e&&(e.addRoute(n[0],t).rules=n[1])}),this.oCross=e)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AskPopupView",function(){return v}),n.d(t,"default",function(){return v});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(2),p=n(19),h=n.n(p),f=n(3),m=n(1),b=n(8),g=n(9),y=n(13),v=(o=Object(g.popup)({name:"View/Popup/Ask",templateID:"PopupsAsk"}))(i=function(e){function t(){r()(this,t);var n=c()(this,e.call(this));return n.askDesc=d.a.observable(""),n.yesButton=d.a.observable(""),n.noButton=d.a.observable(""),n.yesFocus=d.a.observable(!1),n.noFocus=d.a.observable(!1),n.fYesAction=null,n.fNoAction=null,n.bFocusYesOnShow=!0,n.bDisabeCloseOnEsc=!0,n.sDefaultKeyScope=f.KeyState.PopupAsk,n}return u()(t,e),t.prototype.clearPopup=function(){this.askDesc(""),this.yesButton(Object(b.i18n)("POPUPS_ASK/BUTTON_YES")),this.noButton(Object(b.i18n)("POPUPS_ASK/BUTTON_NO")),this.yesFocus(!1),this.noFocus(!1),this.fYesAction=null,this.fNoAction=null},t.prototype.yesClick=function(){this.cancelCommand(),Object(m.isFunc)(this.fYesAction)&&this.fYesAction.call(null)},t.prototype.noClick=function(){this.cancelCommand(),Object(m.isFunc)(this.fNoAction)&&this.fNoAction.call(null)},t.prototype.onShow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.clearPopup(),this.fYesAction=t||null,this.fNoAction=n||null,this.askDesc(e||""),o&&this.yesButton(o),i&&this.noButton(i),this.bFocusYesOnShow=!!a},t.prototype.onShowWithDelay=function(){this.bFocusYesOnShow&&this.yesFocus(!0)},t.prototype.onBuild=function(){var e=this;h()("tab, shift+tab, right, left",f.KeyState.PopupAsk,function(){return e.yesFocus()?e.noFocus(!0):e.yesFocus(!0),!1}),h()("esc",f.KeyState.PopupAsk,function(){return e.noClick(),!1})},t}(y.a))||i},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){n(80);var o=n(22).Object;e.exports=function(e,t){return o.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var o=n(24),i=n(50).f;n(82)("getOwnPropertyDescriptor",function(){return function(e,t){return i(o(e),t)}})},function(e,t,n){var o=n(60);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t,n){var o=n(32),i=n(22),a=n(30);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],r={};r[e]=t(n),o(o.S+o.F*a(function(){n(1)}),"Object",r)}},function(e,t){e.exports=window.progressJs},function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i.a.Promise||!i.a.Promise.all)throw new Error("Promises are not available your environment.");if(!e)throw new Error("src should not be empty.");return new i.a.Promise(function(n,o){var a=i.a.document.createElement("script");a.onload=function(){n(e)},a.onerror=function(){o(new Error(e))},a.async=!0===t,a.src=e,i.a.document.body.appendChild(a)})};var o=n(11),i=n.n(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"HtmlEditor",function(){return f}),n.d(t,"default",function(){return f});var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(6),c=n.n(s),l=n(12),u=n.n(l),d=n(7),p=n(3),h=n(10),f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i()(this,e),this.blurTimer=0,this.__resizable=!1,this.__inited=!1,this.onBlur=null,this.onReady=null,this.onModeChange=null,this.onBlur=n,this.onReady=o,this.onModeChange=a,this.element=t,this.$element=u()(t),this.resize=c.a.throttle(c.a.bind(this.resizeEditor,this),100),this.init()}return e.prototype.runOnBlur=function(){this.onBlur&&this.onBlur()},e.prototype.blurTrigger=function(){var e=this;this.onBlur&&(r.a.clearTimeout(this.blurTimer),this.blurTimer=r.a.setTimeout(function(){e.runOnBlur()},p.Magics.Time200ms))},e.prototype.focusTrigger=function(){this.onBlur&&r.a.clearTimeout(this.blurTimer)},e.prototype.isHtml=function(){return!!this.editor&&"wysiwyg"===this.editor.mode},e.prototype.clearCachedSignature=function(){this.editor&&this.editor.execCommand("insertSignature",{clearCache:!0})},e.prototype.setSignature=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.editor&&this.editor.execCommand("insertSignature",{isHtml:t,insertBefore:n,signature:e})},e.prototype.checkDirty=function(){return!!this.editor&&this.editor.checkDirty()},e.prototype.resetDirty=function(){this.editor&&this.editor.resetDirty()},e.prototype.getData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="";if(this.editor)try{t="plain"===this.editor.mode&&this.editor.plugins.plain&&this.editor.__plain?this.editor.__plain.getRawData():e?'<div data-html-editor-font-wrapper="true" style="font-family: arial, sans-serif; font-size: 13px;">'+this.editor.getData()+"</div>":this.editor.getData()}catch(e){}return t},e.prototype.getDataWithHtmlMark=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(this.isHtml()?":HTML:":"")+this.getData(e)},e.prototype.modeToggle=function(e,t){if(this.editor){try{e?"plain"===this.editor.mode&&this.editor.setMode("wysiwyg"):"wysiwyg"===this.editor.mode&&this.editor.setMode("plain")}catch(e){}t&&this.resize()}},e.prototype.setHtmlOrPlain=function(e,t){":HTML:"===e.substr(0,6)?this.setHtml(e.substr(6),t):this.setPlain(e,t)},e.prototype.setHtml=function(e,t){if(this.editor&&this.__inited){this.clearCachedSignature(),this.modeToggle(!0),e=e.replace(/<p[^>]*><\/p>/gi,"");try{this.editor.setData(e)}catch(e){}t&&this.focus()}},e.prototype.replaceHtml=function(e,t){if(this.editor&&this.__inited&&"wysiwyg"===this.editor.mode)try{this.editor.setData(this.editor.getData().replace(e,t))}catch(e){}},e.prototype.setPlain=function(e,t){if(this.editor&&this.__inited){if(this.clearCachedSignature(),this.modeToggle(!1),"plain"===this.editor.mode&&this.editor.plugins.plain&&this.editor.__plain)this.editor.__plain.setRawData(e);else try{this.editor.setData(e)}catch(e){}t&&this.focus()}},e.prototype.init=function(){var e=this;if(this.element&&!this.editor){var t=function(){var t=d.htmlEditorDefaultConfig,n=h.settingsGet("Language"),o=!!h.appSettingsGet("allowHtmlEditorSourceButton"),i=!!h.appSettingsGet("allowHtmlEditorBitiButtons");!o&&i||t.toolbarGroups.__cfgInited||(t.toolbarGroups.__cfgInited=!0,o&&(t.removeButtons=t.removeButtons.replace(",Source","")),i||(t.removePlugins+=(t.removePlugins?",":"")+"bidi")),t.enterMode=r.a.CKEDITOR.ENTER_BR,t.shiftEnterMode=r.a.CKEDITOR.ENTER_P,t.language=d.htmlEditorLangsMap[(n||"en").toLowerCase()]||"en",r.a.CKEDITOR.env&&(r.a.CKEDITOR.env.isCompatible=!0),e.editor=r.a.CKEDITOR.appendTo(e.element,t),e.editor.on("key",function(e){return!e||!e.data||p.EventKeyCode.Tab!==e.data.keyCode}),e.editor.on("blur",function(){e.blurTrigger()}),e.editor.on("mode",function(){e.blurTrigger(),e.onModeChange&&e.onModeChange("plain"!==e.editor.mode)}),e.editor.on("focus",function(){e.focusTrigger()}),r.a.FileReader&&e.editor.on("drop",function(t){if(0<t.data.dataTransfer.getFilesCount()){var n=t.data.dataTransfer.getFile(0);if(n&&r.a.FileReader&&t.data.dataTransfer.id&&n.type&&n.type.match(/^image/i)){var o="[img="+t.data.dataTransfer.id+"]",i=new r.a.FileReader;i.onloadend=function(){i.result&&e.replaceHtml(o,'<img src="'+i.result+'" />')},i.readAsDataURL(n),t.data.dataTransfer.setData("text/html",o)}}}),e.editor.on("instanceReady",function(){e.editor.removeMenuItem&&(e.editor.removeMenuItem("cut"),e.editor.removeMenuItem("copy"),e.editor.removeMenuItem("paste")),e.__resizable=!0,e.__inited=!0,e.resize(),e.onReady&&e.onReady()})};r.a.CKEDITOR?t():r.a.__initEditor=t}},e.prototype.focus=function(){if(this.editor)try{this.editor.focus()}catch(e){}},e.prototype.hasFocus=function(){if(this.editor)try{return!!this.editor.focusManager.hasFocus}catch(e){}return!1},e.prototype.blur=function(){if(this.editor)try{this.editor.focusManager.blur(!0)}catch(e){}},e.prototype.resizeEditor=function(){if(this.editor&&this.__resizable)try{this.editor.resize(this.$element.width(),this.$element.innerHeight())}catch(e){}},e.prototype.setReadOnly=function(e){if(this.editor)try{this.editor.setReadOnly(!!e)}catch(e){}},e.prototype.clear=function(e){this.setHtml("",e)},e}()},function(e,t){e.exports=window.crossroads},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=o(n(111)),a=o(n(127)),r="function"==typeof a.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};t.default="function"==typeof a.default&&"symbol"===r(i.default)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":r(e)}},function(e,t,n){"use strict";var o=n(62),i=n(32),a=n(89),r=n(28),s=n(25),c=n(63),l=n(115),u=n(69),d=n(121),p=n(36)("iterator"),h=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,m,b,g,y){l(n,t,m);var v,S,O,w=function(e){if(!h&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",C="values"==b,A=!1,E=e.prototype,F=E[p]||E["@@iterator"]||b&&E[b],j=F||w(b),N=b?C?w("entries"):j:void 0,R="Array"==t?E.entries||F:F;if(R&&(O=d(R.call(new e)))!==Object.prototype&&O.next&&(u(O,T,!0),o||s(O,p)||r(O,p,f)),C&&F&&"values"!==F.name&&(A=!0,j=function(){return F.call(this)}),o&&!y||!h&&!A&&E[p]||r(E,p,j),c[t]=j,c[T]=f,b)if(v={values:C?j:w("values"),keys:g?j:w("keys"),entries:N},y)for(S in v)S in E||a(E,S,v[S]);else i(i.P+i.F*(h||A),t,v);return v}},function(e,t,n){e.exports=n(28)},function(e,t,n){var o=n(25),i=n(24),a=n(117)(!1),r=n(66)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,l=[];for(n in s)n!=r&&o(s,n)&&l.push(n);for(;t.length>c;)o(s,n=t[c++])&&(~a(l,n)||l.push(n));return l}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var o=n(90),i=n(68).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,i)}},function(e,t,n){"use strict";t.b=function(e,t){return!!c&&c.set("p"+e,t)},t.a=function(e){return c?c.get("p"+e):null};var o=n(6),i=n.n(o),a=n(218),r=n(220),s=i.a.find([r.a,a.a],function(e){return e&&e.supported()}),c=s?new s:null},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(11),u=n.n(l),d=n(221),p=function(e){function t(){i()(this,t);var n=r()(this,e.call(this));return n.foldersTimeout=0,n}return c()(t,e),t.prototype.foldersReload=function(e){return this.abort("Folders").postRequest("Folders",e).then(function(e){return d.a.foldersList(e.Result),d.a.foldersAdditionalParameters(e.Result),!0})},t.prototype.foldersReloadWithTimeout=function(e){var t=this;this.setTrigger(e,!0),u.a.clearTimeout(this.foldersTimeout),this.foldersTimeout=u.a.setTimeout(function(){t.foldersReload(e)},500)},t.prototype.folderDelete=function(e,t){return this.postRequest("FolderDelete",t,{Folder:e})},t.prototype.folderCreate=function(e,t,n){return this.postRequest("FolderCreate",n,{Folder:e,Parent:t})},t.prototype.folderRename=function(e,t,n){return this.postRequest("FolderRename",n,{Folder:e,NewFolderName:t})},t.prototype.attachmentsActions=function(e,t,n){return this.postRequest("AttachmentsActions",n,{Do:e,Hashes:t})},t.prototype.welcomeClose=function(){return this.postRequest("WelcomeClose")},t}(n(223).a);t.a=new p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"LanguagesPopupView",function(){return g}),n.d(t,"default",function(){return g});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(6),p=n.n(d),h=n(2),f=n(1),m=n(9),b=n(13),g=(o=Object(m.popup)({name:"View/Popup/Languages",templateID:"PopupsLanguages"}))(i=function(e){function t(){r()(this,t);var n=c()(this,e.call(this));return n.fLang=null,n.userLanguage=h.a.observable(""),n.langs=h.a.observableArray([]),n.languages=h.a.computed(function(){var e=n.userLanguage();return p.a.map(n.langs(),function(t){return{key:t,user:t===e,selected:h.a.observable(!1),fullName:Object(f.convertLangName)(t)}})}),n.langs.subscribe(function(){n.setLanguageSelection()}),n}return u()(t,e),t.prototype.languageTooltipName=function(e){var t=Object(f.convertLangName)(e,!0);return Object(f.convertLangName)(e,!1)===t?"":t},t.prototype.setLanguageSelection=function(){var e=this.fLang?h.a.unwrap(this.fLang):"";p.a.each(this.languages(),function(t){t.selected(t.key===e)})},t.prototype.onBeforeShow=function(){this.fLang=null,this.userLanguage(""),this.langs([])},t.prototype.onShow=function(e,t,n){this.fLang=e,this.userLanguage(n||""),this.langs(t)},t.prototype.changeLanguage=function(e){this.fLang&&this.fLang(e),this.cancelCommand()},t}(b.a))||i},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(2),u=n(1),d=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,t);var o=r()(this,e.call(this));return o.value=n.value,!Object(u.isUnd)(o.value)&&o.value.subscribe||(o.value=l.a.observable(!Object(u.isUnd)(o.value)&&!!o.value)),o.enable=n.enable,!Object(u.isUnd)(o.enable)&&o.enable.subscribe||(o.enable=l.a.observable(!!Object(u.isUnd)(o.enable)||!!o.enable)),o.disable=n.disable,!Object(u.isUnd)(o.disable)&&o.disable.subscribe||(o.disable=l.a.observable(!Object(u.isUnd)(o.disable)&&!!o.disable)),o.label=n.label||"",o.inline=!Object(u.isUnd)(n.inline)&&n.inline,o.readOnly=!Object(u.isUnd)(n.readOnly)&&!!n.readOnly,o.inverted=!Object(u.isUnd)(n.inverted)&&!!n.inverted,o.labeled=!Object(u.isUnd)(n.label),o.labelAnimated=!!n.labelAnimated,o}return c()(t,e),t.prototype.click=function(){this.readOnly||!this.enable()||this.disable()||this.value(!this.value())},t}(n(18).a)},function(e,t,n){"use strict";function o(e){if(e in r.a&&r.a[e]&&r.a[e].setItem){var t=r.a[e],n="testLocalStorage_"+r.a.Math.random();try{if(t.setItem(n,n),n===t.getItem(n))return t.removeItem(n),!0}catch(e){}}return!1}function i(){d(s,""),h()}t.d=o,t.c=function(){return u(s)},t.e=function(){var e="AuthAccountHash",t=r.a.__rlah_data();d(s,t&&t[e]?t[e]:""),h()},t.b=i,t.a=function(){return p()>f()+36e5&&(i(),!0)};var a=n(11),r=n.n(a),s="__rlA",c=o("sessionStorage")?r.a.sessionStorage||null:null,l=r.a.top||r.a||null,u=function(e){var t=null;if(c)t=c.getItem(e)||null;else if(l&&r.a.JSON){var n=l.name&&"{"===l.name.toString().substr(0,1)?r.a.JSON.parse(l.name.toString()):null;t=n?n[e]||null:null}return t},d=function(e,t){if(c)c.setItem(e,t);else if(l&&r.a.JSON){var n=l.name&&"{"===l.name.toString().substr(0,1)?r.a.JSON.parse(l.name.toString()):null;(n=n||{})[e]=t,l.name=r.a.JSON.stringify(n)}},p=function(){return r.a.Math.round((new r.a.Date).getTime()/1e3)},h=function(){return d("__rlT",p())},f=function(){var e=u("__rlT",0);return e?r.a.parseInt(e,10)||0:0};r.a.setInterval(h,6e4)},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(6),r=n.n(a),s=n(2);t.a=new function e(){var t=this;i()(this,e),this.identities=s.a.observableArray([]),this.identities.loading=s.a.observable(!1).extend({throttle:100}),this.identitiesIDS=s.a.computed(function(){return r.a.compact(r.a.map(t.identities(),function(e){return e?e.id:null}))})}},function(e,t){e.exports=window.Jua},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FolderSystemPopupView",function(){return T}),n.d(t,"default",function(){return T});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(6),p=n.n(d),h=n(2),f=n(3),m=n(20),b=n(1),g=n(8),y=n(38),v=n(10),S=n(17),O=n(9),w=n(13),T=(o=Object(O.popup)({name:"View/Popup/FolderSystem",templateID:"PopupsFolderSystem"}))(i=function(e){function t(){r()(this,t);var n=c()(this,e.call(this));n.sChooseOnText="",n.sUnuseText="",Object(g.initOnStartOrLangChange)(function(){n.sChooseOnText=Object(g.i18n)("POPUPS_SYSTEM_FOLDERS/SELECT_CHOOSE_ONE"),n.sUnuseText=Object(g.i18n)("POPUPS_SYSTEM_FOLDERS/SELECT_UNUSE_NAME")}),n.notification=h.a.observable(""),n.folderSelectList=h.a.computed(function(){return Object(b.folderListOptionsBuilder)([],y.a.folderList(),y.a.folderListSystemNames(),[["",n.sChooseOnText],[m.r,n.sUnuseText]],null,null,null,null,null,!0)}),n.sentFolder=y.a.sentFolder,n.draftFolder=y.a.draftFolder,n.spamFolder=y.a.spamFolder,n.trashFolder=y.a.trashFolder,n.archiveFolder=y.a.archiveFolder;var o=function(){v.settingsSet("SentFolder",y.a.sentFolder()),v.settingsSet("DraftFolder",y.a.draftFolder()),v.settingsSet("SpamFolder",y.a.spamFolder()),v.settingsSet("TrashFolder",y.a.trashFolder()),v.settingsSet("ArchiveFolder",y.a.archiveFolder())},i=p.a.debounce(function(){o(),S.a.saveSystemFolders(b.noop,{SentFolder:y.a.sentFolder(),DraftFolder:y.a.draftFolder(),SpamFolder:y.a.spamFolder(),TrashFolder:y.a.trashFolder(),ArchiveFolder:y.a.archiveFolder(),NullFolder:"NullFolder"})},f.Magics.Time1s),a=function(){o(),i()};return y.a.sentFolder.subscribe(a),y.a.draftFolder.subscribe(a),y.a.spamFolder.subscribe(a),y.a.trashFolder.subscribe(a),y.a.archiveFolder.subscribe(a),n.defautOptionsAfterRender=b.defautOptionsAfterRender,n}return u()(t,e),t.prototype.onShow=function(){var e="";switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.SetSystemFoldersNotification.None){case f.SetSystemFoldersNotification.Sent:e=Object(g.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_SENT");break;case f.SetSystemFoldersNotification.Draft:e=Object(g.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_DRAFTS");break;case f.SetSystemFoldersNotification.Spam:e=Object(g.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_SPAM");break;case f.SetSystemFoldersNotification.Trash:e=Object(g.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_TRASH");break;case f.SetSystemFoldersNotification.Archive:e=Object(g.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_ARCHIVE")}this.notification(e)},t}(w.a))||i},,,,function(e,t,n){"use strict";var o=n(11),i=n.n(o),a=n(1),r=n(7),s=n(3),c=n(33),l=n(8),u=n(44);t.a=function(e){r.data.__APP__=e,r.$win.on("keydown",a.killCtrlACtrlS).on("unload",function(){r.data.bUnload=!0}),r.$html.addClass(r.bMobileDevice?"mobile":"no-mobile").on("click.dropdown.data-api",a.detectDropdownVisibility);var t=i.a.rl||{};t.i18n=l.i18n,t.createCommand=a.createCommandLegacy,t.addSettingsViewModel=c.b,t.addSettingsViewModelForAdmin=c.c,t.addHook=c.a,t.settingsGet=c.d,t.pluginSettingsGet=c.h,t.pluginRemoteRequest=c.e,t.EmailModel=u.EmailModel,t.Enums=s,i.a.rl=t,i.a.__APP_BOOT=function(t){Object(a.domReady)(function(){i.a.setTimeout(function(){i.a.rainloopTEMPLATES&&i.a.rainloopTEMPLATES[0]?(i.a.document.getElementById("rl-templates").innerHTML=i.a.rainloopTEMPLATES[0],i.a.setTimeout(function(){r.$html.removeClass("no-js rl-booted-trigger").addClass("rl-booted"),e.bootstart()},s.Magics.Time10ms)):t(),i.a.__APP_BOOT=null},s.Magics.Time10ms)})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(11),i=n.n(o).a.Opentip||{};i.styles=i.styles||{},i.styles.rainloop={extends:"standard",fixed:!0,target:!0,delay:.2,hideDelay:0,hideEffect:"fade",hideEffectDuration:.2,showEffect:"fade",showEffectDuration:.2,showOn:"mouseover click",removeElementsOnHide:!0,background:"#fff",shadow:!1,borderColor:"#999",borderRadius:2,borderWidth:1},i.styles.rainloopTip={extends:"rainloop",delay:.4,group:"rainloopTips"},i.styles.rainloopErrorTip={extends:"rainloop",className:"rainloopErrorTip"}},function(e,t,n){!function(t,o){"use strict";var i;try{i=n(75)}catch(e){}e.exports=o(i)}(0,function(e){"use strict";var t="function"==typeof e,n=!!window.addEventListener,o=window.document,i=window.setTimeout,a=function(e,t,o,i){n?e.addEventListener(t,o,!!i):e.attachEvent("on"+t,o)},r=function(e,t,o,i){n?e.removeEventListener(t,o,!!i):e.detachEvent("on"+t,o)},s=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},c=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},l=function(e,t){c(e,t)||(e.className=""===e.className?t:e.className+" "+t)},u=function(e,t){e.className=s((" "+e.className+" ").replace(" "+t+" "," "))},d=function(e){return/Array/.test(Object.prototype.toString.call(e))},p=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},h=function(e){var t=e.getDay();return 0===t||6===t},f=function(e){return e%4==0&&e%100!=0||e%400==0},m=function(e,t){return[31,f(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},b=function(e){p(e)&&e.setHours(0,0,0,0)},g=function(e,t){return e.getTime()===t.getTime()},y=function(e,t,n){var o,i;for(o in t)(i=void 0!==e[o])&&"object"==typeof t[o]&&null!==t[o]&&void 0===t[o].nodeName?p(t[o])?n&&(e[o]=new Date(t[o].getTime())):d(t[o])?n&&(e[o]=t[o].slice(0)):e[o]=y({},t[o],n):!n&&i||(e[o]=t[o]);return e},v=function(e,t,n){var i;o.createEvent?((i=o.createEvent("HTMLEvents")).initEvent(t,!0,!1),i=y(i,n),e.dispatchEvent(i)):o.createEventObject&&(i=o.createEventObject(),i=y(i,n),e.fireEvent("on"+t,i))},S=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},O={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},w=function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},T=function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),e.enableSelectionDaysInNextAndPreviousMonths||t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},C=function(e,t,n){var o=new Date(n,0,1);return'<td class="pika-week">'+Math.ceil(((new Date(n,t,e)-o)/864e5+o.getDay()+1)/7)+"</td>"},A=function(e,t,n,o){return'<tr class="pika-row'+(n?" pick-whole-week":"")+(o?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"},E=function(e){return"<tbody>"+e.join("")+"</tbody>"},F=function(e){var t,n=[];for(e.showWeekNumber&&n.push("<th></th>"),t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+w(e,t)+'">'+w(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"},j=function(e,t,n,o,i,a){var r,s,c,l,u,p=e._o,h=n===p.minYear,f=n===p.maxYear,m='<div id="'+a+'" class="pika-title" role="heading" aria-live="assertive">',b=!0,g=!0;for(c=[],r=0;r<12;r++)c.push('<option value="'+(n===i?r-t:12+r-t)+'"'+(r===o?' selected="selected"':"")+(h&&r<p.minMonth||f&&r>p.maxMonth?'disabled="disabled"':"")+">"+p.i18n.months[r]+"</option>");for(l='<div class="pika-label">'+p.i18n.months[o]+'<select class="pika-select pika-select-month" tabindex="-1">'+c.join("")+"</select></div>",d(p.yearRange)?(r=p.yearRange[0],s=p.yearRange[1]+1):(r=n-p.yearRange,s=1+n+p.yearRange),c=[];r<s&&r<=p.maxYear;r++)r>=p.minYear&&c.push('<option value="'+r+'"'+(r===n?' selected="selected"':"")+">"+r+"</option>");return u='<div class="pika-label">'+n+p.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+c.join("")+"</select></div>",p.showMonthAfterYear?m+=u+l:m+=l+u,h&&(0===o||p.minMonth>=o)&&(b=!1),f&&(11===o||p.maxMonth<=o)&&(g=!1),0===t&&(m+='<button class="pika-prev'+(b?"":" is-disabled")+'" type="button">'+p.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(m+='<button class="pika-next'+(g?"":" is-disabled")+'" type="button">'+p.i18n.nextMonth+"</button>"),m+="</div>"},N=function(e,t,n){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+F(e)+E(t)+"</table>"},R=function(r){var s=this,l=s.config(r);s._onMouseDown=function(e){if(s._v){var t=(e=e||window.event).target||e.srcElement;if(t)if(c(t,"is-disabled")||(!c(t,"pika-button")||c(t,"is-empty")||c(t.parentNode,"is-disabled")?c(t,"pika-prev")?s.prevMonth():c(t,"pika-next")&&s.nextMonth():(s.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),l.bound&&i(function(){s.hide(),l.blurFieldOnSelect&&l.field&&l.field.blur()},100))),c(t,"pika-select"))s._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},s._onChange=function(e){var t=(e=e||window.event).target||e.srcElement;t&&(c(t,"pika-select-month")?s.gotoMonth(t.value):c(t,"pika-select-year")&&s.gotoYear(t.value))},s._onKeyChange=function(e){if(e=e||window.event,s.isVisible())switch(e.keyCode){case 13:case 27:l.field&&l.field.blur();break;case 37:e.preventDefault(),s.adjustDate("subtract",1);break;case 38:s.adjustDate("subtract",7);break;case 39:s.adjustDate("add",1);break;case 40:s.adjustDate("add",7)}},s._onInputChange=function(n){var o;n.firedBy!==s&&(o=l.parse?l.parse(l.field.value,l.format):t?(o=e(l.field.value,l.format,l.formatStrict))&&o.isValid()?o.toDate():null:new Date(Date.parse(l.field.value)),p(o)&&s.setDate(o),s._v||s.show())},s._onInputFocus=function(){s.show()},s._onInputClick=function(){s.show()},s._onInputBlur=function(){var e=o.activeElement;do{if(c(e,"pika-single"))return}while(e=e.parentNode);s._c||(s._b=i(function(){s.hide()},50)),s._c=!1},s._onClick=function(e){var t=(e=e||window.event).target||e.srcElement,o=t;if(t){!n&&c(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),a(t,"change",s._onChange)));do{if(c(o,"pika-single")||o===l.trigger)return}while(o=o.parentNode);s._v&&t!==l.trigger&&o!==l.trigger&&s.hide()}},s.el=o.createElement("div"),s.el.className="pika-single"+(l.isRTL?" is-rtl":"")+(l.theme?" "+l.theme:""),a(s.el,"mousedown",s._onMouseDown,!0),a(s.el,"touchend",s._onMouseDown,!0),a(s.el,"change",s._onChange),a(o,"keydown",s._onKeyChange),l.field&&(l.container?l.container.appendChild(s.el):l.bound?o.body.appendChild(s.el):l.field.parentNode.insertBefore(s.el,l.field.nextSibling),a(l.field,"change",s._onInputChange),l.defaultDate||(t&&l.field.value?l.defaultDate=e(l.field.value,l.format).toDate():l.defaultDate=new Date(Date.parse(l.field.value)),l.setDefaultDate=!0));var u=l.defaultDate;p(u)?l.setDefaultDate?s.setDate(u,!0):s.gotoDate(u):s.gotoDate(new Date),l.bound?(this.hide(),s.el.className+=" is-bound",a(l.trigger,"click",s._onInputClick),a(l.trigger,"focus",s._onInputFocus),a(l.trigger,"blur",s._onInputBlur)):this.show()};return R.prototype={config:function(e){this._o||(this._o=y({},O,!0));var t=y(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n>4?4:n,p(t.minDate)||(t.minDate=!1),p(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),d(t.yearRange)){var o=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||o,t.yearRange[1]=parseInt(t.yearRange[1],10)||o}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||O.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return n=n||this._o.format,p(this._d)?this._o.toString?this._o.toString(this._d,n):t?e(this._d).format(n):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,o){t&&e.isMoment(n)&&this.setDate(n.toDate(),o)},getDate:function(){return p(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",v(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),p(e)){var n=this._o.minDate,o=this._o.maxDate;p(n)&&e<n?e=n:p(o)&&e>o&&(e=o),this._d=new Date(e.getTime()),b(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),v(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(p(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),o=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),i=e.getTime();o.setMonth(o.getMonth()+1),o.setDate(o.getDate()-1),t=i<n.getTime()||o.getTime()<i}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(e,t){var n,o=this.getDate()||new Date,i=24*parseInt(t)*60*60*1e3;"add"===e?n=new Date(o.valueOf()+i):"subtract"===e&&(n=new Date(o.valueOf()-i)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=S(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=S({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(b(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=O.minDate,this._o.minYear=O.minYear,this._o.minMonth=O.minMonth,this._o.startRange=O.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(b(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=O.maxDate,this._o.maxYear=O.maxYear,this._o.maxMonth=O.maxMonth,this._o.endRange=O.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,n=this._o,o=n.minYear,a=n.maxYear,r=n.minMonth,s=n.maxMonth,c="";this._y<=o&&(this._y=o,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=a&&(this._y=a,!isNaN(s)&&this._m>s&&(this._m=s)),t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var l=0;l<n.numberOfMonths;l++)c+='<div class="pika-lendar">'+j(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,t)+this.render(this.calendars[l].year,this.calendars[l].month,t)+"</div>";this.el.innerHTML=c,n.bound&&"hidden"!==n.field.type&&i(function(){n.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label","Use the arrow keys to pick a date")}},adjustPosition:function(){var e,t,n,i,a,r,s,c,l,u;if(!this._o.container){if(this.el.style.position="absolute",e=this._o.trigger,t=e,n=this.el.offsetWidth,i=this.el.offsetHeight,a=window.innerWidth||o.documentElement.clientWidth,r=window.innerHeight||o.documentElement.clientHeight,s=window.pageYOffset||o.body.scrollTop||o.documentElement.scrollTop,"function"==typeof e.getBoundingClientRect)c=(u=e.getBoundingClientRect()).left+window.pageXOffset,l=u.bottom+window.pageYOffset;else for(c=t.offsetLeft,l=t.offsetTop+t.offsetHeight;t=t.offsetParent;)c+=t.offsetLeft,l+=t.offsetTop;(this._o.reposition&&c+n>a||this._o.position.indexOf("right")>-1&&c-n+e.offsetWidth>0)&&(c=c-n+e.offsetWidth),(this._o.reposition&&l+i>r+s||this._o.position.indexOf("top")>-1&&l-i-e.offsetHeight>0)&&(l=l-i-e.offsetHeight),this.el.style.left=c+"px",this.el.style.top=l+"px"}},render:function(e,t,n){var o=this._o,i=new Date,a=m(e,t),r=new Date(e,t,1).getDay(),s=[],c=[];b(i),o.firstDay>0&&(r-=o.firstDay)<0&&(r+=7);for(var l=0===t?11:t-1,u=11===t?0:t+1,d=0===t?e-1:e,f=11===t?e+1:e,y=m(d,l),v=a+r,S=v;S>7;)S-=7;v+=7-S;for(var O=!1,w=0,E=0;w<v;w++){var F=new Date(e,t,w-r+1),j=!!p(this._d)&&g(F,this._d),R=g(F,i),_=-1!==o.events.indexOf(F.toDateString()),I=w<r||w>=a+r,P=w-r+1,L=t,M=e,D=o.startRange&&g(o.startRange,F),k=o.endRange&&g(o.endRange,F),x=o.startRange&&o.endRange&&o.startRange<F&&F<o.endRange,U=o.minDate&&F<o.minDate||o.maxDate&&F>o.maxDate||o.disableWeekends&&h(F)||o.disableDayFn&&o.disableDayFn(F);I&&(w<r?(P=y+P,L=l,M=d):(P-=a,L=u,M=f));var H={day:P,month:L,year:M,hasEvent:_,isSelected:j,isToday:R,isDisabled:U,isEmpty:I,isStartRange:D,isEndRange:k,isInRange:x,showDaysInNextAndPreviousMonths:o.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:o.enableSelectionDaysInNextAndPreviousMonths};o.pickWholeWeek&&j&&(O=!0),c.push(T(H)),7==++E&&(o.showWeekNumber&&c.unshift(C(w-r,t,e)),s.push(A(c,o.isRTL,o.pickWholeWeek,O)),c=[],E=0,O=!1)}return N(o,s,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),u(this.el,"is-hidden"),this._o.bound&&(a(o,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;!1!==e&&(this._o.bound&&r(o,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",l(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),r(this.el,"mousedown",this._onMouseDown,!0),r(this.el,"touchend",this._onMouseDown,!0),r(this.el,"change",this._onChange),r(o,"keydown",this._onKeyChange),this._o.field&&(r(this._o.field,"change",this._onInputChange),this._o.bound&&(r(this._o.trigger,"click",this._onInputClick),r(this._o.trigger,"focus",this._onInputFocus),r(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},R})},function(e,t){e.exports=window.Autolinker},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={eml:"message/rfc822",mime:"message/rfc822",txt:"text/plain",text:"text/plain",def:"text/plain",list:"text/plain",in:"text/plain",ini:"text/plain",log:"text/plain",sql:"text/plain",cfg:"text/plain",conf:"text/plain",asc:"text/plain",rtx:"text/richtext",vcard:"text/vcard",vcf:"text/vcard",htm:"text/html",html:"text/html",csv:"text/csv",ics:"text/calendar",ifb:"text/calendar",xml:"text/xml",json:"application/json",swf:"application/x-shockwave-flash",hlp:"application/winhlp",wgt:"application/widget",chm:"application/vnd.ms-htmlhelp",p10:"application/pkcs10",p7c:"application/pkcs7-mime",p7m:"application/pkcs7-mime",p7s:"application/pkcs7-signature",torrent:"application/x-bittorrent",js:"application/javascript",pl:"text/perl",css:"text/css",asp:"text/asp",php:"application/x-httpd-php",php3:"application/x-httpd-php",php4:"application/x-httpd-php",php5:"application/x-httpd-php",phtml:"application/x-httpd-php",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",jpe:"image/jpeg",jfif:"image/jpeg",gif:"image/gif",bmp:"image/bmp",cgm:"image/cgm",ief:"image/ief",ico:"image/x-icon",tif:"image/tiff",tiff:"image/tiff",svg:"image/svg+xml",svgz:"image/svg+xml",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",webp:"image/webp",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",exe:"application/x-msdownload",dll:"application/x-msdownload",scr:"application/x-msdownload",com:"application/x-msdownload",bat:"application/x-msdownload",msi:"application/x-msdownload",cab:"application/vnd.ms-cab-compressed",gz:"application/x-gzip",tgz:"application/x-gzip",bz:"application/x-bzip",bz2:"application/x-bzip2",deb:"application/x-debian-package",psf:"application/x-font-linux-psf",otf:"application/x-font-otf",pcf:"application/x-font-pcf",snf:"application/x-font-snf",ttf:"application/x-font-ttf",ttc:"application/x-font-ttf",mp3:"audio/mpeg",amr:"audio/amr",aac:"audio/x-aac",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",wav:"audio/x-wav",wma:"audio/x-ms-wma",wax:"audio/x-ms-wax",midi:"audio/midi",mp4a:"audio/mp4",ogg:"audio/ogg",weba:"audio/webm",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",rmp:"audio/x-pn-realaudio-plugin",m3u:"audio/x-mpegurl",flv:"video/x-flv",qt:"video/quicktime",mov:"video/quicktime",wmv:"video/windows-media",avi:"video/x-msvideo",mpg:"video/mpeg",mpeg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",jpgv:"video/jpgv",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",ogv:"video/ogg",webm:"video/webm",m4v:"video/x-m4v",asf:"video/x-ms-asf",asx:"video/x-ms-asf",wm:"video/x-ms-wm",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx",movie:"video/x-sgi-movie",pdf:"application/pdf",psd:"image/vnd.adobe.photoshop",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",doc:"application/msword",dot:"application/msword",rtf:"application/rtf",xls:"application/vnd.ms-excel",ppt:"application/vnd.ms-powerpoint",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",odt:"application/vnd.oasis.opendocument.text",ods:"application/vnd.oasis.opendocument.spreadsheet"}},function(e,t){e.exports='<html>\n<head>\n\t<meta charset="utf-8" />\n\t<meta name="viewport" content="user-scalable=no" />\n\t<meta name="apple-mobile-web-app-capable" content="yes" />\n\t<meta name="robots" content="noindex, nofollow, noodp" />\n\t<title>{{title}}</title>\n\t<style>\nhtml, body {\n\tbackground-color: #fff;\n\tfont-size: 13px;\n\tfont-family: arial, sans-serif;\n\tmargin: 0;\n\tpadding: 0;\n}\n\na {color: blue; text-decoration: underline}\na:visited {color: #609}\na:active {color: red}\nblockquote {border-left: 2px solid black; margin: 0; padding: 0px 10px}\n\npre {\n\tmargin: 0px;\n\tpadding: 0px;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\tbackground: #fff;\n\tborder: none;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: break-all;\n}\n\n.body-wrp {\n\tpadding: 10px;\n}\n\n.body-wrp.html pre {\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: normal;\n}\n\n.body-wrp.plain {\n\tpadding: 15px;\n\twhite-space: pre-wrap;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n}\n\n.body-wrp.plain pre {\n\tmargin: 0px;\n\tpadding: 0px;\n\tbackground: #fff;\n\tborder: none;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: normal;\n}\n\n.body-wrp.plain blockquote {\n\tborder-left: 2px solid blue;\n\tcolor: blue;\n}\n\n.body-wrp.plain blockquote blockquote {\n\tborder-left: 2px solid green;\n\tcolor: green;\n}\n\n.body-wrp.plain blockquote blockquote blockquote {\n\tborder-left: 2px solid red;\n\tcolor: red;\n}\n.rl-preview-subject {\n\tfont-size: 16px;\n\tfont-weight: bold;\n\tpadding: 15px;\n}\n.rl-preview-creds-from, .rl-preview-creds-to, .rl-preview-creds-cc {\n\tfont-size: 12px;\n\tpadding: 5px 15px;\n}\n.rl-preview-date {\n\tfloat: right;\n\tfont-size: 12px;\n\tpadding: 10px 15px;\n}\n.rl-preview-section {\n\tpadding: 0;\n\tmargin: 0;\n\tborder-bottom: 1px solid #ccc;\n}\n.rl-preview-hide {\n\tdisplay: none;\n}\n\t</style>\n</head>\n<body>\n\t<div class="rl-preview-section">\n\t\t<div class="rl-preview-subject">{{subject}}</div>\n\t</div>\n\t<div class="rl-preview-section">\n\t\t<div class="rl-preview-date">{{date}}</div>\n\t\t<div class="rl-preview-creds-from">{{fromCreds}}</div>\n\t\t<div class="rl-preview-creds-to">{{toLabel}}: {{toCreds}}</div>\n\t\t<div class="rl-preview-creds-cc {{ccClass}}">{{ccLabel}}: {{ccCreds}}</div>\n\t</div>\n\t<div class="body-wrp {{bodyClass}}">{{html}}</div>\n</body>\n</html>'},function(e,t){e.exports=window.hasher},function(e,t,n){e.exports={default:n(112),__esModule:!0}},function(e,t,n){n(113),n(123),e.exports=n(70).f("iterator")},function(e,t,n){"use strict";var o=n(114)(!0);n(88)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=o(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var o=n(61),i=n(49);e.exports=function(e){return function(t,n){var a,r,s=String(i(t)),c=o(n),l=s.length;return c<0||c>=l?e?"":void 0:(a=s.charCodeAt(c))<55296||a>56319||c+1===l||(r=s.charCodeAt(c+1))<56320||r>57343?e?s.charAt(c):a:e?s.slice(c,c+2):r-56320+(a-55296<<10)+65536}}},function(e,t,n){"use strict";var o=n(64),i=n(39),a=n(69),r={};n(28)(r,n(36)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=o(r,{next:i(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var o=n(26),i=n(35),a=n(65);e.exports=n(23)?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),s=r.length,c=0;s>c;)o.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var o=n(24),i=n(118),a=n(119);e.exports=function(e){return function(t,n,r){var s,c=o(t),l=i(c.length),u=a(r,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var o=n(61),i=Math.min;e.exports=function(e){return e>0?i(o(e),9007199254740991):0}},function(e,t,n){var o=n(61),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=o(e))<0?i(e+t,0):a(e,t)}},function(e,t,n){var o=n(21).document;e.exports=o&&o.documentElement},function(e,t,n){var o=n(25),i=n(122),a=n(66)("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),o(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},function(e,t,n){var o=n(49);e.exports=function(e){return Object(o(e))}},function(e,t,n){n(124);for(var o=n(21),i=n(28),a=n(63),r=n(36)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var l=s[c],u=o[l],d=u&&u.prototype;d&&!d[r]&&i(d,r,l),a[l]=a.Array}},function(e,t,n){"use strict";var o=n(125),i=n(126),a=n(63),r=n(24);e.exports=n(88)(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(128),__esModule:!0}},function(e,t,n){n(129),n(134),n(135),n(136),e.exports=n(22).Symbol},function(e,t,n){"use strict";var o=n(21),i=n(25),a=n(23),r=n(32),s=n(89),c=n(130).KEY,l=n(30),u=n(67),d=n(69),p=n(52),h=n(36),f=n(70),m=n(71),b=n(131),g=n(132),y=n(35),v=n(24),S=n(46),O=n(39),w=n(64),T=n(133),C=n(50),A=n(26),E=n(65),F=C.f,j=A.f,N=T.f,R=o.Symbol,_=o.JSON,I=_&&_.stringify,P=h("_hidden"),L=h("toPrimitive"),M={}.propertyIsEnumerable,D=u("symbol-registry"),k=u("symbols"),x=u("op-symbols"),U=Object.prototype,H="function"==typeof R,B=o.QObject,G=!B||!B.prototype||!B.prototype.findChild,K=a&&l(function(){return 7!=w(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(e,t,n){var o=F(U,t);o&&delete U[t],j(e,t,n),o&&e!==U&&j(U,t,o)}:j,V=function(e){var t=k[e]=w(R.prototype);return t._k=e,t},z=H&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},q=function(e,t,n){return e===U&&q(x,t,n),y(e),t=S(t,!0),y(n),i(k,t)?(n.enumerable?(i(e,P)&&e[P][t]&&(e[P][t]=!1),n=w(n,{enumerable:O(0,!1)})):(i(e,P)||j(e,P,O(1,{})),e[P][t]=!0),K(e,t,n)):j(e,t,n)},W=function(e,t){y(e);for(var n,o=b(t=v(t)),i=0,a=o.length;a>i;)q(e,n=o[i++],t[n]);return e},Y=function(e){var t=M.call(this,e=S(e,!0));return!(this===U&&i(k,e)&&!i(x,e))&&(!(t||!i(this,e)||!i(k,e)||i(this,P)&&this[P][e])||t)},$=function(e,t){if(e=v(e),t=S(t,!0),e!==U||!i(k,t)||i(x,t)){var n=F(e,t);return!n||!i(k,t)||i(e,P)&&e[P][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=N(v(e)),o=[],a=0;n.length>a;)i(k,t=n[a++])||t==P||t==c||o.push(t);return o},X=function(e){for(var t,n=e===U,o=N(n?x:v(e)),a=[],r=0;o.length>r;)!i(k,t=o[r++])||n&&!i(U,t)||a.push(k[t]);return a};H||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===U&&t.call(x,n),i(this,P)&&i(this[P],e)&&(this[P][e]=!1),K(this,e,O(1,n))};return a&&G&&K(U,e,{configurable:!0,set:t}),V(e)}).prototype,"toString",function(){return this._k}),C.f=$,A.f=q,n(92).f=T.f=J,n(51).f=Y,n(91).f=X,a&&!n(62)&&s(U,"propertyIsEnumerable",Y,!0),f.f=function(e){return V(h(e))}),r(r.G+r.W+r.F*!H,{Symbol:R});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Q=0;Z.length>Q;)h(Z[Q++]);for(var ee=E(h.store),te=0;ee.length>te;)m(ee[te++]);r(r.S+r.F*!H,"Symbol",{for:function(e){return i(D,e+="")?D[e]:D[e]=R(e)},keyFor:function(e){if(!z(e))throw TypeError(e+" is not a symbol!");for(var t in D)if(D[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),r(r.S+r.F*!H,"Object",{create:function(e,t){return void 0===t?w(e):W(w(e),t)},defineProperty:q,defineProperties:W,getOwnPropertyDescriptor:$,getOwnPropertyNames:J,getOwnPropertySymbols:X}),_&&r(r.S+r.F*(!H||l(function(){var e=R();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!z(e)){for(var t,n,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);return"function"==typeof(t=o[1])&&(n=t),!n&&g(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!z(t))return t}),o[1]=t,I.apply(_,o)}}}),R.prototype[L]||n(28)(R.prototype,L,R.prototype.valueOf),d(R,"Symbol"),d(Math,"Math",!0),d(o.JSON,"JSON",!0)},function(e,t,n){var o=n(52)("meta"),i=n(29),a=n(25),r=n(26).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(30)(function(){return c(Object.preventExtensions({}))}),u=function(e){r(e,o,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:o,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,o)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[o].i},getWeak:function(e,t){if(!a(e,o)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[o].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!a(e,o)&&u(e),e}}},function(e,t,n){var o=n(65),i=n(91),a=n(51);e.exports=function(e){var t=o(e),n=i.f;if(n)for(var r,s=n(e),c=a.f,l=0;s.length>l;)c.call(e,r=s[l++])&&t.push(r);return t}},function(e,t,n){var o=n(60);e.exports=Array.isArray||function(e){return"Array"==o(e)}},function(e,t,n){var o=n(24),i=n(92).f,a={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return r.slice()}};e.exports.f=function(e){return r&&"[object Window]"==a.call(e)?s(e):i(o(e))}},function(e,t){},function(e,t,n){n(71)("asyncIterator")},function(e,t,n){n(71)("observable")},function(e,t,n){e.exports={default:n(138),__esModule:!0}},function(e,t,n){n(139),e.exports=n(22).Object.setPrototypeOf},function(e,t,n){var o=n(32);o(o.S,"Object",{setPrototypeOf:n(140).set})},function(e,t,n){var o=n(29),i=n(35),a=function(e,t){if(i(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{(o=n(58)(Function.call,n(50).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:o(e,n),e}}({},!1):void 0),check:a}},function(e,t,n){e.exports={default:n(142),__esModule:!0}},function(e,t,n){n(143);var o=n(22).Object;e.exports=function(e,t){return o.create(e,t)}},function(e,t,n){var o=n(32);o(o.S,"Object",{create:n(64)})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),i=n.n(o),a=n(2),r=n(7),s=n(10),c=function(){function e(){i()(this,e),this.allowLanguagesOnSettings=a.a.observable(!0),this.allowLanguagesOnLogin=a.a.observable(!0),this.newMoveToFolder=a.a.observable(!0),this.interfaceAnimation=a.a.observable(!0),this.interfaceAnimation.subscribe(function(e){var t=r.bMobileDevice||!e;r.$html.toggleClass("rl-anim",!t).toggleClass("no-rl-anim",t)}),this.interfaceAnimation.valueHasMutated(),this.prem=a.a.observable(!1),this.community=a.a.observable(!0)}return e.prototype.populate=function(){this.allowLanguagesOnLogin(!!s.settingsGet("AllowLanguagesOnLogin")),this.allowLanguagesOnSettings(!!s.settingsGet("AllowLanguagesOnSettings")),this.newMoveToFolder(!!s.settingsGet("NewMoveToFolder")),this.interfaceAnimation(!!s.settingsGet("InterfaceAnimation")),this.prem(!!s.settingsGet("PremType")),this.community(!!s.settingsGet("Community"))},e}()},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(2),c=n(3),l=n(37),u=n(146),d=n(10),p=function(){function e(){var t=this;i()(this,e),this.enableSoundNotification=s.a.observable(!1),this.soundNotificationIsSupported=s.a.observable(!1),this.allowDesktopNotification=s.a.observable(!1),this.desktopNotificationPermissions=s.a.computed(function(){t.allowDesktopNotification();var e=c.DesktopNotification.NotSupported,n=t.notificationClass();if(n&&n.permission)switch(n.permission.toLowerCase()){case"granted":e=c.DesktopNotification.Allowed;break;case"denied":e=c.DesktopNotification.Denied;break;case"default":e=c.DesktopNotification.NotAllowed}else r.a.webkitNotifications&&r.a.webkitNotifications.checkPermission&&(e=r.a.webkitNotifications.checkPermission());return e}).extend({notify:"always"}),this.enableDesktopNotification=s.a.computed({read:function(){return t.allowDesktopNotification()&&c.DesktopNotification.Allowed===t.desktopNotificationPermissions()},write:function(e){if(e){var n=t.notificationClass(),o=t.desktopNotificationPermissions();n&&c.DesktopNotification.Allowed===o?t.allowDesktopNotification(!0):n&&c.DesktopNotification.NotAllowed===o?n.requestPermission(function(){t.allowDesktopNotification.valueHasMutated(),c.DesktopNotification.Allowed===t.desktopNotificationPermissions()?t.allowDesktopNotification()?t.allowDesktopNotification.valueHasMutated():t.allowDesktopNotification(!0):t.allowDesktopNotification()?t.allowDesktopNotification(!1):t.allowDesktopNotification.valueHasMutated()}):t.allowDesktopNotification(!1)}else t.allowDesktopNotification(!1)}}).extend({notify:"always"}),this.enableDesktopNotification.valueHasMutated||(this.enableDesktopNotification.valueHasMutated=function(){t.allowDesktopNotification.valueHasMutated()}),this.computers(),this.initNotificationPlayer()}return e.prototype.computers=function(){var e=this;this.isDesktopNotificationSupported=s.a.computed(function(){return c.DesktopNotification.NotSupported!==e.desktopNotificationPermissions()}),this.isDesktopNotificationDenied=s.a.computed(function(){return c.DesktopNotification.NotSupported===e.desktopNotificationPermissions()||c.DesktopNotification.Denied===e.desktopNotificationPermissions()})},e.prototype.initNotificationPlayer=function(){u.a&&u.a.supportedNotification?this.soundNotificationIsSupported(!0):(this.enableSoundNotification(!1),this.soundNotificationIsSupported(!1))},e.prototype.playSoundNotification=function(e){u.a&&u.a.supportedNotification&&(e||this.enableSoundNotification())&&u.a.playNotification()},e.prototype.displayDesktopNotification=function(e,t,n,o){if(this.enableDesktopNotification()){var i=this.notificationClass(),a=i?new i(t,{body:n,icon:e}):null;a&&(a.show&&a.show(),o&&(a.onclick=function(){r.a.focus(),o.Folder&&o.Uid&&l.a("mailbox.message.show",[o.Folder,o.Uid])}),r.a.setTimeout(function(e){return function(){e.cancel?e.cancel():e.close&&e.close()}}(a),c.Magics.Time7s))}},e.prototype.populate=function(){this.enableSoundNotification(!!d.settingsGet("SoundNotification")),this.enableDesktopNotification(!!d.settingsGet("DesktopNotifications"))},e.prototype.notificationClass=function(){return r.a.Notification&&r.a.Notification.requestPermission?r.a.Notification:null},e}();t.a=new p},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(7),c=n(14),l=n(37),u=n(1),d=function(){function e(){var t=this;if(i()(this,e),this.notificator=null,this.player=null,this.supported=!1,this.supportedMp3=!1,this.supportedOgg=!1,this.supportedWav=!1,this.supportedNotification=!1,this.player=this.createNewObject(),this.supported=!(s.bMobileDevice||s.bSafari||!this.player||!this.player.play),this.supported&&this.player&&this.player.canPlayType&&(this.supportedMp3=""!==this.player.canPlayType("audio/mpeg;").replace(/no/,""),this.supportedWav=""!==this.player.canPlayType('audio/wav; codecs="1"').replace(/no/,""),this.supportedOgg=""!==this.player.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""),this.supportedNotification=this.supported&&this.supportedMp3),this.player&&(this.supportedMp3||this.supportedOgg||this.supportedWav)||(this.supported=!1,this.supportedMp3=!1,this.supportedOgg=!1,this.supportedWav=!1,this.supportedNotification=!1),this.supported&&this.player){var n=function(){return t.stop()};this.player.addEventListener("ended",n),this.player.addEventListener("error",n),l.b("audio.api.stop",n)}}return e.prototype.createNewObject=function(){var e=r.a.Audio?new r.a.Audio:null;return e&&e.canPlayType&&e.pause&&e.play&&(e.preload="none",e.loop=!1,e.autoplay=!1,e.muted=!1),e},e.prototype.paused=function(){return!this.supported||!!this.player.paused},e.prototype.stop=function(){this.supported&&this.player.pause&&this.player.pause(),l.a("audio.stop")},e.prototype.pause=function(){this.stop()},e.prototype.clearName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e=Object(u.trim)(e),t&&"."+t===e.toLowerCase().substr(-1*(t.length+1))&&(e=Object(u.trim)(e.substr(0,e.length-4))),""===e?"audio":e},e.prototype.playMp3=function(e,t){this.supported&&this.supportedMp3&&(this.player.src=e,this.player.play(),l.a("audio.start",[this.clearName(t,"mp3"),"mp3"]))},e.prototype.playOgg=function(e,t){this.supported&&this.supportedOgg&&(this.player.src=e,this.player.play(),t=this.clearName(t,"oga"),t=this.clearName(t,"ogg"),l.a("audio.start",[t,"ogg"]))},e.prototype.playWav=function(e,t){this.supported&&this.supportedWav&&(this.player.src=e,this.player.play(),l.a("audio.start",[this.clearName(t,"wav"),"wav"]))},e.prototype.playNotification=function(){this.supported&&this.supportedMp3&&(this.notificator||(this.notificator=this.createNewObject(),this.notificator.src=c.D("new-mail.mp3")),this.notificator&&this.notificator.play&&this.notificator.play())},e}();t.a=new d},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(2),r=n(3),s=n(10),c=function(){function e(){i()(this,e),this.contacts=a.a.observableArray([]),this.contacts.loading=a.a.observable(!1).extend({throttle:r.Magics.Time200ms}),this.contacts.importing=a.a.observable(!1).extend({throttle:r.Magics.Time200ms}),this.contacts.syncing=a.a.observable(!1).extend({throttle:r.Magics.Time200ms}),this.contacts.exportingVcf=a.a.observable(!1).extend({throttle:r.Magics.Time200ms}),this.contacts.exportingCsv=a.a.observable(!1).extend({throttle:r.Magics.Time200ms}),this.allowContactsSync=a.a.observable(!1),this.enableContactsSync=a.a.observable(!1),this.contactsSyncUrl=a.a.observable(""),this.contactsSyncUser=a.a.observable(""),this.contactsSyncPass=a.a.observable("")}return e.prototype.populate=function(){this.allowContactsSync(!!s.settingsGet("ContactsSyncIsAllowed")),this.enableContactsSync(!!s.settingsGet("EnableContactsSync")),this.contactsSyncUrl(s.settingsGet("ContactsSyncUrl")),this.contactsSyncUser(s.settingsGet("ContactsSyncUser")),this.contactsSyncPass(s.settingsGet("ContactsSyncPassword"))},e}();t.a=new c},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(6),c=n.n(s),l=n(12),u=n.n(l),d=n(20),p=n(3),h=n(1),f=n(7),m=n(14),b=n(33),g=n(10),y=function(){function e(){i()(this,e),this.oRequests={}}return e.prototype.defaultResponse=function(e,t,n,o,i,a){var r=function(){p.StorageResultType.Success!==n&&f.data.bUnload&&(n=p.StorageResultType.Unload),p.StorageResultType.Success===n&&o&&!o.Result?(o&&-1<Object(h.inArray)(o.ErrorCode,[p.Notification.AuthError,p.Notification.AccessError,p.Notification.ConnectionError,p.Notification.DomainNotAllowed,p.Notification.AccountNotAllowed,p.Notification.MailServerError,p.Notification.UnknownNotification,p.Notification.UnknownError])&&(f.data.iAjaxErrorCount+=1),o&&p.Notification.InvalidToken===o.ErrorCode&&(f.data.iTokenErrorCount+=1),d.q<f.data.iTokenErrorCount&&f.data.__APP__&&f.data.__APP__.loginAndLogoutReload&&f.data.__APP__.loginAndLogoutReload(!1,!0),(o.ClearAuth||o.Logout||d.a<f.data.iAjaxErrorCount)&&f.data.__APP__&&f.data.__APP__.clearClientSideToken&&(f.data.__APP__.clearClientSideToken(),!o.ClearAuth&&f.data.__APP__.loginAndLogoutReload&&f.data.__APP__.loginAndLogoutReload(!1,!0))):p.StorageResultType.Success===n&&o&&o.Result&&(f.data.iAjaxErrorCount=0,f.data.iTokenErrorCount=0),Object(b.f)("ajax-default-response",[t,p.StorageResultType.Success===n?o:null,n,i,a]),e&&e(n,p.StorageResultType.Success===n?o:null,i,t,a)};switch(n){case"success":n=p.StorageResultType.Success;break;case"abort":n=p.StorageResultType.Abort;break;default:n=p.StorageResultType.Error}p.StorageResultType.Error===n?c.a.delay(r,300):r()},e.prototype.ajaxRequest=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e4,o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=""===i,l={},d=(new r.a.Date).getTime(),p="";(p=(t=t||{}).Action||"")&&0<a.length&&c.a.each(a,function(e){o.oRequests[e]&&(o.oRequests[e].__aborted=!0,o.oRequests[e].abort&&o.oRequests[e].abort(),o.oRequests[e]=null)}),s&&(t.XToken=g.appSettingsGet("token"));var f=u.a.ajax({type:s?"POST":"GET",url:Object(m.a)(i),async:!0,dataType:"json",data:s?t:{},headers:l,timeout:n,global:!0});return f.always(function(n,i){var a=!1;n&&n.Time&&(a=Object(h.pInt)(n.Time)>(new r.a.Date).getTime()-d),p&&o.oRequests[p]&&(o.oRequests[p].__aborted&&(i="abort"),o.oRequests[p]=null),o.defaultResponse(e,p,i,n,a,t)}),p&&0<a.length&&-1<Object(h.inArray)(p,a)&&(this.oRequests[p]&&(this.oRequests[p].__aborted=!0,this.oRequests[p].abort&&this.oRequests[p].abort(),this.oRequests[p]=null),this.oRequests[p]=f),f},e.prototype.defaultRequest=function(e,t,n,o,i,a){return n=n||{},n.Action=t,i=Object(h.pString)(i),Object(b.f)("ajax-default-request",[t,n,i]),this.ajaxRequest(e,n,Object(h.isUnd)(o)?d.g:Object(h.pInt)(o),i,a)},e.prototype.noop=function(e){this.defaultRequest(e,"Noop")},e.prototype.jsError=function(e,t,n,o,i,a,r){this.defaultRequest(e,"JsError",{Message:t,FileName:n,LineNo:o,Location:i,HtmlCapa:a,TimeOnPage:r})},e.prototype.jsInfo=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.defaultRequest(e,"JsInfo",{Type:t,Data:n,IsError:o?"1":"0"})},e.prototype.getPublicKey=function(e){this.defaultRequest(e,"GetPublicKey")},e.prototype.jsVersion=function(e,t){this.defaultRequest(e,"Version",{Version:t})},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AccountPopupView",function(){return T}),n.d(t,"default",function(){return T});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(2),b=n(3),g=n(1),y=n(8),v=n(17),S=n(16),O=n(9),w=n(13),T=(o=Object(O.popup)({name:"View/Popup/Account",templateID:"PopupsAccount"}),i=Object(O.command)(function(e){return!e.submitRequest()}),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.isNew=m.a.observable(!0),n.email=m.a.observable(""),n.password=m.a.observable(""),n.emailError=m.a.observable(!1),n.passwordError=m.a.observable(!1),n.email.subscribe(function(){n.emailError(!1)}),n.password.subscribe(function(){n.passwordError(!1)}),n.submitRequest=m.a.observable(!1),n.submitError=m.a.observable(""),n.submitErrorAdditional=m.a.observable(""),n.emailFocus=m.a.observable(!1),n}return f()(t,e),t.prototype.addAccountCommand=function(){var e=this;return this.emailError(""===Object(g.trim)(this.email())),this.passwordError(""===Object(g.trim)(this.password())),!this.emailError()&&!this.passwordError()&&(this.submitRequest(!0),v.a.accountSetup(function(t,n){e.submitRequest(!1),b.StorageResultType.Success===t&&n?n.Result?(Object(S.a)().accountsAndIdentities(),e.cancelCommand()):(e.submitError(n.ErrorCode?Object(y.getNotification)(n.ErrorCode):Object(y.getNotification)(b.Notification.UnknownError)),n.ErrorMessageAdditional&&e.submitErrorAdditional(n.ErrorMessageAdditional)):(e.submitError(Object(y.getNotification)(b.Notification.UnknownError)),e.submitErrorAdditional(""))},this.email(),this.password(),this.isNew()),!0)},t.prototype.clearPopup=function(){this.isNew(!0),this.email(""),this.password(""),this.emailError(!1),this.passwordError(!1),this.submitRequest(!1),this.submitError(""),this.submitErrorAdditional("")},t.prototype.onShow=function(e){this.clearPopup(),e&&e.canBeEdit()&&(this.isNew(!1),this.email(e.email))},t.prototype.onShowWithDelay=function(){this.emailFocus(!0)},t}(w.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"addAccountCommand",[i],c()(r.prototype,"addAccountCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(12),p=n.n(d),h=n(2),f=n(7),m=n(1),b=n(14),g=n(9),y=function(e){function t(n){i()(this,t);var o=r()(this,e.call(this,"settings",n));return o.menu=h.a.observableArray([]),o.oCurrentSubScreen=null,o.oViewModelPlace=null,o.setupSettings(),o}return c()(t,e),t.prototype.setupSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e()},t.prototype.onRoute=function(e){var t=this,n=null,o=null,i=null,a=null;if((o=u.a.find(f.VIEW_MODELS.settings,function(t){return t&&t.__rlSettingsData&&e===t.__rlSettingsData.Route}))&&(u.a.find(f.VIEW_MODELS["settings-removed"],function(e){return e&&e===o})&&(o=null),o&&u.a.find(f.VIEW_MODELS["settings-disabled"],function(e){return e&&e===o})&&(o=null)),o){if(o.__builded&&o.__vm)n=o.__vm;else if((i=this.oViewModelPlace)&&1===i.length){n=new o,(a=p()("<div></div>").addClass("rl-settings-view-model").hide()).appendTo(i),n.viewModelDom=a,n.__rlSettingsData=o.__rlSettingsData,o.__dom=a,o.__builded=!0,o.__vm=n;var r={name:o.__rlSettingsData.Template};h.a.applyBindingAccessorsToNode(a[0],{translatorInit:!0,template:function(){return r}},n),Object(m.delegateRun)(n,"onBuild",[a])}else Object(m.log)("Cannot find sub settings view model position: SettingsSubScreen");n&&u.a.defer(function(){t.oCurrentSubScreen&&(Object(m.delegateRun)(t.oCurrentSubScreen,"onHide"),t.oCurrentSubScreen.viewModelDom.hide()),t.oCurrentSubScreen=n,t.oCurrentSubScreen&&(Object(m.delegateRun)(t.oCurrentSubScreen,"onBeforeShow"),t.oCurrentSubScreen.viewModelDom.show(),Object(m.delegateRun)(t.oCurrentSubScreen,"onShow"),Object(m.delegateRun)(t.oCurrentSubScreen,"onShowWithDelay",[],200),u.a.each(t.menu(),function(e){e.selected(n&&n.__rlSettingsData&&e.route===n.__rlSettingsData.Route)}),p()("#rl-content .b-settings .b-content .content").scrollTop(0)),Object(m.windowResize)()})}else Object(g.setHash)(Object(b.z)(),!1,!0)},t.prototype.onHide=function(){this.oCurrentSubScreen&&this.oCurrentSubScreen.viewModelDom&&(Object(m.delegateRun)(this.oCurrentSubScreen,"onHide"),this.oCurrentSubScreen.viewModelDom.hide())},t.prototype.onBuild=function(){var e=this;u.a.each(f.VIEW_MODELS.settings,function(t){t&&t.__rlSettingsData&&!u.a.find(f.VIEW_MODELS["settings-removed"],function(e){return e&&e===t})&&e.menu.push({route:t.__rlSettingsData.Route,label:t.__rlSettingsData.Label,selected:h.a.observable(!1),disabled:!!u.a.find(f.VIEW_MODELS["settings-disabled"],function(e){return e&&e===t})})}),this.oViewModelPlace=p()("#rl-content #rl-settings-subscreen")},t.prototype.routes=function(){var e=u.a.find(f.VIEW_MODELS.settings,function(e){return e&&e.__rlSettingsData&&e.__rlSettingsData.IsDefault}),t=e&&e.__rlSettingsData?e.__rlSettingsData.Route:"general",n={subname:/^(.*)$/,normalize_:function(e,n){return n.subname=Object(m.isUnd)(n.subname)?t:Object(m.pString)(n.subname),[n.subname]}};return[["{subname}/",n],["{subname}",n],["",n]]},t}(n(76).a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"IdentityPopupView",function(){return C}),n.d(t,"default",function(){return C});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(2),b=n(3),g=n(7),y=n(1),v=n(8),S=n(17),O=n(16),w=n(9),T=n(13),C=(o=Object(w.popup)({name:"View/Popup/Identity",templateID:"PopupsIdentity"}),i=Object(w.command)(function(e){return!e.submitRequest()}),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.id="",n.edit=m.a.observable(!1),n.owner=m.a.observable(!1),n.email=m.a.observable("").validateEmail(),n.email.focused=m.a.observable(!1),n.name=m.a.observable(""),n.name.focused=m.a.observable(!1),n.replyTo=m.a.observable("").validateSimpleEmail(),n.replyTo.focused=m.a.observable(!1),n.bcc=m.a.observable("").validateSimpleEmail(),n.bcc.focused=m.a.observable(!1),n.signature=m.a.observable(""),n.signatureInsertBefore=m.a.observable(!1),n.showBcc=m.a.observable(!1),n.showReplyTo=m.a.observable(!1),n.submitRequest=m.a.observable(!1),n.submitError=m.a.observable(""),n.bcc.subscribe(function(e){!1===n.showBcc()&&0<e.length&&n.showBcc(!0)}),n.replyTo.subscribe(function(e){!1===n.showReplyTo()&&0<e.length&&n.showReplyTo(!0)}),n}return f()(t,e),t.prototype.addOrEditIdentityCommand=function(){var e=this;return this.signature&&this.signature.__fetchEditorValue&&this.signature.__fetchEditorValue(),this.email.hasError()||this.email.hasError(""===Object(y.trim)(this.email())),this.email.hasError()?(this.owner()||this.email.focused(!0),!1):this.replyTo.hasError()?(this.replyTo.focused(!0),!1):this.bcc.hasError()?(this.bcc.focused(!0),!1):(this.submitRequest(!0),S.a.identityUpdate(function(t,n){e.submitRequest(!1),b.StorageResultType.Success===t&&n?n.Result?(Object(O.a)().accountsAndIdentities(),e.cancelCommand()):n.ErrorCode&&e.submitError(Object(v.getNotification)(n.ErrorCode)):e.submitError(Object(v.getNotification)(b.Notification.UnknownError))},this.id,this.email(),this.name(),this.replyTo(),this.bcc(),this.signature(),this.signatureInsertBefore()),!0)},t.prototype.clearPopup=function(){this.id="",this.edit(!1),this.owner(!1),this.name(""),this.email(""),this.replyTo(""),this.bcc(""),this.signature(""),this.signatureInsertBefore(!1),this.email.hasError(!1),this.replyTo.hasError(!1),this.bcc.hasError(!1),this.showBcc(!1),this.showReplyTo(!1),this.submitRequest(!1),this.submitError("")},t.prototype.onShow=function(e){this.clearPopup(),e?(this.edit(!0),this.id=e.id()||"",this.name(e.name()),this.email(e.email()),this.replyTo(e.replyTo()),this.bcc(e.bcc()),this.signature(e.signature()),this.signatureInsertBefore(e.signatureInsertBefore()),this.owner(""===this.id)):this.id=Object(y.fakeMd5)()},t.prototype.onShowWithDelay=function(){this.owner()||g.bMobileDevice||this.email.focused(!0)},t.prototype.onHideWithDelay=function(){this.clearPopup()},t}(T.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"addOrEditIdentityCommand",[i],c()(r.prototype,"addOrEditIdentityCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.d(t,"a",function(){return I});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(11),u=n.n(l),d=n(12),p=n.n(d),h=n(6),f=n.n(h),m=n(2),b=n(19),g=n.n(b),y=n(153),v=n.n(y),S=n(7),O=n(1),w=n(3),T=n(14),C=n(8),A=n(154),E=n(37),F=n(10),j=n(57),N=n(72),R=n(56),_=n(9),I=function(e){function t(n){i()(this,t);var o=r()(this,e.call(this));return o.googlePreviewSupportedCache=null,o.isLocalAutocomplete=!0,o.iframe=null,o.lastErrorTime=0,o.iframe=p()('<iframe class="internal-hiddden" />').appendTo("body"),S.$win.on("error",function(e){if(e&&e.originalEvent&&e.originalEvent.message&&-1===Object(O.inArray)(e.originalEvent.message,["Script error.","Uncaught Error: Error calling method on NPObject."])){var t=Object(O.timestamp)();if(o.lastErrorTime>=t)return;o.lastErrorTime=t,n.jsError(O.noop,e.originalEvent.message,e.originalEvent.filename,e.originalEvent.lineno,u.a.location&&u.a.location.toString?u.a.location.toString():"",S.$html.attr("class"),Object(O.microtime)()-S.startMicrotime)}}),S.$win.on("resize",function(){E.a("window.resize")}),E.b("window.resize",f.a.throttle(function(){var e=S.$win.height(),t=S.$win.height();S.$win.__sizes[0]===e&&S.$win.__sizes[1]===t||(S.$win.__sizes[0]=e,S.$win.__sizes[1]=t,E.a("window.resize.real"))},w.Magics.Time50ms)),S.$doc.on("keydown",function(e){e&&e.ctrlKey&&S.$html.addClass("rl-ctrl-key-pressed")}).on("keyup",function(e){e&&!e.ctrlKey&&S.$html.removeClass("rl-ctrl-key-pressed")}),S.$doc.on("mousemove keypress click",f.a.debounce(function(){E.a("rl.auto-logout-refresh")},w.Magics.Time5s)),g()("esc, enter",w.KeyState.All,function(){Object(O.detectDropdownVisibility)()}),F.appSettingsGet("allowCmdInterface")&&g()("ctrl+shift+`",w.KeyState.All,function(){Object(A.a)()}),o}return c()(t,e),t.prototype.remote=function(){return null},t.prototype.data=function(){return null},t.prototype.getApplicationConfiguration=function(e,t){return this.applicationConfiguration[e]||t},t.prototype.download=function(e){if(S.sUserAgent&&(-1<S.sUserAgent.indexOf("chrome")||-1<S.sUserAgent.indexOf("chrome"))){var t=u.a.document.createElement("a");if(t.href=e,u.a.document&&u.a.document.createEvent){var n=u.a.document.createEvent.MouseEvents;if(n&&n.initEvent&&t.dispatchEvent)return n.initEvent("click",!0,!0),t.dispatchEvent(n),!0}}return S.bMobileDevice?(u.a.open(e,"_self"),u.a.focus()):this.iframe.attr("src",e),!0},t.prototype.googlePreviewSupported=function(){return null===this.googlePreviewSupportedCache&&(this.googlePreviewSupportedCache=!!F.settingsGet("AllowGoogleSocial")&&!!F.settingsGet("AllowGoogleSocialPreview")),this.googlePreviewSupportedCache},t.prototype.setWindowTitle=function(e){e=Object(O.isNormal)(e)&&0<e.length?""+e:"",F.settingsGet("Title")&&(e+=(e?" - ":"")+F.settingsGet("Title")),u.a.document.title=e+" ...",u.a.document.title=e},t.prototype.redirectToAdminPanel=function(){f.a.delay(function(){u.a.location.href=Object(T.x)()},w.Magics.Time100ms)},t.prototype.clearClientSideToken=function(){u.a.__rlah_clear&&u.a.__rlah_clear()},t.prototype.setClientSideToken=function(e){u.a.__rlah_set&&(u.a.__rlah_set(e),F.settingsSet("AuthAccountHash",e),Object(T.v)())},t.prototype.loginAndLogoutReload=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!!F.appSettingsGet("inIframe"),i=Object(O.pString)(F.appSettingsGet("customLogoutLink"));t&&this.clearClientSideToken(),t&&n&&u.a.close&&u.a.close(),i=i||(e?Object(T.x)():Object(T.y)()),t&&u.a.location.href!==i?f.a.delay(function(){o&&u.a.parent?u.a.parent.location.href=i:u.a.location.href=i,S.$win.trigger("rl.tooltips.diactivate")},w.Magics.Time100ms):(Object(_.routeOff)(),Object(_.setHash)(Object(T.w)(),!0),Object(_.routeOff)(),f.a.delay(function(){o&&u.a.parent?u.a.parent.location.reload():u.a.location.reload(),S.$win.trigger("rl.tooltips.diactivate")},w.Magics.Time100ms))},t.prototype.historyBack=function(){u.a.history.back()},t.prototype.bootstart=function(){E.a("rl.bootstart");var e=F.appSettingsGet("mobile");m.a.components.register("SaveTrigger",n(162).default),m.a.components.register("Input",n(163).default),m.a.components.register("Select",n(164).default),m.a.components.register("Radio",n(165).default),m.a.components.register("TextArea",n(167).default),m.a.components.register("Date",n(168).default),m.a.components.register("x-script",n(169).default),F.appSettingsGet("materialDesign")&&S.bAnimationSupported?(m.a.components.register("Checkbox",n(170).default),m.a.components.register("CheckboxSimple",n(73).default)):(m.a.components.register("Checkbox",n(73).default),m.a.components.register("CheckboxSimple",n(73).default)),Object(C.initOnStartOrLangChange)(C.initNotificationLanguage),f.a.delay(O.windowResizeCallback,w.Magics.Time1s),E.b("ssm.mobile-enter",function(){Object(S.leftPanelDisabled)(!0)}),E.b("ssm.mobile-leave",function(){Object(S.leftPanelDisabled)(!1)}),e?(S.$html.addClass("ssm-state-mobile").addClass("rl-mobile"),E.a("ssm.mobile-enter")):(S.$html.addClass("rl-desktop"),v.a.addState({id:"mobile",query:"(max-width: 767px)",onEnter:function(){S.$html.addClass("ssm-state-mobile"),E.a("ssm.mobile-enter")},onLeave:function(){S.$html.removeClass("ssm-state-mobile"),E.a("ssm.mobile-leave")}}),v.a.addState({id:"tablet",query:"(min-width: 768px) and (max-width: 999px)",onEnter:function(){S.$html.addClass("ssm-state-tablet")},onLeave:function(){S.$html.removeClass("ssm-state-tablet")}}),v.a.addState({id:"desktop",query:"(min-width: 1000px) and (max-width: 1400px)",onEnter:function(){S.$html.addClass("ssm-state-desktop")},onLeave:function(){S.$html.removeClass("ssm-state-desktop")}}),v.a.addState({id:"desktop-large",query:"(min-width: 1401px)",onEnter:function(){S.$html.addClass("ssm-state-desktop-large")},onLeave:function(){S.$html.removeClass("ssm-state-desktop-large")}})),S.leftPanelDisabled.subscribe(function(e){S.$html.toggleClass("rl-left-panel-disabled",e),S.$html.toggleClass("rl-left-panel-enabled",!e)}),S.leftPanelType.subscribe(function(e){S.$html.toggleClass("rl-left-panel-none","none"===e),S.$html.toggleClass("rl-left-panel-short","short"===e)}),S.leftPanelDisabled.valueHasMutated(),j.a.populate(),N.a.populate(),R.a.populate()},t}(n(161).a)},function(e,t){e.exports=window.ssm},function(e,t,n){"use strict";function o(e){return n(155).replace("{{ cmd }}",e)}function i(e){return e.find(".rl-cmd-history-data").empty(),""}function a(e){return n(156).replace("{{ commands }}",e.join(" "))}function r(e,t){return e&&-1<Object(w.inArray)(e,t)?(Object(w.changeTheme)(e),""):n(157).replace("{{ themes }}",t.join(", "))}function s(e,t,o){return e&&-1<Object(w.inArray)(e,o)?(Object(T.reload)(t,e),""):n(158).replace("{{ langs }}",o.join(", "))}function c(){return n(159).replace("{{ version }}",C.appSettingsGet("version")+" ("+C.appSettingsGet("appVersionType")+")")}function l(e){j||(j=new N(e),v.a.applyBindingAccessorsToNode(e[0],{translatorInit:!0,template:function(){return{name:"Cmd"}}},j))}function u(){null===F&&((F=b()("<div></div>")).appendTo(S.$body),l(F))}t.a=function(){C.appSettingsGet("allowCmdInterface")&&(u(),y.a.delay(function(){j&&(j.opened(!j.opened()),j.opened()&&y.a.delay(function(){j&&j.focused&&j.focused(!0)},O.Magics.Time50ms))},O.Magics.Time50ms))};var d=n(0),p=n.n(d),h=n(11),f=n.n(h),m=n(12),b=n.n(m),g=n(6),y=n.n(g),v=n(2),S=n(7),O=n(3),w=n(1),T=n(8),C=n(10),A=n(72),E=n(57),F=null,j=null,N=function(){function e(t){p()(this,e),this.dom=null,this.opened=v.a.observable(!1),this.cmd=v.a.observable(""),this.focused=v.a.observable(!1),this.themes=A.a.themes,this.cmdHistory=[],this.cmdHistoryShift=0,this.cmdHelper=v.a.observable(""),this.cmds=["help","version","clear","theme","lang"],this.cmdsWithParameters=["theme","lang"],this.isAdmin=!1,this.dom=t,this.isAdmin=!!C.appSettingsGet("admin")}return e.prototype.runCmd=function(e,t,n){var l="",u=null;if(this.cmdHelper(""),n){switch(e){case"lang":u=(this.isAdmin?E.a.languagesAdmin():E.a.languages()).filter(function(e){return 0===e.lastIndexOf(t,0)});break;case"theme":u=A.a.themes().filter(function(e){return 0===e.lastIndexOf(t,0)})}if(e&&u)if(1===u.length&&u[0])this.cmd(e+" "+u[0]);else if(1<u.length&&u[0]&&u[1]){for(var d="",p=0,h=u[0].split(""),f=h.length;p<f&&u[1][p]===h[p];p++)d+=h[p];d&&(this.cmdHelper("["+u.join(", ")+"]"),this.cmd(e+" "+d))}return""}switch(e){case"hi":l="hello";break;case"?":case"ls":case"help":l=a(this.cmds);break;case"v":case"version":l=c();break;case"clear":l=i(this.dom);break;case"theme":l=r(t,A.a.themes());break;case"lang":l=s(t,this.isAdmin,this.isAdmin?E.a.languagesAdmin():E.a.languages());break;default:l=o(e)}return l},e.prototype.onCmd=function(e){var t=this,o=this.cmd().replace(/[\s]+/," "),i=Object(w.trim)(o).replace().split(/[\s]+/),a=i.shift();if(""===Object(w.trim)(o))return!1;if(e)if(-1<Object(w.inArray)(a,this.cmds)){var r=this.runCmd(a,i.join(" "),!0);r&&this.cmd(r)}else{var s=this.cmds.filter(function(e){return e!==a&&0===e.lastIndexOf(a,0)});1===s.length&&s[0]&&this.cmd(s[0]+(-1<Object(w.inArray)(s[0],this.cmdsWithParameters)?" ":""))}else{this.cmdHistory.unshift(o),this.cmdHistory=y.a.uniq(this.cmdHistory),this.cmdHistoryShift=0;var c=this.runCmd(a,i.join(" "),!1),l=this.dom.find(".rl-cmd-history-data");l&&l[0]&&(l.append(b()("<div></div>").html(n(160).replace("{{ cmd }}",o))),c&&l.append(b()("<div></div>").html(c)),y.a.delay(function(){t.dom.find(".rl-cmd-history").scrollTop(l.height())},50))}return!0},e.prototype.onEsc=function(){return this.opened(!1),!1},e.prototype.onTab=function(){return this.onCmd(!0),!1},e.prototype.onEnter=function(){return this.onCmd(!1),this.cmd(""),!1},e.prototype.onKeyDown=function(e){if(e&&e.keyCode&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey&&0<this.cmdHistory.length){var t=f.a.parseInt(e.keyCode,10);if(O.EventKeyCode.Up===t||O.EventKeyCode.Down===t)return this.cmdHistory[this.cmdHistoryShift]?(this.cmd(this.cmdHistory[this.cmdHistoryShift]),O.EventKeyCode.Up===t?this.cmdHistoryShift+=1:O.EventKeyCode.Down===t&&(this.cmdHistoryShift-=1)):this.cmdHistoryShift=0,!1}return!0},e}()},function(e,t){e.exports='<span class="rl-cmd-clr-error">Command not found:</span> {{ cmd }}'},function(e,t){e.exports=' <span class="rl-cmd-clr-info">commands:</span> {{ commands }}'},function(e,t){e.exports='theme <span class="rl-cmd-clr-info">[{{ themes }}]</span>'},function(e,t){e.exports='lang <span class="rl-cmd-clr-info">[{{ langs }}]</span>'},function(e,t){e.exports=' <span class="rl-cmd-clr-info">version:</span> {{ version }}'},function(e,t){e.exports='<span class="rl-cmd-clr-success">&gt;</span> {{ cmd }}'},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(0),i=n.n(o),a=function(){function e(){i()(this,e)}return e.prototype.bootstart=function(){},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n(3),d=n(18),p=function(e){function t(n){i()(this,t);var o=r()(this,e.call(this));return o.element=n.element||null,o.value=n.value&&n.value.subscribe?n.value:null,o.element&&(o.value?(o.element.css("display","inline-block"),n.verticalAlign&&o.element.css("vertical-align",n.verticalAlign),o.setState(o.value()),o.disposable.push(o.value.subscribe(o.setState,o))):o.element.hide()),o}return c()(t,e),t.prototype.setState=function(e){switch(Object(l.pInt)(e)){case u.SaveSettingsStep.TrueResult:this.element.find(".animated,.error").hide().removeClass("visible").end().find(".success").show().addClass("visible");break;case u.SaveSettingsStep.FalseResult:this.element.find(".animated,.success").hide().removeClass("visible").end().find(".error").show().addClass("visible");break;case u.SaveSettingsStep.Animate:this.element.find(".error,.success").hide().removeClass("visible").end().find(".animated").show().addClass("visible");break;case u.SaveSettingsStep.Idle:default:this.element.find(".animated").hide().end().find(".error,.success").removeClass("visible")}},t}(d.a);t.default=Object(d.b)(p,"SaveTriggerComponent")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(18),u=function(e){function t(){return i()(this,t),r()(this,e.apply(this,arguments))}return c()(t,e),t}(n(54).a);t.default=Object(l.b)(u,"InputComponent")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(8),u=n(1),d=n(18),p=function(e){function t(n){i()(this,t);var o=r()(this,e.call(this,n));return o.options=n.options||"",o.optionsText=n.optionsText||null,o.optionsValue=n.optionsValue||null,o.optionsCaption=n.optionsCaption||null,o.optionsCaption&&(o.optionsCaption=Object(l.i18n)(o.optionsCaption)),o.defautOptionsAfterRender=u.defautOptionsAfterRender,o}return c()(t,e),t}(n(54).a);t.default=Object(d.b)(p,"SelectComponent")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(18),u=function(e){function t(){return i()(this,t),r()(this,e.apply(this,arguments))}return c()(t,e),t}(n(166).a);t.default=Object(l.b)(u,"RadioComponent")},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(2),p=n(1),h=function(e){function t(n){i()(this,t);var o=r()(this,e.call(this));return o.values=d.a.observableArray([]),o.value=n.value,!Object(p.isUnd)(o.value)&&o.value.subscribe||(o.value=d.a.observable("")),o.inline=!Object(p.isUnd)(n.inline)&&n.inline,o.readOnly=!Object(p.isUnd)(n.readOnly)&&!!n.readOnly,n.values&&o.values(u.a.map(n.values,function(e,t){return{label:e,value:t}})),o.click=u.a.bind(o.click,o),o}return c()(t,e),t.prototype.click=function(e){!this.readOnly&&e&&this.value(e.value)},t}(n(18).a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n(18),d=5,p=function(e){function t(n){i()(this,t);var o=r()(this,e.call(this,n));return o.rows=n.rows||d,o.spellcheck=!Object(l.isUnd)(n.spellcheck)&&!!n.spellcheck,o}return c()(t,e),t}(n(54).a);t.default=Object(u.b)(p,"TextAreaComponent")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(18),u=function(e){function t(){return i()(this,t),r()(this,e.apply(this,arguments))}return c()(t,e),t}(n(54).a);t.default=Object(l.b)(u,"DateComponent")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(12),u=n.n(l),d=n(18),p=function(e){function t(n){i()(this,t);var o=r()(this,e.call(this));if(n.component&&n.component.templateNodes&&n.element&&n.element[0]&&n.element[0].outerHTML){var a=n.element[0].outerHTML;(a=a?a.replace(/<x-script/i,"<script").replace(/<b><\/b><\/x-script>/i,"<\/script>"):"")?(n.element.text(""),n.element.replaceWith(u()(a).text(n.component.templateNodes[0]&&n.component.templateNodes[0].nodeValue?n.component.templateNodes[0].nodeValue:""))):n.element.remove()}return o}return c()(t,e),t}(d.a);t.default=Object(d.b)(p,"ScriptComponent")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(2),p=n(18),h=function(e){function t(n){i()(this,t);var o=r()(this,e.call(this,n));return o.animationBox=d.a.observable(!1).extend({falseTimeout:200}),o.animationCheckmark=d.a.observable(!1).extend({falseTimeout:200}),o.animationBoxSetTrue=u.a.bind(o.animationBoxSetTrue,o),o.animationCheckmarkSetTrue=u.a.bind(o.animationCheckmarkSetTrue,o),o.disposable.push(o.value.subscribe(function(e){o.triggerAnimation(e)},o)),o}return c()(t,e),t.prototype.animationBoxSetTrue=function(){this.animationBox(!0)},t.prototype.animationCheckmarkSetTrue=function(){this.animationCheckmark(!0)},t.prototype.triggerAnimation=function(e){e?(this.animationBoxSetTrue(),u.a.delay(this.animationCheckmarkSetTrue,200)):(this.animationCheckmarkSetTrue(),u.a.delay(this.animationBoxSetTrue,200))},t}(n(96).a);t.default=Object(p.b)(h,"CheckboxMaterialDesignComponent")},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(11),u=n.n(l),d=n(6),p=n.n(d),h=n(12),f=n.n(h),m=n(83),b=n.n(m),g=n(1),y=n(3),v=n(7),S=n(20),O=n(33),w=n(40),T=n(27),C=n(14),A=n(37),E=n(8),F=n(56),j=n(34),N=n(41),R=n(145),_=n(47),I=n(147),P=n(98),L=n(174),M=n(38),D=n(53),k=n(45),x=n(177),U=n(93),H=n(10),B=n(97),G=n(17),K=n(94),V=n(44),z=n(224),q=n(225),W=n(226),Y=n(227),$=n(228),J=n(230),X=n(242),Z=n(9),Q=function(e){function t(){i()(this,t);var n=r()(this,e.call(this,G.a));return n.moveCache={},n.quotaDebounce=p.a.debounce(n.quota,y.Magics.Time30s),n.moveOrDeleteResponseHelper=p.a.bind(n.moveOrDeleteResponseHelper,n),n.messagesMoveTrigger=p.a.debounce(n.messagesMoveTrigger,500),u.a.setInterval(function(){return A.a("interval.30s")},y.Magics.Time30s),u.a.setInterval(function(){return A.a("interval.1m")},y.Magics.Time1m),u.a.setInterval(function(){return A.a("interval.2m")},y.Magics.Time2m),u.a.setInterval(function(){return A.a("interval.3m")},y.Magics.Time3m),u.a.setInterval(function(){return A.a("interval.5m")},y.Magics.Time5m),u.a.setInterval(function(){return A.a("interval.10m")},y.Magics.Time10m),u.a.setInterval(function(){return A.a("interval.15m")},y.Magics.Time15m),u.a.setInterval(function(){return A.a("interval.20m")},y.Magics.Time20m),u.a.setTimeout(function(){return u.a.setInterval(function(){return A.a("interval.2m-after5m")},y.Magics.Time2m)},y.Magics.Time5m),u.a.setTimeout(function(){return u.a.setInterval(function(){return A.a("interval.5m-after5m")},y.Magics.Time5m)},y.Magics.Time5m),u.a.setTimeout(function(){return u.a.setInterval(function(){return A.a("interval.10m-after5m")},y.Magics.Time10m)},y.Magics.Time5m),f.a.wakeUp(function(){Object(B.a)()&&n.reload(),G.a.jsVersion(function(e,t){y.StorageResultType.Success===e&&t&&!t.Result&&n.reload()},H.appSettingsGet("version"))},{},y.Magics.Time60m),Object(B.a)()&&n.reload(),H.settingsGet("UserBackgroundHash")&&p.a.delay(function(){f()("#rl-bg").attr("style","background-image: none !important;").backstretch(Object(C.J)(H.settingsGet("UserBackgroundHash")),{fade:v.bAnimationSupported?y.Magics.Time1s:0,centeredX:!0,centeredY:!0}).removeAttr("style")},y.Magics.Time1s),n.socialUsers=p.a.bind(n.socialUsers,n),n}return c()(t,e),t.prototype.remote=function(){return G.a},t.prototype.reload=function(){u.a.parent&&H.appSettingsGet("inIframe")?u.a.parent.location.reload():u.a.location.reload()},t.prototype.reloadFlagsCurrentMessageListAndMessageFromCache=function(){p.a.each(k.a.messageList(),function(e){Object(T.n)(e)}),Object(T.n)(k.a.message())},t.prototype.reloadMessageList=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(k.a.messageListPage()-1)*N.a.messagesPerPage();t&&Object(T.q)(M.a.currentFolderFullNameRaw(),""),e&&(k.a.messageListPage(1),k.a.messageListPageBeforeThread(1),n=0,Object(Z.setHash)(Object(C.o)(M.a.currentFolderFullNameHash(),k.a.messageListPage(),k.a.messageListSearch(),k.a.messageListThreadUid()),!0,!0)),k.a.messageListLoading(!0),G.a.messageList(function(e,t,n){y.StorageResultType.Success===e&&t&&t.Result?(k.a.messageListError(""),k.a.messageListLoading(!1),k.a.setMessageList(t,n)):y.StorageResultType.Unload===e?(k.a.messageListError(""),k.a.messageListLoading(!1)):y.StorageResultType.Abort!==e&&(k.a.messageList([]),k.a.messageListLoading(!1),k.a.messageListError(t&&t.ErrorCode?Object(E.getNotification)(t.ErrorCode):Object(E.i18n)("NOTIFICATIONS/CANT_GET_MESSAGE_LIST")))},M.a.currentFolderFullNameRaw(),n,N.a.messagesPerPage(),k.a.messageListSearch(),k.a.messageListThreadUid())},t.prototype.recacheInboxMessageList=function(){G.a.messageList(g.noop,Object(T.h)(),0,N.a.messagesPerPage(),"","",!0)},t.prototype.contactsSync=function(e){var t=I.a.contacts;return!(t.importing()||t.syncing()||!I.a.enableContactsSync()||!I.a.allowContactsSync())&&(t.syncing(!0),G.a.contactsSync(function(n,o){t.syncing(!1),e&&e(n,o)}),!0)},t.prototype.messagesMoveTrigger=function(){var e=this,t=M.a.trashFolder(),n=M.a.spamFolder();p.a.each(this.moveCache,function(o){var i=n===o.To,a=t===o.To,r=!i&&n===o.From&&Object(T.h)()===o.To;G.a.messagesMove(e.moveOrDeleteResponseHelper,o.From,o.To,o.Uid,i?"SPAM":r?"HAM":"",i||a)}),this.moveCache={}},t.prototype.messagesMoveHelper=function(e,t,n){var o="$$"+e+"$$"+t+"$$";this.moveCache[o]||(this.moveCache[o]={From:e,To:t,Uid:[]}),this.moveCache[o].Uid=p.a.union(this.moveCache[o].Uid,n),this.messagesMoveTrigger()},t.prototype.messagesCopyHelper=function(e,t,n){G.a.messagesCopy(this.moveOrDeleteResponseHelper,e,t,n)},t.prototype.messagesDeleteHelper=function(e,t){G.a.messagesDelete(this.moveOrDeleteResponseHelper,e,t)},t.prototype.moveOrDeleteResponseHelper=function(e,t){y.StorageResultType.Success===e&&M.a.currentFolder()&&(t&&Object(g.isArray)(t.Result)&&2===t.Result.length?Object(T.q)(t.Result[0],t.Result[1]):(Object(T.q)(M.a.currentFolderFullNameRaw(),""),t&&-1<Object(g.inArray)(t.ErrorCode,[y.Notification.CantMoveMessage,y.Notification.CantCopyMessage])&&u.a.alert(Object(E.getNotification)(t.ErrorCode))),this.reloadMessageList(0===k.a.messageList().length),this.quotaDebounce())},t.prototype.deleteMessagesFromFolderWithoutCheck=function(e,t){this.messagesDeleteHelper(e,t),k.a.removeMessagesFromList(e,t)},t.prototype.deleteMessagesFromFolder=function(e,t,o,i){var a=this,r=null,s=null;switch(e){case y.FolderType.Spam:r=Object(T.e)(M.a.spamFolder()),s=y.SetSystemFoldersNotification.Spam;break;case y.FolderType.NotSpam:r=Object(T.e)(Object(T.h)());break;case y.FolderType.Trash:r=Object(T.e)(M.a.trashFolder()),s=y.SetSystemFoldersNotification.Trash;break;case y.FolderType.Archive:r=Object(T.e)(M.a.archiveFolder()),s=y.SetSystemFoldersNotification.Archive}(i=!!Object(g.isUnd)(i)||!!i)&&(y.FolderType.Spam===e&&S.r===M.a.spamFolder()||y.FolderType.Trash===e&&S.r===M.a.trashFolder()||y.FolderType.Archive===e&&S.r===M.a.archiveFolder())&&(i=!1),!r&&i?Object(Z.showScreenPopup)(n(100),[s]):i&&(y.FolderType.Trash!==e||t!==M.a.spamFolder()&&t!==M.a.trashFolder())?r&&(this.messagesMoveHelper(t,r.fullNameRaw,o),k.a.removeMessagesFromList(t,o,r.fullNameRaw)):Object(Z.showScreenPopup)(n(77),[Object(E.i18n)("POPUPS_ASK/DESC_WANT_DELETE_MESSAGES"),function(){a.messagesDeleteHelper(t,o),k.a.removeMessagesFromList(t,o)}])},t.prototype.moveMessagesToFolder=function(e,t,n,o){if(e!==n&&Object(g.isArray)(t)&&0<t.length){var i=Object(T.e)(e),a=Object(T.e)(n);if(i&&a)return Object(g.isUnd)(o)||!o?this.messagesMoveHelper(i.fullNameRaw,a.fullNameRaw,t):this.messagesCopyHelper(i.fullNameRaw,a.fullNameRaw,t),k.a.removeMessagesFromList(i.fullNameRaw,t,a.fullNameRaw,o),!0}return!1},t.prototype.foldersReload=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=K.a.foldersReload(M.a.foldersLoading);e&&t.then(function(e){return!!e}).then(e).catch(function(){p.a.delay(function(){e&&e(!1)},1)})},t.prototype.foldersPromisesActionHelper=function(e,t){K.a.abort("Folders").fastResolve(!0).then(function(){return e}).then(function(){K.a.foldersReloadWithTimeout(M.a.foldersLoading)},function(e){M.a.folderList.error(Object(E.getNotification)(e,"",t)),K.a.foldersReloadWithTimeout(M.a.foldersLoading)})},t.prototype.reloadOpenPgpKeys=function(){if(D.a.capaOpenPGP()){var e=[],t=new V.EmailModel,n=D.a.openpgpKeyring,o=n?n.getAllKeys():[];p.a.each(o,function(n,o){if(n&&n.primaryKey){var i=[],a=[],r=n.getPrimaryUser(),s=r&&r.user?r.user.userId.userid:n.users&&n.users[0]?n.users[0].userId.userid:"";n.users&&p.a.each(n.users,function(e){e.userId&&(t.clear(),t.mailsoParse(e.userId.userid),t.validate()&&(i.push(t.email),a.push(e.userId.userid)))}),i.length&&e.push(new Y.a(o,n.primaryKey.getFingerprint(),n.primaryKey.getKeyId().toHex().toLowerCase(),p.a.uniq(p.a.compact(p.a.map(n.getKeyIds(),function(e){return e&&e.toHex?e.toHex():null}))),a,i,n.isPrivate(),n.armor(),s))}}),Object(g.delegateRunOnDestroy)(D.a.openpgpkeys()),D.a.openpgpkeys(e)}},t.prototype.accountsCounts=function(){return!1},t.prototype.accountsAndIdentities=function(e){var t=this;_.a.accounts.loading(!0),P.a.identities.loading(!0),G.a.accountsAndIdentities(function(n,o){if(_.a.accounts.loading(!1),P.a.identities.loading(!1),y.StorageResultType.Success===n&&o.Result){var i={},a=_.a.email(),r=H.settingsGet("ParentEmail");r=""===r?a:r,Object(g.isArray)(o.Result.Accounts)&&(p.a.each(_.a.accounts(),function(e){i[e.email]=e.count()}),Object(g.delegateRunOnDestroy)(_.a.accounts()),_.a.accounts(p.a.map(o.Result.Accounts,function(e){return new z.a(e,e!==r,i[e]||0)}))),Object(g.isUnd)(e)||!e||(p.a.delay(function(){return t.accountsCounts()},5e3),A.b("interval.10m-after5m",function(){return t.accountsCounts()})),Object(g.isArray)(o.Result.Identities)&&(Object(g.delegateRunOnDestroy)(P.a.identities()),P.a.identities(p.a.map(o.Result.Identities,function(e){var t=Object(g.pString)(e.Id),n=Object(g.pString)(e.Email),o=new q.a(t,n);return o.name(Object(g.pString)(e.Name)),o.replyTo(Object(g.pString)(e.ReplyTo)),o.bcc(Object(g.pString)(e.Bcc)),o.signature(Object(g.pString)(e.Signature)),o.signatureInsertBefore(!!e.SignatureInsertBefore),o})))}})},t.prototype.templates=function(){L.a.templates.loading(!0),G.a.templates(function(e,t){L.a.templates.loading(!1),y.StorageResultType.Success===e&&t.Result&&Object(g.isArray)(t.Result.Templates)&&(Object(g.delegateRunOnDestroy)(L.a.templates()),L.a.templates(p.a.compact(p.a.map(t.Result.Templates,function(e){var t=new W.a;return t.parse(e)?t:null}))))})},t.prototype.quota=function(){G.a.quota(function(e,t){y.StorageResultType.Success===e&&t&&t.Result&&Object(g.isArray)(t.Result)&&1<t.Result.length&&Object(g.isPosNumeric)(t.Result[0],!0)&&Object(g.isPosNumeric)(t.Result[1],!0)&&x.a.populateData(Object(g.pInt)(t.Result[1]),Object(g.pInt)(t.Result[0]))})},t.prototype.folderInformation=function(e,t){var n=this;""!==Object(g.trim)(e)&&G.a.folderInformation(function(e,t){if(y.StorageResultType.Success===e&&t&&t.Result&&t.Result.Hash&&t.Result.Folder){var o="",i=!1,a=!1,r=Object(T.e)(t.Result.Folder);if(r){if(r.interval=Object(w.momentNowUnix)(),t.Result.Hash&&Object(T.q)(t.Result.Folder,t.Result.Hash),Object(g.isNormal)(t.Result.MessageCount)&&r.messageCountAll(t.Result.MessageCount),Object(g.isNormal)(t.Result.MessageUnseenCount)&&(Object(g.pInt)(r.messageCountUnread())!==Object(g.pInt)(t.Result.MessageUnseenCount)&&(a=!0),r.messageCountUnread(t.Result.MessageUnseenCount)),a&&Object(T.c)(r.fullNameRaw),t.Result.Flags){for(o in t.Result.Flags)if(Object(g.has)(t.Result.Flags,o)){i=!0;var s=t.Result.Flags[o];Object(T.v)(r.fullNameRaw,o.toString(),[!s.IsSeen,!!s.IsFlagged,!!s.IsAnswered,!!s.IsForwarded,!!s.IsReadReceipt])}i&&n.reloadFlagsCurrentMessageListAndMessageFromCache()}k.a.initUidNextAndNewMessages(r.fullNameRaw,t.Result.UidNext,t.Result.NewMessages);var c=Object(T.g)(t.Result.Folder);(t.Result.Hash!==c||""===c||a)&&(r.fullNameRaw===M.a.currentFolderFullNameRaw()?n.reloadMessageList():Object(T.h)()===r.fullNameRaw&&n.recacheInboxMessageList())}}},e,t)},t.prototype.folderInformationMultiply=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=M.a.getNextFolderNames();Object(g.isNonEmptyArray)(n)&&G.a.folderInformationMultiply(function(n,o){if(y.StorageResultType.Success===n&&o&&o.Result&&o.Result.List&&Object(g.isNonEmptyArray)(o.Result.List)){var i=Object(w.momentNowUnix)();p.a.each(o.Result.List,function(t){var n=Object(T.g)(t.Folder),o=Object(T.e)(t.Folder),a=!1;if(o)if(o.interval=i,t.Hash&&Object(T.q)(t.Folder,t.Hash),Object(g.isNormal)(t.MessageCount)&&o.messageCountAll(t.MessageCount),Object(g.isNormal)(t.MessageUnseenCount)&&(Object(g.pInt)(o.messageCountUnread())!==Object(g.pInt)(t.MessageUnseenCount)&&(a=!0),o.messageCountUnread(t.MessageUnseenCount)),a&&Object(T.c)(o.fullNameRaw),t.Hash!==n||""===n)o.fullNameRaw===M.a.currentFolderFullNameRaw()&&e.reloadMessageList();else if(a&&o.fullNameRaw===M.a.currentFolderFullNameRaw()){var r=k.a.messageList();Object(g.isNonEmptyArray)(r)&&e.folderInformation(o.fullNameRaw,r)}}),t&&p.a.delay(function(){return e.folderInformationMultiply(!0)},2e3)}},n)},t.prototype.messageListAction=function(e,t,n){var o=null,i=0,a=[];if(!Object(g.isUnd)(n)&&n||(n=k.a.messageListChecked()),a=p.a.uniq(p.a.compact(p.a.map(n,function(e){return e&&e.uid?e.uid:null}))),""!==e&&0<a.length){switch(t){case y.MessageSetAction.SetSeen:p.a.each(a,function(n){i+=Object(T.w)(e,n,t)}),(o=Object(T.e)(e))&&o.messageCountUnread(o.messageCountUnread()-i),G.a.messageSetSeen(g.noop,e,a,!0);break;case y.MessageSetAction.UnsetSeen:p.a.each(a,function(n){i+=Object(T.w)(e,n,t)}),(o=Object(T.e)(e))&&o.messageCountUnread(o.messageCountUnread()-i+a.length),G.a.messageSetSeen(g.noop,e,a,!1);break;case y.MessageSetAction.SetFlag:p.a.each(a,function(n){Object(T.w)(e,n,t)}),G.a.messageSetFlagged(g.noop,e,a,!0);break;case y.MessageSetAction.UnsetFlag:p.a.each(a,function(n){Object(T.w)(e,n,t)}),G.a.messageSetFlagged(g.noop,e,a,!1)}this.reloadFlagsCurrentMessageListAndMessageFromCache(),k.a.message.viewTrigger(!k.a.message.viewTrigger())}},t.prototype.googleConnect=function(){u.a.open(Object(C.B)(),"Google","left=200,top=100,width=650,height=600,menubar=no,status=no,resizable=yes,scrollbars=yes")},t.prototype.twitterConnect=function(){u.a.open(Object(C.C)(),"Twitter","left=200,top=100,width=650,height=350,menubar=no,status=no,resizable=yes,scrollbars=yes")},t.prototype.facebookConnect=function(){u.a.open(Object(C.A)(),"Facebook","left=200,top=100,width=650,height=335,menubar=no,status=no,resizable=yes,scrollbars=yes")},t.prototype.socialUsers=function(){!0===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&(F.a.google.loading(!0),F.a.facebook.loading(!0),F.a.twitter.loading(!0)),G.a.socialUsers(function(e,t){y.StorageResultType.Success===e&&t&&t.Result?(F.a.google.userName(t.Result.Google||""),F.a.facebook.userName(t.Result.Facebook||""),F.a.twitter.userName(t.Result.Twitter||"")):(F.a.google.userName(""),F.a.facebook.userName(""),F.a.twitter.userName("")),F.a.google.loading(!1),F.a.facebook.loading(!1),F.a.twitter.loading(!1)})},t.prototype.googleDisconnect=function(){F.a.google.loading(!0),G.a.googleDisconnect(this.socialUsers)},t.prototype.facebookDisconnect=function(){F.a.facebook.loading(!0),G.a.facebookDisconnect(this.socialUsers)},t.prototype.twitterDisconnect=function(){F.a.twitter.loading(!0),G.a.twitterDisconnect(this.socialUsers)},t.prototype.getAutocomplete=function(e,t){G.a.suggestions(function(e,n){y.StorageResultType.Success===e&&n&&Object(g.isArray)(n.Result)?t(p.a.compact(p.a.map(n.Result,function(e){return e&&e[0]?new V.EmailModel(e[0],e[1]):null}))):y.StorageResultType.Abort!==e&&t([])},e)},t.prototype.setExpandedFolder=function(e,t){var n=U.a(y.ClientSideKeyName.ExpandedFolders);Object(g.isArray)(n)||(n=[]),t?(n.push(e),n=p.a.uniq(n)):n=p.a.without(n,e),U.b(y.ClientSideKeyName.ExpandedFolders,n)},t.prototype.initHorizontalLayoutResizer=function(e){var t=null,n=null,o=function(e){e&&(t&&t.attr("style","height:"+e+"px"),n&&n.attr("style","top:"+(55+e)+"px"))},i={helper:"ui-resizable-helper-h",minHeight:200,maxHeight:500,handles:"s",create:function(e){e&&e.target&&f()(e.target).find(".ui-resizable-handle").on("mousedown",function(){v.$html.addClass("rl-resizer")}).on("mouseup",function(){v.$html.removeClass("rl-resizer")})},resize:p.a.debounce(function(){v.$html.addClass("rl-resizer")},500,!0),start:function(){v.$html.addClass("rl-resizer")},stop:function(t,n){v.$html.removeClass("rl-resizer"),n&&n.size&&n.size.height&&(U.b(e,n.size.height),o(n.size.height),Object(g.windowResize)())}},a=function(a){if(a)t&&t.hasClass("ui-resizable")&&t.resizable("destroy").removeAttr("style"),n&&n.removeAttr("style");else if(v.$html.hasClass("rl-bottom-preview-pane")){t=f()(".b-message-list-wrapper"),n=f()(".b-message-view-wrapper"),t.hasClass("ui-resizable")||t.resizable(i);var r=Object(g.pInt)(U.a(e))||300;o(r>200?r:200)}};a(!1),A.b("layout",function(e){a(y.Layout.BottomPreview!==e)})},t.prototype.initVerticalLayoutResizer=function(e){var t=f()("#rl-left"),n=f()("#rl-right"),o=U.a(e)||null,i=function(e){e&&(Object(v.leftPanelWidth)(e),v.$html.removeClass("rl-resizer"),t.css({width:e+"px"}),n.css({left:e+"px"}))},a=function(n){if(n)t.resizable("disable"),i(60);else{t.resizable("enable");var o=Object(g.pInt)(U.a(e))||155;i(o>155?o:155)}},r=p.a.debounce(function(){v.$html.addClass("rl-resizer")},500,!0);null!==o&&i(o>155?o:155),t.resizable({helper:"ui-resizable-helper-w",minWidth:155,maxWidth:y.Magics.Size350px,handles:"e",create:function(e){e&&e.target&&f()(e.target).find(".ui-resizable-handle").on("mousedown",function(){v.$html.addClass("rl-resizer")}).on("mouseup",function(){v.$html.removeClass("rl-resizer")})},resize:r,start:function(){v.$html.addClass("rl-resizer")},stop:function(o,i){v.$html.removeClass("rl-resizer"),i&&i.size&&i.size.width&&(U.b(e,i.size.width),Object(v.leftPanelWidth)(i.size.width),n.css({left:i.size.width+"px"}),t.css({position:"",top:"",left:"",height:""}))}}),A.b("left-panel.off",function(){a(!0)}),A.b("left-panel.on",function(){a(!1)})},t.prototype.logout=function(){var e=this;G.a.logout(function(){e.loginAndLogoutReload(!1,!0,H.settingsGet("ParentEmail")&&0<H.settingsGet("ParentEmail").length)})},t.prototype.bootstartTwoFactorScreen=function(){Object(Z.showScreenPopup)(n(186),[!0])},t.prototype.bootstartWelcomePopup=function(e){Object(Z.showScreenPopup)(n(264),[e])},t.prototype.bootstartLoginScreen=function(){v.$html.removeClass("rl-user-auth").addClass("rl-user-no-auth");var e=Object(g.pString)(H.appSettingsGet("customLoginLink"));e?(Object(Z.routeOff)(),Object(Z.setHash)(Object(C.w)(),!0),Object(Z.routeOff)(),p.a.defer(function(){u.a.location.href=e})):(Object(Z.startScreens)([$.a]),Object(O.f)("rl-start-login-screens"),A.a("rl.bootstart-login-screens"))},t.prototype.bootend=function(){b.a&&b.a.set(100).end(),Object(Z.hideLoading)()},t.prototype.bootstart=function(){var t=this;e.prototype.bootstart.call(this),j.a.populate(),N.a.populate(),R.a.populate(),_.a.populate(),I.a.populate();var o=Object(g.pInt)(H.settingsGet("ContactsSyncInterval")),i=H.appSettingsGet("jsHash"),a=Object(g.pString)(H.settingsGet("StartupUrl")),r=H.settingsGet("AllowGoogleSocial"),s=H.settingsGet("AllowFacebookSocial"),c=H.settingsGet("AllowTwitterSocial");b.a&&b.a.set(90),v.leftPanelDisabled.subscribe(function(e){A.a("left-panel."+(e?"off":"on"))}),this.setWindowTitle(""),H.settingsGet("Auth")?(v.$html.addClass("rl-user-auth"),H.capa(y.Capa.TwoFactor)&&H.capa(y.Capa.TwoFactorForce)&&H.settingsGet("RequireTwoFactor")?(this.bootend(),this.bootstartTwoFactorScreen()):(this.setWindowTitle(Object(E.i18n)("TITLES/LOADING")),this.foldersReload(function(e){if(t.bootend(),e){if(""!==a&&(Object(Z.routeOff)(),Object(Z.setHash)(Object(C.w)(a),!0),Object(Z.routeOn)()),g.jassl&&u.a.crypto&&u.a.crypto.getRandomValues&&H.capa(y.Capa.OpenPGP)){var i=function(e){if(D.a.openpgp=e,u.a.Worker)try{D.a.openpgp.initWorker({path:Object(C.t)()})}catch(e){Object(g.log)(e)}D.a.openpgpKeyring=new e.Keyring,D.a.capaOpenPGP(!0),A.a("openpgp.init"),t.reloadOpenPgpKeys()};u.a.openpgp?i(u.a.openpgp):Object(g.jassl)(Object(C.s)()).then(function(){u.a.openpgp&&i(u.a.openpgp)})}else D.a.capaOpenPGP(!1);Object(Z.startScreens)([J.a,H.capa(y.Capa.Settings)?X.a:null]),(r||s||c)&&t.socialUsers(!0),A.b("interval.2m",function(){return t.folderInformation(Object(T.h)())}),A.b("interval.3m",function(){var e=M.a.currentFolderFullNameRaw();Object(T.h)()!==e&&t.folderInformation(e)}),A.b("interval.2m-after5m",function(){return t.folderInformationMultiply()}),A.b("interval.15m",function(){return t.quota()}),A.b("interval.20m",function(){return t.foldersReload()}),o=320>=(o=5<=o?o:20)?o:320,p.a.delay(function(){return t.contactsSync()},y.Magics.Time10s),p.a.delay(function(){return t.folderInformationMultiply(!0)},y.Magics.Time2s),u.a.setInterval(function(){return t.contactsSync()},6e4*o+5e3),t.accountsAndIdentities(!0),p.a.delay(function(){var e=M.a.currentFolderFullNameRaw();Object(T.h)()!==e&&t.folderInformation(e)},1e3),p.a.delay(function(){return t.quota()},5e3),p.a.delay(function(){return G.a.appDelayStart(g.noop)},35e3),A.b("rl.auto-logout",function(){return t.logout()}),Object(O.f)("rl-start-user-screens"),A.a("rl.bootstart-user-screens"),H.settingsGet("WelcomePageUrl")&&p.a.delay(function(){return t.bootstartWelcomePopup(H.settingsGet("WelcomePageUrl"))},1e3),H.settingsGet("AccountSignMe")&&u.a.navigator.registerProtocolHandler&&H.capa(y.Capa.Composer)&&p.a.delay(function(){try{u.a.navigator.registerProtocolHandler("mailto",u.a.location.protocol+"//"+u.a.location.host+u.a.location.pathname+"?mailto&to=%s",""+(H.settingsGet("Title")||"RainLoop"))}catch(e){}H.settingsGet("MailToEmail")&&Object(g.mailToHelper)(H.settingsGet("MailToEmail"),n(43))},500),v.bMobileDevice||p.a.defer(function(){return t.initVerticalLayoutResizer(y.ClientSideKeyName.FolderListSize)})}else t.logout()}))):(this.bootend(),this.bootstartLoginScreen()),r&&(u.a["rl_"+i+"_google_service"]=function(){F.a.google.loading(!0),t.socialUsers()}),s&&(u.a["rl_"+i+"_facebook_service"]=function(){F.a.facebook.loading(!0),t.socialUsers()}),c&&(u.a["rl_"+i+"_twitter_service"]=function(){F.a.twitter.loading(!0),t.socialUsers()}),A.b("interval.1m",function(){return Object(w.reload)()}),Object(O.f)("rl-start-screens"),A.a("rl.bootstart-end")},t}(n(152).a);t.default=new Q},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(2),r=n(6),s=n.n(r),c=function(){function e(){i()(this,e),this.templates=a.a.observableArray([]),this.templates.loading=a.a.observable(!1).extend({throttle:100}),this.templatesNames=a.a.observableArray([]).extend({throttle:1e3}),this.templatesNames.skipFirst=!0,this.subscribers()}return e.prototype.subscribers=function(){var e=this;this.templates.subscribe(function(t){e.templatesNames(s.a.compact(s.a.map(t,function(e){return e?e.name:null})))})},e}();t.a=new c},function(e,t,n){"use strict";t.b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0,a=0,r=[];if(Object(o.isNonEmptyArray)(e))for(a=e.length;i<a;i++)r.push(e[i].toLine(t,n));return r.join(", ")},t.c=function(e){var t=0,n=0,i=[];if(Object(o.isNonEmptyArray)(e))for(n=e.length;t<n;t++)e[t]&&e[t].email&&""!==e[t].name&&i.push(e[t].email);return i.join(", ")},t.a=function(e){var t=0,n=0,a=null,r=[];if(Object(o.isNonEmptyArray)(e))for(t=0,n=e.length;t<n;t++)(a=i.EmailModel.newInstanceFromJson(e[t]))&&r.push(a);return r},t.d=function(e,t,n){if(e&&0<e.length)for(var i=0,a=e.length;i<a;i++)Object(o.isUnd)(t[e[i].email])&&(t[e[i].email]=!0,n.push(e[i]))};var o=n(1),i=n(44)},function(e,t,n){"use strict";n.d(t,"c",function(){return S}),n.d(t,"d",function(){return O}),n.d(t,"b",function(){return w}),n.d(t,"a",function(){return T});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(11),u=n.n(l),d=n(6),p=n.n(d),h=n(2),f=n(3),m=n(7),b=n(1),g=n(14),y=n(42),v=n(146),S=p.a.memoize(function(e,t){e=Object(b.trim)(e).toLowerCase(),t=Object(b.trim)(t).toLowerCase();var n=f.FileType.Unknown,o=t.split("/");switch(!0){case"image"===o[0]||-1<Object(b.inArray)(e,["png","jpg","jpeg","gif","bmp"]):n=f.FileType.Image;break;case"audio"===o[0]||-1<Object(b.inArray)(e,["mp3","ogg","oga","wav"]):n=f.FileType.Audio;break;case"video"===o[0]||-1<Object(b.inArray)(e,["mkv","avi"]):n=f.FileType.Video;break;case-1<Object(b.inArray)(e,["php","js","css"]):n=f.FileType.Code;break;case"eml"===e||-1<Object(b.inArray)(t,["message/delivery-status","message/rfc822"]):n=f.FileType.Eml;break;case"text"===o[0]&&"html"!==o[1]||-1<Object(b.inArray)(e,["txt","log"]):n=f.FileType.Text;break;case"text/html"===t||-1<Object(b.inArray)(e,["html"]):n=f.FileType.Html;break;case-1<Object(b.inArray)(o[1],["zip","7z","tar","rar","gzip","bzip","bzip2","x-zip","x-7z","x-rar","x-tar","x-gzip","x-bzip","x-bzip2","x-zip-compressed","x-7z-compressed","x-rar-compressed"])||-1<Object(b.inArray)(e,["zip","7z","tar","rar","gzip","bzip","bzip2"]):n=f.FileType.Archive;break;case-1<Object(b.inArray)(o[1],["pdf","x-pdf"])||-1<Object(b.inArray)(e,["pdf"]):n=f.FileType.Pdf;break;case-1<Object(b.inArray)(t,["application/pgp-signature","application/pgp-keys"])||-1<Object(b.inArray)(e,["asc","pem","ppk"]):n=f.FileType.Certificate;break;case-1<Object(b.inArray)(t,["application/pkcs7-signature"])||-1<Object(b.inArray)(e,["p7s"]):n=f.FileType.CertificateBin;break;case-1<Object(b.inArray)(o[1],["rtf","msword","vnd.msword","vnd.openxmlformats-officedocument.wordprocessingml.document","vnd.openxmlformats-officedocument.wordprocessingml.template","vnd.ms-word.document.macroEnabled.12","vnd.ms-word.template.macroEnabled.12"]):n=f.FileType.WordText;break;case-1<Object(b.inArray)(o[1],["excel","ms-excel","vnd.ms-excel","vnd.openxmlformats-officedocument.spreadsheetml.sheet","vnd.openxmlformats-officedocument.spreadsheetml.template","vnd.ms-excel.sheet.macroEnabled.12","vnd.ms-excel.template.macroEnabled.12","vnd.ms-excel.addin.macroEnabled.12","vnd.ms-excel.sheet.binary.macroEnabled.12"]):n=f.FileType.Sheet;break;case-1<Object(b.inArray)(o[1],["powerpoint","ms-powerpoint","vnd.ms-powerpoint","vnd.openxmlformats-officedocument.presentationml.presentation","vnd.openxmlformats-officedocument.presentationml.template","vnd.openxmlformats-officedocument.presentationml.slideshow","vnd.ms-powerpoint.addin.macroEnabled.12","vnd.ms-powerpoint.presentation.macroEnabled.12","vnd.ms-powerpoint.template.macroEnabled.12","vnd.ms-powerpoint.slideshow.macroEnabled.12"]):n=f.FileType.Presentation}return n}),O=p.a.memoize(function(e){var t="",n="icon-file";switch(e){case f.FileType.Text:case f.FileType.Eml:case f.FileType.WordText:n="icon-file-text";break;case f.FileType.Html:case f.FileType.Code:n="icon-file-code";break;case f.FileType.Image:n="icon-file-image";break;case f.FileType.Audio:n="icon-file-music";break;case f.FileType.Video:n="icon-file-movie";break;case f.FileType.Archive:n="icon-file-zip";break;case f.FileType.Certificate:case f.FileType.CertificateBin:n="icon-file-certificate";break;case f.FileType.Sheet:n="icon-file-excel";break;case f.FileType.Presentation:n="icon-file-chart-graph";break;case f.FileType.Pdf:t="pdf",n="icon-none"}return[n,t]}),w=function(e){var t="",n=[];if(Object(b.isNonEmptyArray)(e)&&(t="icon-attachment",(n=p.a.uniq(p.a.compact(p.a.map(e,function(e){return e?S(Object(b.getFileExtension)(e[0]),e[1]):""}))))&&1===n.length&&n[0]))switch(n[0]){case f.FileType.Text:case f.FileType.WordText:t="icon-file-text";break;case f.FileType.Html:case f.FileType.Code:t="icon-file-code";break;case f.FileType.Image:t="icon-file-image";break;case f.FileType.Audio:t="icon-file-music";break;case f.FileType.Video:t="icon-file-movie";break;case f.FileType.Archive:t="icon-file-zip";break;case f.FileType.Certificate:case f.FileType.CertificateBin:t="icon-file-certificate";break;case f.FileType.Sheet:t="icon-file-excel";break;case f.FileType.Presentation:t="icon-file-chart-graph"}return t},T=function(e){function t(){i()(this,t);var n=r()(this,e.call(this,"AttachmentModel"));return n.checked=h.a.observable(!1),n.mimeType="",n.fileName="",n.fileNameExt="",n.fileType=f.FileType.Unknown,n.estimatedSize=0,n.friendlySize="",n.isInline=!1,n.isLinked=!1,n.isThumbnail=!1,n.cid="",n.cidWithOutTags="",n.contentLocation="",n.download="",n.folder="",n.uid="",n.mimeIndex="",n.framed=!1,n}return c()(t,e),t.newInstanceFromJson=function(e){var n=new t;return n.initByJson(e)?n:null},t.prototype.initByJson=function(e){var t=!1;return e&&"Object/Attachment"===e["@Object"]&&(this.mimeType=Object(b.trim)((e.MimeType||"").toLowerCase()),this.fileName=Object(b.trim)(e.FileName),this.estimatedSize=Object(b.pInt)(e.EstimatedSize),this.isInline=!!e.IsInline,this.isLinked=!!e.IsLinked,this.isThumbnail=!!e.IsThumbnail,this.cid=e.CID,this.contentLocation=e.ContentLocation,this.download=e.Download,this.folder=e.Folder,this.uid=e.Uid,this.mimeIndex=e.MimeIndex,this.framed=!!e.Framed,this.friendlySize=Object(b.friendlySize)(this.estimatedSize),this.cidWithOutTags=this.cid.replace(/^<+/,"").replace(/>+$/,""),this.fileNameExt=Object(b.getFileExtension)(this.fileName),this.fileType=S(this.fileNameExt,this.mimeType),t=!0),t},t.prototype.isImage=function(){return f.FileType.Image===this.fileType},t.prototype.isMp3=function(){return f.FileType.Audio===this.fileType&&"mp3"===this.fileNameExt},t.prototype.isOgg=function(){return f.FileType.Audio===this.fileType&&("oga"===this.fileNameExt||"ogg"===this.fileNameExt)},t.prototype.isWav=function(){return f.FileType.Audio===this.fileType&&"wav"===this.fileNameExt},t.prototype.hasThumbnail=function(){return this.isThumbnail},t.prototype.isText=function(){return f.FileType.Text===this.fileType||f.FileType.Eml===this.fileType||f.FileType.Certificate===this.fileType||f.FileType.Html===this.fileType||f.FileType.Code===this.fileType},t.prototype.isPdf=function(){return f.FileType.Pdf===this.fileType},t.prototype.isFramed=function(){return this.framed&&m.data.__APP__&&m.data.__APP__.googlePreviewSupported()&&!(this.isPdf()&&m.bAllowPdfPreview)&&!this.isText()&&!this.isImage()},t.prototype.hasPreview=function(){return this.isImage()||this.isPdf()&&m.bAllowPdfPreview||this.isText()||this.isFramed()},t.prototype.hasPreplay=function(){return v.a.supportedMp3&&this.isMp3()||v.a.supportedOgg&&this.isOgg()||v.a.supportedWav&&this.isWav()},t.prototype.linkDownload=function(){return Object(g.c)(this.download)},t.prototype.linkPreview=function(){return Object(g.e)(this.download)},t.prototype.linkThumbnail=function(){return this.hasThumbnail()?Object(g.g)(this.download):""},t.prototype.linkThumbnailPreviewStyle=function(){var e=this.linkThumbnail();return""===e?"":"background:url("+e+")"},t.prototype.linkFramed=function(){return Object(g.d)(this.download)},t.prototype.linkPreviewAsPlain=function(){return Object(g.f)(this.download)},t.prototype.linkPreviewMain=function(){var e="";switch(!0){case this.isImage():case this.isPdf()&&m.bAllowPdfPreview:e=this.linkPreview();break;case this.isText():e=this.linkPreviewAsPlain();break;case this.isFramed():e=this.linkFramed()}return e},t.prototype.generateTransferDownloadUrl=function(){var e=this.linkDownload();return"http"!==e.substr(0,4)&&(e=u.a.location.protocol+"//"+u.a.location.host+u.a.location.pathname+e),this.mimeType+":"+this.fileName+":"+e},t.prototype.eventDragStart=function(e,t){var n=t.originalEvent||t;return e&&n&&n.dataTransfer&&n.dataTransfer.setData&&n.dataTransfer.setData("DownloadURL",this.generateTransferDownloadUrl()),!0},t.prototype.iconClass=function(){return O(this.fileType)[0]},t.prototype.iconText=function(){return O(this.fileType)[1]},t}(y.a)},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(2),c=n(3),l=function(){function e(){var t=this;i()(this,e),this.quota=s.a.observable(0),this.usage=s.a.observable(0),this.percentage=s.a.computed(function(){var e=t.quota(),n=t.usage();return 0<e?r.a.Math.ceil(n/e*100):0})}return e.prototype.populateData=function(e,t){this.quota(e*c.Magics.BitLength1024),this.usage(t*c.Magics.BitLength1024)},e}();t.a=new l},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(1),c=function(){function e(){i()(this,e),this.oPromisesStack={}}return e.prototype.func=function(e){return e(),this},e.prototype.fastResolve=function(e){return r.a.Promise.resolve(e)},e.prototype.fastReject=function(e){return r.a.Promise.reject(e)},e.prototype.setTrigger=function(e,t){e&&(t=!!t,(Object(s.isArray)(e)?e:[e]).forEach(function(e){e&&e(t)}))},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(2),p=n(19),h=n.n(p),f=n(34),m=n(47),b=n(45),g=n(3),y=n(1),v=n(14),S=n(37),O=n(10),w=n(16),T=n(9),C=function(e){function t(){i()(this,t);var n=r()(this,e.call(this));return n.logoImg=Object(y.trim)(O.settingsGet("UserLogo")),n.logoTitle=Object(y.trim)(O.settingsGet("UserLogoTitle")),n.mobile=!!O.appSettingsGet("mobile"),n.mobileDevice=!!O.appSettingsGet("mobileDevice"),n.allowSettings=!!O.capa(g.Capa.Settings),n.allowHelp=!!O.capa(g.Capa.Help),n.currentAudio=f.a.currentAudio,n.accountEmail=m.a.email,n.accounts=m.a.accounts,n.accountsUnreadCount=m.a.accountsUnreadCount,n.accountMenuDropdownTrigger=d.a.observable(!1),n.capaAdditionalAccounts=d.a.observable(O.capa(g.Capa.AdditionalAccounts)),n.addAccountClick=u.a.bind(n.addAccountClick,n),S.b("audio.stop",function(){return f.a.currentAudio("")}),S.b("audio.start",function(e){return f.a.currentAudio(e)}),n}return c()(t,e),t.prototype.stopPlay=function(){S.a("audio.api.stop")},t.prototype.accountClick=function(e,t){return e&&t&&!Object(y.isUnd)(t.which)&&1===t.which&&(m.a.accounts.loading(!0),u.a.delay(function(){return m.a.accounts.loading(!1)},g.Magics.Time1s)),!0},t.prototype.emailTitle=function(){return m.a.email()},t.prototype.settingsClick=function(){O.capa(g.Capa.Settings)&&Object(T.setHash)(Object(v.z)())},t.prototype.settingsHelp=function(){O.capa(g.Capa.Help)&&Object(T.showScreenPopup)(n(180))},t.prototype.addAccountClick=function(){this.capaAdditionalAccounts()&&Object(T.showScreenPopup)(n(149))},t.prototype.logoutClick=function(){Object(w.a)().logout()},t.prototype.onBuild=function(){var e=this;h()("`",[g.KeyState.MessageList,g.KeyState.MessageView,g.KeyState.Settings],function(){e.viewModelVisibility()&&(b.a.messageFullScreenMode(!1),e.accountMenuDropdownTrigger(!0))}),h()("shift+/",[g.KeyState.MessageList,g.KeyState.MessageView,g.KeyState.Settings],function(){return!e.viewModelVisibility()||(Object(T.showScreenPopup)(n(180)),!1)})},t}(n(13).a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"KeyboardShortcutsHelpPopupView",function(){return y}),n.d(t,"default",function(){return y});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(6),p=n.n(d),h=n(19),f=n.n(h),m=n(3),b=n(9),g=n(13),y=(o=Object(b.popup)({name:"View/Popup/KeyboardShortcutsHelp",templateID:"PopupsKeyboardShortcutsHelp"}))(i=function(e){function t(){r()(this,t);var n=c()(this,e.call(this));return n.sDefaultKeyScope=m.KeyState.PopupKeyboardShortcutsHelp,n}return u()(t,e),t.prototype.onBuild=function(e){f()("tab, shift+tab, left, right",m.KeyState.PopupKeyboardShortcutsHelp,p.a.throttle(function(t,n){if(t&&n){var o=e.find(".nav.nav-tabs > li"),i=n&&("tab"===n.shortcut||"right"===n.shortcut),a=o.index(o.filter(".active"));return!i&&0<a?a-=1:i&&a<o.length-1?a+=1:a=i?0:o.length-1,o.eq(a).find('a[data-toggle="tab"]').tab("show"),!1}return!0},m.Magics.Time100ms))},t}(g.a))||i},function(e,t,n){"use strict";function o(e,t,n,o,i){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ContactsPopupView",function(){return $}),n.d(t,"default",function(){return $});var i,a,r,s,c,l,u,d,p,h=n(15),f=n.n(h),m=n(0),b=n.n(m),g=n(4),y=n.n(g),v=n(5),S=n.n(v),O=n(11),w=n.n(O),T=n(6),C=n.n(T),A=n(12),E=n.n(A),F=n(2),j=n(19),N=n.n(j),R=n(99),_=n.n(R),I=n(3),P=n(1),L=n(20),M=n(7),D=n(182),k=n(14),x=n(8),U=n(41),H=n(147),B=n(17),G=n(10),K=n(44),V=n(234),z=n(235),q=n(16),W=n(9),Y=n(13),$=(i=Object(W.popup)({name:"View/Popup/Contacts",templateID:"PopupsContacts"}),a=Object(W.command)(),r=Object(W.command)(function(e){return 0<e.contactsCheckedOrSelected().length}),s=Object(W.command)(function(e){return 0<e.contactsCheckedOrSelected().length}),c=Object(W.command)(),l=Object(W.command)(function(e){var t=e.viewHasNonEmptyRequaredProperties(),n=e.viewReadOnly();return!e.viewSaving()&&t&&!n}),u=Object(W.command)(function(e){return!e.contacts.syncing()&&!e.contacts.importing()}),i((p=function(e){function t(){b()(this,t);var n=y()(this,e.call(this)),o=function(e){e&&0<e.length&&(n.viewProperties.removeAll(e),Object(P.delegateRunOnDestroy)(e))};return n.bBackToCompose=!1,n.sLastComposeFocusedField="",n.allowContactsSync=H.a.allowContactsSync,n.enableContactsSync=H.a.enableContactsSync,n.allowExport=!M.bMobileDevice,n.search=F.a.observable(""),n.contactsCount=F.a.observable(0),n.contacts=H.a.contacts,n.currentContact=F.a.observable(null),n.importUploaderButton=F.a.observable(null),n.contactsPage=F.a.observable(1),n.contactsPageCount=F.a.computed(function(){var e=w.a.Math.ceil(n.contactsCount()/L.c);return 0>=e?1:e}),n.contactsPagenator=F.a.computed(Object(P.computedPagenatorHelper)(n.contactsPage,n.contactsPageCount)),n.emptySelection=F.a.observable(!0),n.viewClearSearch=F.a.observable(!1),n.viewID=F.a.observable(""),n.viewReadOnly=F.a.observable(!1),n.viewProperties=F.a.observableArray([]),n.viewSaveTrigger=F.a.observable(I.SaveSettingsStep.Idle),n.viewPropertiesNames=n.viewProperties.filter(function(e){return-1<Object(P.inArray)(e.type(),[I.ContactPropertyType.FirstName,I.ContactPropertyType.LastName])}),n.viewPropertiesOther=n.viewProperties.filter(function(e){return-1<Object(P.inArray)(e.type(),[I.ContactPropertyType.Note])}),n.viewPropertiesOther=F.a.computed(function(){var e=C.a.filter(n.viewProperties(),function(e){return-1<Object(P.inArray)(e.type(),[I.ContactPropertyType.Nick])});return C.a.sortBy(e,function(e){return e.type()})}),n.viewPropertiesEmails=n.viewProperties.filter(function(e){return I.ContactPropertyType.Email===e.type()}),n.viewPropertiesWeb=n.viewProperties.filter(function(e){return I.ContactPropertyType.Web===e.type()}),n.viewHasNonEmptyRequaredProperties=F.a.computed(function(){var e=n.viewPropertiesNames(),t=n.viewPropertiesEmails(),o=function(e){return""!==Object(P.trim)(e.value())};return!(!C.a.find(e,o)&&!C.a.find(t,o))}),n.viewPropertiesPhones=n.viewProperties.filter(function(e){return I.ContactPropertyType.Phone===e.type()}),n.viewPropertiesEmailsNonEmpty=n.viewPropertiesNames.filter(function(e){return""!==Object(P.trim)(e.value())}),n.viewPropertiesEmailsEmptyAndOnFocused=n.viewPropertiesEmails.filter(function(e){var t=e.focused();return""===Object(P.trim)(e.value())&&!t}),n.viewPropertiesPhonesEmptyAndOnFocused=n.viewPropertiesPhones.filter(function(e){var t=e.focused();return""===Object(P.trim)(e.value())&&!t}),n.viewPropertiesWebEmptyAndOnFocused=n.viewPropertiesWeb.filter(function(e){var t=e.focused();return""===Object(P.trim)(e.value())&&!t}),n.viewPropertiesOtherEmptyAndOnFocused=F.a.computed(function(){return C.a.filter(n.viewPropertiesOther(),function(e){var t=e.focused();return""===Object(P.trim)(e.value())&&!t})}),n.viewPropertiesEmailsEmptyAndOnFocused.subscribe(function(e){o(e)}),n.viewPropertiesPhonesEmptyAndOnFocused.subscribe(function(e){o(e)}),n.viewPropertiesWebEmptyAndOnFocused.subscribe(function(e){o(e)}),n.viewPropertiesOtherEmptyAndOnFocused.subscribe(function(e){o(e)}),n.viewSaving=F.a.observable(!1),n.useCheckboxesInList=U.a.useCheckboxesInList,n.search.subscribe(function(){n.reloadContactList()}),n.contacts.subscribe(P.windowResizeCallback),n.viewProperties.subscribe(P.windowResizeCallback),n.contactsChecked=F.a.computed(function(){return C.a.filter(n.contacts(),function(e){return e.checked()})}),n.contactsCheckedOrSelected=F.a.computed(function(){var e=n.contactsChecked(),t=n.currentContact();return C.a.union(e,t?[t]:[])}),n.contactsCheckedOrSelectedUids=F.a.computed(function(){return C.a.map(n.contactsCheckedOrSelected(),function(e){return e.idContact})}),n.selector=new D.a(n.contacts,n.currentContact,null,".e-contact-item .actionHandle",".e-contact-item.selected",".e-contact-item .checkboxItem",".e-contact-item.focused"),n.selector.on("onItemSelect",function(e){n.populateViewContact(e||null),e||n.emptySelection(!0)}),n.selector.on("onItemGetUid",function(e){return e?e.generateUid():""}),n.bDropPageAfterDelete=!1,n.watchDirty=F.a.observable(!1),n.watchHash=F.a.observable(!1),n.viewHash=F.a.computed(function(){return""+C.a.map(n.viewProperties(),function(e){return e.value()}).join("")}),n.viewHash.subscribe(function(){!n.watchHash()||n.viewReadOnly()||n.watchDirty()||n.watchDirty(!0)}),n.sDefaultKeyScope=I.KeyState.ContactList,n}return S()(t,e),t.prototype.newCommand=function(){this.populateViewContact(null),this.currentContact(null)},t.prototype.deleteCommand=function(){this.deleteSelectedContacts(),this.emptySelection(!0)},t.prototype.newMessageCommand=function(){if(!G.capa(I.Capa.Composer))return!1;var e=[],o=null,i=null,a=null,r=this.contactsCheckedOrSelected();if(Object(P.isNonEmptyArray)(r)&&(e=C.a.map(r,function(e){if(e){var t=e.getNameAndEmailHelper(),n=t?new K.EmailModel(t[0],t[1]):null;if(n&&n.validate())return n}return null}),e=C.a.compact(e)),Object(P.isNonEmptyArray)(e)){switch(this.bBackToCompose=!1,Object(W.hideScreenPopup)(t),this.sLastComposeFocusedField){case"cc":i=e;break;case"bcc":a=e;break;case"to":default:o=e}this.sLastComposeFocusedField="",C.a.delay(function(){Object(W.showScreenPopup)(n(43),[I.ComposeType.Empty,null,o,i,a])},I.Magics.Time200ms)}return!0},t.prototype.clearCommand=function(){this.search("")},t.prototype.saveCommand=function(){var e=this;this.viewSaving(!0),this.viewSaveTrigger(I.SaveSettingsStep.Animate);var t=Object(P.fakeMd5)(),n=[];C.a.each(this.viewProperties(),function(e){e.type()&&""!==Object(P.trim)(e.value())&&n.push([e.type(),e.value(),e.typeStr()])}),B.a.contactSave(function(n,o){var i=!1;e.viewSaving(!1),I.StorageResultType.Success===n&&o&&o.Result&&o.Result.RequestUid===t&&0<Object(P.pInt)(o.Result.ResultID)&&(""===e.viewID()&&e.viewID(Object(P.pInt)(o.Result.ResultID)),e.reloadContactList(),i=!0),C.a.delay(function(){e.viewSaveTrigger(i?I.SaveSettingsStep.TrueResult:I.SaveSettingsStep.FalseResult)},I.Magics.Time350ms),i&&(e.watchDirty(!1),C.a.delay(function(){e.viewSaveTrigger(I.SaveSettingsStep.Idle)},I.Magics.Time1s))},t,this.viewID(),n)},t.prototype.syncCommand=function(){var e=this;Object(q.a)().contactsSync(function(t,n){I.StorageResultType.Success===t&&n&&n.Result||w.a.alert(Object(x.getNotification)(n&&n.ErrorCode?n.ErrorCode:I.Notification.ContactsSyncError)),e.reloadContactList(!0)})},t.prototype.getPropertyPlaceholder=function(e){var t="";switch(e){case I.ContactPropertyType.LastName:t="CONTACTS/PLACEHOLDER_ENTER_LAST_NAME";break;case I.ContactPropertyType.FirstName:t="CONTACTS/PLACEHOLDER_ENTER_FIRST_NAME";break;case I.ContactPropertyType.Nick:t="CONTACTS/PLACEHOLDER_ENTER_NICK_NAME"}return t},t.prototype.addNewProperty=function(e,t){this.viewProperties.push(new z.a(e,t||"","",!0,this.getPropertyPlaceholder(e)))},t.prototype.addNewOrFocusProperty=function(e,t){var n=C.a.find(this.viewProperties(),function(t){return e===t.type()});n?n.focused(!0):this.addNewProperty(e,t)},t.prototype.addNewEmail=function(){this.addNewProperty(I.ContactPropertyType.Email,"Home")},t.prototype.addNewPhone=function(){this.addNewProperty(I.ContactPropertyType.Phone,"Mobile")},t.prototype.addNewWeb=function(){this.addNewProperty(I.ContactPropertyType.Web)},t.prototype.addNewNickname=function(){this.addNewOrFocusProperty(I.ContactPropertyType.Nick)},t.prototype.addNewNotes=function(){this.addNewOrFocusProperty(I.ContactPropertyType.Note)},t.prototype.addNewBirthday=function(){this.addNewOrFocusProperty(I.ContactPropertyType.Birthday)},t.prototype.exportVcf=function(){Object(q.a)().download(Object(k.l)())},t.prototype.exportCsv=function(){Object(q.a)().download(Object(k.k)())},t.prototype.initUploader=function(){var e=this;if(this.importUploaderButton()){var t=new _.a({action:Object(k.I)(),name:"uploader",queueSize:1,multipleSizeLimit:1,disableDragAndDrop:!0,disableMultiple:!0,disableDocumentDropPrevent:!0,clickElement:this.importUploaderButton()});t&&t.on("onStart",function(){e.contacts.importing(!0)}).on("onComplete",function(t,n,o){e.contacts.importing(!1),e.reloadContactList(),t&&n&&o&&o.Result||w.a.alert(Object(x.i18n)("CONTACTS/ERROR_IMPORT_FILE"))})}},t.prototype.removeCheckedOrSelectedContactsFromList=function(){var e=this,t=this.contacts,n=this.contactsCheckedOrSelected(),o=this.currentContact(),i=this.contacts().length;0<n.length&&(C.a.each(n,function(t){o&&o.idContact===t.idContact&&(o=null,e.currentContact(null)),t.deleted(!0),i-=1}),0>=i&&(this.bDropPageAfterDelete=!0),C.a.delay(function(){C.a.each(n,function(e){t.remove(e),Object(P.delegateRunOnDestroy)(e)})},I.Magics.Time500ms))},t.prototype.deleteSelectedContacts=function(){0<this.contactsCheckedOrSelected().length&&(B.a.contactsDelete(C.a.bind(this.deleteResponse,this),this.contactsCheckedOrSelectedUids()),this.removeCheckedOrSelectedContactsFromList())},t.prototype.deleteResponse=function(e,t){var n=this;I.Magics.Time500ms<(I.StorageResultType.Success===e&&t&&t.Time?Object(P.pInt)(t.Time):0)?this.reloadContactList(this.bDropPageAfterDelete):C.a.delay(function(){n.reloadContactList(n.bDropPageAfterDelete)},I.Magics.Time500ms)},t.prototype.removeProperty=function(e){this.viewProperties.remove(e),Object(P.delegateRunOnDestroy)(e)},t.prototype.populateViewContact=function(e){var t="",n="",o="",i=[];this.watchHash(!1),this.emptySelection(!1),this.viewReadOnly(!1),e&&(t=e.idContact,Object(P.isNonEmptyArray)(e.properties)&&C.a.each(e.properties,function(e){e&&e[0]&&(I.ContactPropertyType.LastName===e[0]?n=e[1]:I.ContactPropertyType.FirstName===e[0]?o=e[1]:i.push(new z.a(e[0],e[2]||"",e[1])))}),this.viewReadOnly(!!e.readOnly)),i.unshift(new z.a(I.ContactPropertyType.LastName,"",n,!1,this.getPropertyPlaceholder(I.ContactPropertyType.LastName))),i.unshift(new z.a(I.ContactPropertyType.FirstName,"",o,!e,this.getPropertyPlaceholder(I.ContactPropertyType.FirstName))),this.viewID(t),Object(P.delegateRunOnDestroy)(this.viewProperties()),this.viewProperties([]),this.viewProperties(i),this.watchDirty(!1),this.watchHash(!0)},t.prototype.reloadContactList=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(this.contactsPage()-1)*L.c;this.bDropPageAfterDelete=!1,t&&(this.contactsPage(1),n=0),this.contacts.loading(!0),B.a.contacts(function(t,n){var o=0,i=[];I.StorageResultType.Success===t&&n&&n.Result&&n.Result.List&&Object(P.isNonEmptyArray)(n.Result.List)&&(i=C.a.map(n.Result.List,function(e){var t=new V.a;return t.parse(e)?t:null}),i=C.a.compact(i),o=0<(o=Object(P.pInt)(n.Result.Count))?o:0),e.contactsCount(o),Object(P.delegateRunOnDestroy)(e.contacts()),e.contacts(i),e.contacts.loading(!1),e.viewClearSearch(""!==e.search())},n,L.c,this.search())},t.prototype.onBuild=function(e){var t=this;this.oContentVisible=E()(".b-list-content",e),this.oContentScrollable=E()(".content",this.oContentVisible),this.selector.init(this.oContentVisible,this.oContentScrollable,I.KeyState.ContactList),N()("delete",I.KeyState.ContactList,function(){return t.deleteCommand(),!1}),N()("c, w",I.KeyState.ContactList,function(){return t.newMessageCommand(),!1});var n=this;e.on("click",".e-pagenator .e-page",function(){var e=F.a.dataFor(this);e&&(n.contactsPage(Object(P.pInt)(e.value)),n.reloadContactList())}),this.initUploader()},t.prototype.onShow=function(e,t){this.bBackToCompose=!Object(P.isUnd)(e)&&!!e,this.sLastComposeFocusedField=Object(P.isUnd)(t)?"":t,Object(W.routeOff)(),this.reloadContactList(!0)},t.prototype.onHide=function(){Object(W.routeOn)(),this.currentContact(null),this.emptySelection(!0),this.search(""),this.contactsCount(0),Object(P.delegateRunOnDestroy)(this.contacts()),this.contacts([]),this.sLastComposeFocusedField="",this.bBackToCompose&&(this.bBackToCompose=!1,G.capa(I.Capa.Composer)&&Object(W.showScreenPopup)(n(43)))},t}(Y.a),o(p.prototype,"newCommand",[a],f()(p.prototype,"newCommand"),p.prototype),o(p.prototype,"deleteCommand",[r],f()(p.prototype,"deleteCommand"),p.prototype),o(p.prototype,"newMessageCommand",[s],f()(p.prototype,"newMessageCommand"),p.prototype),o(p.prototype,"clearCommand",[c],f()(p.prototype,"clearCommand"),p.prototype),o(p.prototype,"saveCommand",[l],f()(p.prototype,"saveCommand"),p.prototype),o(p.prototype,"syncCommand",[u],f()(p.prototype,"syncCommand"),p.prototype),d=p))||d)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),i=n.n(o),a=n(12),r=n.n(a),s=n(6),c=n.n(s),l=n(19),u=n.n(l),d=n(2),p=n(3),h=n(1),f=function(){function e(t,n,o,a,r,s,l){var u=this;i()(this,e),this.selectedItemUseCallback=!0,this.iSelectNextHelper=0,this.iFocusedNextHelper=0,this.sLastUid="",this.oCallbacks={},this.list=t,this.listChecked=d.a.computed(function(){return c.a.filter(u.list(),function(e){return e.checked()})}).extend({rateLimit:0}),this.isListChecked=d.a.computed(function(){return 0<u.listChecked().length}),this.focusedItem=o||d.a.observable(null),this.selectedItem=n||d.a.observable(null),this.itemSelectedThrottle=c.a.debounce(c.a.bind(this.itemSelected,this),300),this.listChecked.subscribe(function(e){0<e.length?null===u.selectedItem()?u.selectedItem.valueHasMutated&&u.selectedItem.valueHasMutated():u.selectedItem(null):u.autoSelect()&&u.focusedItem()&&u.selectedItem(u.focusedItem())},this),this.selectedItem.subscribe(function(e){e?(u.isListChecked()&&c.a.each(u.listChecked(),function(e){e.checked(!1)}),u.selectedItemUseCallback&&u.itemSelectedThrottle(e)):u.selectedItemUseCallback&&u.itemSelected(null)},this),this.selectedItem=this.selectedItem.extend({toggleSubscribeProperty:[this,"selected"]}),this.focusedItem=this.focusedItem.extend({toggleSubscribeProperty:[null,"focused"]}),this.sItemSelector=a,this.sItemSelectedSelector=r,this.sItemCheckedSelector=s,this.sItemFocusedSelector=l,this.focusedItem.subscribe(function(e){e&&(u.sLastUid=u.getItemUid(e))},this);var p=[],f=[],m=null,b=null;this.list.subscribe(function(e){Object(h.isArray)(e)&&c.a.each(e,function(e){if(e){var t=u.getItemUid(e);p.push(t),e.checked()&&f.push(t),null===m&&e.focused()&&(m=t),null===b&&e.selected()&&(b=t)}})},this,"beforeChange"),this.list.subscribe(function(e){var t=null,n=!1,o=m,i=!1,a=!1,r=0,s=[];u.selectedItemUseCallback=!1,u.focusedItem(null),u.selectedItem(null),Object(h.isArray)(e)&&(r=f.length,c.a.each(e,function(e){var t=u.getItemUid(e);s.push(t),null!==m&&m===t&&(u.focusedItem(e),m=null),0<r&&-1<Object(h.inArray)(t,f)&&(i=!0,e.checked(!0),r-=1),i||null===b||b!==t||(a=!0,u.selectedItem(e),b=null)}),u.selectedItemUseCallback=!0,i||a||!u.autoSelect()||(u.focusedItem()?u.selectedItem(u.focusedItem()):0<e.length&&(null!==o&&(n=!1,(o=c.a.find(p,function(e){return n&&-1<Object(h.inArray)(e,s)?e:(o===e&&(n=!0),!1)}))&&(t=c.a.find(e,function(e){return o===u.getItemUid(e)}))),u.selectedItem(t||null),u.focusedItem(u.selectedItem()))),(0!==u.iSelectNextHelper||0!==u.iFocusedNextHelper)&&0<e.length&&!u.focusedItem()&&(t=null,0!==u.iFocusedNextHelper&&(t=e[-1===u.iFocusedNextHelper?e.length-1:0]||null),t||0===u.iSelectNextHelper||(t=e[-1===u.iSelectNextHelper?e.length-1:0]||null),t&&(0!==u.iSelectNextHelper&&u.selectedItem(t||null),u.focusedItem(t||null),u.scrollToFocused(),c.a.delay(function(){return u.scrollToFocused()},100)),u.iSelectNextHelper=0,u.iFocusedNextHelper=0)),p=[],f=[],m=null,b=null})}return e.prototype.itemSelected=function(e){this.isListChecked()?e||(this.oCallbacks.onItemSelect||h.noop)(e||null):e&&(this.oCallbacks.onItemSelect||h.noop)(e)},e.prototype.goDown=function(e){this.newSelectPosition(p.EventKeyCode.Down,!1,e)},e.prototype.goUp=function(e){this.newSelectPosition(p.EventKeyCode.Up,!1,e)},e.prototype.unselect=function(){this.selectedItem(null),this.focusedItem(null)},e.prototype.init=function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";this.oContentVisible=e,this.oContentScrollable=t,this.oContentVisible&&this.oContentScrollable&&(r()(this.oContentVisible).on("selectstart",function(e){e&&e.preventDefault&&e.preventDefault()}).on("click",this.sItemSelector,function(e){n.actionClick(d.a.dataFor(e.currentTarget),e)}).on("click",this.sItemCheckedSelector,function(e){var t=d.a.dataFor(e.currentTarget);t&&(e&&e.shiftKey?n.actionClick(t,e):(n.focusedItem(t),t.checked(!t.checked())))}),u()("enter",o,function(){return!(n.focusedItem()&&!n.focusedItem().selected())||(n.actionClick(n.focusedItem()),!1)}),u()("ctrl+up, command+up, ctrl+down, command+down",o,function(){return!1}),u()("up, shift+up, down, shift+down, home, end, pageup, pagedown, insert, space",o,function(e,t){if(e&&t&&t.shortcut){var o=0;switch(t.shortcut){case"up":case"shift+up":o=p.EventKeyCode.Up;break;case"down":case"shift+down":o=p.EventKeyCode.Down;break;case"insert":o=p.EventKeyCode.Insert;break;case"space":o=p.EventKeyCode.Space;break;case"home":o=p.EventKeyCode.Home;break;case"end":o=p.EventKeyCode.End;break;case"pageup":o=p.EventKeyCode.PageUp;break;case"pagedown":o=p.EventKeyCode.PageDown}if(0<o)return n.newSelectPosition(o,u.a.shift),!1}return!0}))},e.prototype.autoSelect=function(){return!!(this.oCallbacks.onAutoSelect||h.noopTrue)()},e.prototype.doUpUpOrDownDown=function(e){(this.oCallbacks.onUpUpOrDownDown||h.noopTrue)(!!e)},e.prototype.getItemUid=function(e){var t="",n=this.oCallbacks.onItemGetUid||null;return n&&e&&(t=n(e)),t.toString()},e.prototype.newSelectPosition=function(e,t,n){var o=0,i=!1,a=!1,r=null,s=this.list(),l=s?s.length:0,u=this.focusedItem();if(0<l)if(u){if(u)if(p.EventKeyCode.Down===e||p.EventKeyCode.Up===e||p.EventKeyCode.Insert===e||p.EventKeyCode.Space===e)c.a.each(s,function(t){if(!a)switch(e){case p.EventKeyCode.Up:u===t?a=!0:r=t;break;case p.EventKeyCode.Down:case p.EventKeyCode.Insert:i?(r=t,a=!0):u===t&&(i=!0)}}),r||p.EventKeyCode.Down!==e&&p.EventKeyCode.Up!==e||this.doUpUpOrDownDown(p.EventKeyCode.Up===e);else if(p.EventKeyCode.Home===e||p.EventKeyCode.End===e)p.EventKeyCode.Home===e?r=s[0]:p.EventKeyCode.End===e&&(r=s[s.length-1]);else if(p.EventKeyCode.PageDown===e){for(;o<l;o++)if(u===s[o]){r=s[o=l-1<(o+=10)?l-1:o];break}}else if(p.EventKeyCode.PageUp===e)for(o=l;0<=o;o--)if(u===s[o]){r=s[o=0>(o-=10)?0:o];break}}else p.EventKeyCode.Down===e||p.EventKeyCode.Insert===e||p.EventKeyCode.Space===e||p.EventKeyCode.Home===e||p.EventKeyCode.PageUp===e?r=s[0]:p.EventKeyCode.Up!==e&&p.EventKeyCode.End!==e&&p.EventKeyCode.PageDown!==e||(r=s[s.length-1]);r?(this.focusedItem(r),u&&(t?p.EventKeyCode.Up!==e&&p.EventKeyCode.Down!==e||u.checked(!u.checked()):p.EventKeyCode.Insert!==e&&p.EventKeyCode.Space!==e||u.checked(!u.checked())),!this.autoSelect()&&!n||this.isListChecked()||p.EventKeyCode.Space===e||this.selectedItem(r),this.scrollToFocused()):u&&(!t||p.EventKeyCode.Up!==e&&p.EventKeyCode.Down!==e?p.EventKeyCode.Insert!==e&&p.EventKeyCode.Space!==e||u.checked(!u.checked()):u.checked(!u.checked()),this.focusedItem(u))},e.prototype.scrollToFocused=function(){if(!this.oContentVisible||!this.oContentScrollable)return!1;var e=this.list(),t=r()(this.sItemFocusedSelector,this.oContentScrollable),n=t.position(),o=this.oContentVisible.height(),i=t.outerHeight();return e&&e[0]&&e[0].focused()?(this.oContentScrollable.scrollTop(0),!0):!(!n||!(0>n.top||n.top+i>o))&&(this.oContentScrollable.scrollTop(0>n.top?this.oContentScrollable.scrollTop()+n.top-20:this.oContentScrollable.scrollTop()+n.top-o+i+20),!0)},e.prototype.scrollToTop=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!(!this.oContentVisible||!this.oContentScrollable)&&(e||50>this.oContentScrollable.scrollTop()?this.oContentScrollable.scrollTop(0):this.oContentScrollable.stop().animate({scrollTop:0},200),!0)},e.prototype.eventClickFunction=function(e,t){var n=0,o=0,i=!1,a=!1,r=[],s=!1,c=null,l="",u=this.getItemUid(e);if(t&&t.shiftKey&&""!==u&&""!==this.sLastUid&&u!==this.sLastUid)for(r=this.list(),s=e.checked(),n=0,o=r.length;n<o;n++)c=r[n],i=!1,(l=this.getItemUid(c))!==this.sLastUid&&l!==u||(i=!0),i&&(a=!a),(a||i)&&c.checked(s);this.sLastUid=""===u?"":u},e.prototype.actionClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var n=!0;t&&(!t.shiftKey||t.ctrlKey||t.metaKey||t.altKey?!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(n=!1,this.focusedItem(e),this.selectedItem()&&e!==this.selectedItem()&&this.selectedItem().checked(!0),e.checked(!e.checked())):(n=!1,""===this.sLastUid&&(this.sLastUid=this.getItemUid(e)),e.checked(!e.checked()),this.eventClickFunction(e,t),this.focusedItem(e))),n&&this.selectMessageItem(e)}},e.prototype.on=function(e,t){this.oCallbacks[e]=t},e.prototype.selectMessageItem=function(e){this.focusedItem(e),this.selectedItem(e),this.scrollToFocused()},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FolderCreateView",function(){return A}),n.d(t,"default",function(){return A});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(2),b=n(3),g=n(20),y=n(7),v=n(1),S=n(38),O=n(94),w=n(16),T=n(9),C=n(13),A=(o=Object(T.popup)({name:"View/Popup/FolderCreate",templateID:"PopupsFolderCreate"}),i=Object(T.command)(function(e){return e.simpleFolderNameValidation(e.folderName())}),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.folderName=m.a.observable(""),n.folderName.focused=m.a.observable(!1),n.selectedParentValue=m.a.observable(g.r),n.parentFolderSelectList=m.a.computed(function(){var e=[],t=S.a.folderList();e.push(["",""]);var n=null;return""!==S.a.namespace&&(n=function(e){return S.a.namespace!==e.fullNameRaw.substr(0,S.a.namespace.length)}),Object(v.folderListOptionsBuilder)([],t,[],e,null,n,null,function(e){return e?e.isSystemFolder()?e.name()+" "+e.manageFolderSystemName():e.name():""})}),n.defautOptionsAfterRender=v.defautOptionsAfterRender,n}return f()(t,e),t.prototype.createFolderCommand=function(){var e=this.selectedParentValue();""===e&&1<S.a.namespace.length&&(e=S.a.namespace.substr(0,S.a.namespace.length-1)),Object(w.a)().foldersPromisesActionHelper(O.a.folderCreate(this.folderName(),e,S.a.foldersCreating),b.Notification.CantCreateFolder),this.cancelCommand()},t.prototype.simpleFolderNameValidation=function(e){return/^[^\\\/]+$/g.test(Object(v.trim)(e))},t.prototype.clearPopup=function(){this.folderName(""),this.selectedParentValue(""),this.folderName.focused(!1)},t.prototype.onShow=function(){this.clearPopup()},t.prototype.onShowWithDelay=function(){y.bMobileDevice||this.folderName.focused(!0)},t}(C.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"createFolderCommand",[i],c()(r.prototype,"createFolderCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(2),r=n(3);t.a=new function e(){i()(this,e),this.capa=a.a.observable(""),this.modules=a.a.observable({}),this.filters=a.a.observableArray([]),this.filters.loading=a.a.observable(!1).extend({throttle:r.Magics.Time200ms}),this.filters.saving=a.a.observable(!1).extend({throttle:r.Magics.Time200ms}),this.raw=a.a.observable("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FilterPopupView",function(){return E}),n.d(t,"default",function(){return E});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(6),b=n.n(m),g=n(2),y=n(3),v=n(7),S=n(1),O=n(8),w=n(184),T=n(38),C=n(9),A=n(13),E=(o=Object(C.popup)({name:"View/Popup/Filter",templateID:"PopupsFilter"}),i=Object(C.command)(),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.isNew=g.a.observable(!0),n.modules=w.a.modules,n.fTrueCallback=null,n.filter=g.a.observable(null),n.allowMarkAsRead=g.a.observable(!1),n.defautOptionsAfterRender=S.defautOptionsAfterRender,n.folderSelectList=T.a.folderMenuForFilters,n.selectedFolderValue=g.a.observable(""),n.selectedFolderValue.subscribe(function(){n.filter()&&n.filter().actionValue.error(!1)}),n.actionTypeOptions=g.a.observableArray([]),n.fieldOptions=g.a.observableArray([]),n.typeOptions=g.a.observableArray([]),n.typeOptionsSize=g.a.observableArray([]),Object(O.initOnStartOrLangChange)(b.a.bind(n.populateOptions,n)),n.modules.subscribe(n.populateOptions,n),n}return f()(t,e),t.prototype.saveFilterCommand=function(){if(this.filter()){if(y.FiltersAction.MoveTo===this.filter().actionType()&&this.filter().actionValue(this.selectedFolderValue()),!this.filter().verify())return!1;this.fTrueCallback&&this.fTrueCallback(this.filter()),this.modalVisibility()&&Object(S.delegateRun)(this,"closeCommand")}return!0},t.prototype.populateOptions=function(){this.actionTypeOptions([]);var e=this.modules();e&&(e.markasread&&this.allowMarkAsRead(!0),e.moveto&&this.actionTypeOptions.push({id:y.FiltersAction.MoveTo,name:Object(O.i18n)("POPUPS_FILTER/SELECT_ACTION_MOVE_TO")}),e.redirect&&this.actionTypeOptions.push({id:y.FiltersAction.Forward,name:Object(O.i18n)("POPUPS_FILTER/SELECT_ACTION_FORWARD_TO")}),e.reject&&this.actionTypeOptions.push({id:y.FiltersAction.Reject,name:Object(O.i18n)("POPUPS_FILTER/SELECT_ACTION_REJECT")}),e.vacation&&this.actionTypeOptions.push({id:y.FiltersAction.Vacation,name:Object(O.i18n)("POPUPS_FILTER/SELECT_ACTION_VACATION_MESSAGE")})),this.actionTypeOptions.push({id:y.FiltersAction.Discard,name:Object(O.i18n)("POPUPS_FILTER/SELECT_ACTION_DISCARD")}),this.fieldOptions([{id:y.FilterConditionField.From,name:Object(O.i18n)("POPUPS_FILTER/SELECT_FIELD_FROM")},{id:y.FilterConditionField.Recipient,name:Object(O.i18n)("POPUPS_FILTER/SELECT_FIELD_RECIPIENTS")},{id:y.FilterConditionField.Subject,name:Object(O.i18n)("POPUPS_FILTER/SELECT_FIELD_SUBJECT")},{id:y.FilterConditionField.Size,name:Object(O.i18n)("POPUPS_FILTER/SELECT_FIELD_SIZE")},{id:y.FilterConditionField.Header,name:Object(O.i18n)("POPUPS_FILTER/SELECT_FIELD_HEADER")}]),this.typeOptions([{id:y.FilterConditionType.Contains,name:Object(O.i18n)("POPUPS_FILTER/SELECT_TYPE_CONTAINS")},{id:y.FilterConditionType.NotContains,name:Object(O.i18n)("POPUPS_FILTER/SELECT_TYPE_NOT_CONTAINS")},{id:y.FilterConditionType.EqualTo,name:Object(O.i18n)("POPUPS_FILTER/SELECT_TYPE_EQUAL_TO")},{id:y.FilterConditionType.NotEqualTo,name:Object(O.i18n)("POPUPS_FILTER/SELECT_TYPE_NOT_EQUAL_TO")}]),e&&e.regex&&this.typeOptions.push({id:y.FilterConditionType.Regex,name:"Regex"}),this.typeOptionsSize([{id:y.FilterConditionType.Over,name:Object(O.i18n)("POPUPS_FILTER/SELECT_TYPE_OVER")},{id:y.FilterConditionType.Under,name:Object(O.i18n)("POPUPS_FILTER/SELECT_TYPE_UNDER")}])},t.prototype.removeCondition=function(e){this.filter()&&this.filter().removeCondition(e)},t.prototype.clearPopup=function(){this.isNew(!0),this.fTrueCallback=null,this.filter(null)},t.prototype.onShow=function(e,t,n){this.clearPopup(),this.fTrueCallback=t,this.filter(e),e&&this.selectedFolderValue(e.actionValue()),this.isNew(!n),!n&&e&&e.name.focused(!0)},t.prototype.onShowWithDelay=function(){this.isNew()&&this.filter()&&!v.bMobileDevice&&this.filter().name.focused(!0)},t}(A.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"saveFilterCommand",[i],c()(r.prototype,"saveFilterCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TwoFactorConfigurationPopupView",function(){return E}),n.d(t,"default",function(){return E});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(11),p=n.n(d),h=n(6),f=n.n(h),m=n(2),b=n(250),g=n.n(b),y=n(3),v=n(1),S=n(8),O=n(10),w=n(17),T=n(16),C=n(9),A=n(13),E=(o=Object(C.popup)({name:"View/Popup/TwoFactorConfiguration",templateID:"PopupsTwoFactorConfiguration"}))(i=function(e){function t(){r()(this,t);var n=c()(this,e.call(this));return n.lock=m.a.observable(!1),n.capaTwoFactor=O.capa(y.Capa.TwoFactor),n.processing=m.a.observable(!1),n.clearing=m.a.observable(!1),n.secreting=m.a.observable(!1),n.viewUser=m.a.observable(""),n.twoFactorStatus=m.a.observable(!1),n.twoFactorTested=m.a.observable(!1),n.viewSecret=m.a.observable(""),n.viewBackupCodes=m.a.observable(""),n.viewUrlTitle=m.a.observable(""),n.viewUrl=m.a.observable(""),n.viewEnable_=m.a.observable(!1),n.viewEnable=m.a.computed({read:n.viewEnable_,write:function(e){(e=!!e)&&n.twoFactorTested()?(n.viewEnable_(e),w.a.enableTwoFactor(function(e,t){y.StorageResultType.Success===e&&t&&t.Result||n.viewEnable_(!1)},!0)):(e||n.viewEnable_(e),w.a.enableTwoFactor(function(e,t){y.StorageResultType.Success===e&&t&&t.Result||n.viewEnable_(!1)},!1))}}),n.viewTwoFactorEnableTooltip=m.a.computed(function(){return Object(S.trigger)(),n.twoFactorTested()||n.viewEnable_()?"":Object(S.i18n)("POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_TEST_BEFORE_DESC")}),n.viewTwoFactorStatus=m.a.computed(function(){return Object(S.trigger)(),Object(S.i18n)(n.twoFactorStatus()?"POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_CONFIGURED_DESC":"POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_NOT_CONFIGURED_DESC")}),n.twoFactorAllowedEnable=m.a.computed(function(){return n.viewEnable()||n.twoFactorTested()}),n.onResult=f.a.bind(n.onResult,n),n.onShowSecretResult=f.a.bind(n.onShowSecretResult,n),n}return u()(t,e),t.prototype.showSecret=function(){this.secreting(!0),w.a.showTwoFactorSecret(this.onShowSecretResult)},t.prototype.hideSecret=function(){this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl("")},t.prototype.createTwoFactor=function(){this.processing(!0),w.a.createTwoFactor(this.onResult)},t.prototype.logout=function(){Object(T.a)().logout()},t.prototype.testTwoFactor=function(){Object(C.showScreenPopup)(n(251),[this.twoFactorTested])},t.prototype.clearTwoFactor=function(){this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl(""),this.twoFactorTested(!1),this.clearing(!0),w.a.clearTwoFactor(this.onResult)},t.prototype.onShow=function(e){this.lock(!!e),this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl("")},t.prototype.onHide=function(){this.lock()&&p.a.location.reload()},t.prototype.getQr=function(){return"otpauth://totp/"+p.a.encodeURIComponent(this.viewUser())+"?secret="+p.a.encodeURIComponent(this.viewSecret())+"&issuer="+p.a.encodeURIComponent("")},t.prototype.onResult=function(e,t){this.processing(!1),this.clearing(!1),y.StorageResultType.Success===e&&t&&t.Result?(this.viewUser(Object(v.pString)(t.Result.User)),this.viewEnable_(!!t.Result.Enable),this.twoFactorStatus(!!t.Result.IsSet),this.twoFactorTested(!!t.Result.Tested),this.viewSecret(Object(v.pString)(t.Result.Secret)),this.viewBackupCodes(Object(v.pString)(t.Result.BackupCodes).replace(/[\s]+/g,"  ")),this.viewUrlTitle(Object(v.pString)(t.Result.UrlTitle)),this.viewUrl(g.a.toDataURL({level:"M",size:8,value:this.getQr()}))):(this.viewUser(""),this.viewEnable_(!1),this.twoFactorStatus(!1),this.twoFactorTested(!1),this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl(""))},t.prototype.onShowSecretResult=function(e,t){this.secreting(!1),y.StorageResultType.Success===e&&t&&t.Result?(this.viewSecret(Object(v.pString)(t.Result.Secret)),this.viewUrlTitle(Object(v.pString)(t.Result.UrlTitle)),this.viewUrl(g.a.toDataURL({level:"M",size:6,value:this.getQr()}))):(this.viewSecret(""),this.viewUrlTitle(""),this.viewUrl(""))},t.prototype.onBuild=function(){this.capaTwoFactor&&(this.processing(!0),w.a.getTwoFactor(this.onResult))},t}(A.a))||i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TemplatePopupView",function(){return C}),n.d(t,"default",function(){return C});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(2),b=n(3),g=n(1),y=n(8),v=n(85),S=n(17),O=n(16),w=n(9),T=n(13),C=(o=Object(w.popup)({name:"View/Popup/Template",templateID:"PopupsTemplate"}),i=Object(w.command)(function(e){return!e.submitRequest()}),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.editor=null,n.signatureDom=m.a.observable(null),n.id=m.a.observable(""),n.name=m.a.observable(""),n.name.error=m.a.observable(!1),n.name.focus=m.a.observable(!1),n.body=m.a.observable(""),n.body.loading=m.a.observable(!1),n.body.error=m.a.observable(!1),n.name.subscribe(function(){n.name.error(!1)}),n.body.subscribe(function(){n.body.error(!1)}),n.submitRequest=m.a.observable(!1),n.submitError=m.a.observable(""),n}return f()(t,e),t.prototype.addTemplateCommand=function(){var e=this;return this.populateBodyFromEditor(),this.name.error(""===Object(g.trim)(this.name())),this.body.error(""===Object(g.trim)(this.body())||":HTML:"===Object(g.trim)(this.body())),!this.name.error()&&!this.body.error()&&(this.submitRequest(!0),S.a.templateSetup(function(t,n){e.submitRequest(!1),b.StorageResultType.Success===t&&n?n.Result?(Object(O.a)().templates(),e.cancelCommand()):n.ErrorCode&&e.submitError(Object(y.getNotification)(n.ErrorCode)):e.submitError(Object(y.getNotification)(b.Notification.UnknownError))},this.id(),this.name(),this.body()),!0)},t.prototype.clearPopup=function(){this.id(""),this.name(""),this.name.error(!1),this.body(""),this.body.loading(!1),this.body.error(!1),this.submitRequest(!1),this.submitError(""),this.editor&&this.editor.setPlain("",!1)},t.prototype.populateBodyFromEditor=function(){this.editor&&this.body(this.editor.getDataWithHtmlMark())},t.prototype.editorSetBody=function(e){var t=this;!this.editor&&this.signatureDom()?this.editor=new v.HtmlEditor(this.signatureDom(),function(){t.populateBodyFromEditor()},function(){t.editor.setHtmlOrPlain(e)}):this.editor.setHtmlOrPlain(e)},t.prototype.onShow=function(e){var t=this;this.clearPopup(),e&&e.id?(this.id(e.id),this.name(e.name),this.body(e.body),e.populated?this.editorSetBody(this.body()):(this.body.loading(!0),this.body.error(!1),S.a.templateGetById(function(n,o){t.body.loading(!1),b.StorageResultType.Success===n&&o&&o.Result&&"Object/Template"===o.Result["@Object"]&&Object(g.isNormal)(o.Result.Body)?(e.body=o.Result.Body,e.populated=!0,t.body(e.body),t.body.error(!1)):(t.body(""),t.body.error(!0)),t.editorSetBody(t.body())},this.id()))):this.editorSetBody("")},t.prototype.onShowWithDelay=function(){this.name.focus(!0)},t}(T.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"addTemplateCommand",[i],c()(r.prototype,"addTemplateCommand"),r.prototype),a=r))||a)},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(104),i=n(173);Object(o.a)(i.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MessageOpenPgpPopupView",function(){return E}),n.d(t,"default",function(){return E});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(6),b=n.n(m),g=n(2),y=n(19),v=n.n(y),S=n(12),O=n.n(S),w=n(1),T=n(3),C=n(9),A=n(13),E=(o=Object(C.popup)({name:"View/Popup/MessageOpenPgp",templateID:"PopupsMessageOpenPgp"}),i=Object(C.command)(function(e){return!e.submitRequest()}),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.notification=g.a.observable(""),n.selectedKey=g.a.observable(null),n.privateKeys=g.a.observableArray([]),n.password=g.a.observable(""),n.password.focus=g.a.observable(!1),n.buttonFocus=g.a.observable(!1),n.resultCallback=null,n.submitRequest=g.a.observable(!1),n.sDefaultKeyScope=T.KeyState.PopupMessageOpenPGP,n}return f()(t,e),t.prototype.doCommand=function(){var e=this;this.submitRequest(!0),b.a.delay(function(){var t=null;try{if(e.resultCallback&&e.selectedKey()){var n=e.selectedKey().getNativeKeys();if(t=n&&n[0]?n[0]:null)try{t.decrypt(Object(w.pString)(e.password()))||(Object(w.log)("Error: Private key cannot be decrypted"),t=null)}catch(e){Object(w.log)(e),t=null}else Object(w.log)("Error: Private key cannot be found")}}catch(e){Object(w.log)(e),t=null}e.submitRequest(!1),e.cancelCommand(),e.resultCallback(t)},T.Magics.Time100ms)},t.prototype.clearPopup=function(){this.notification(""),this.password(""),this.password.focus(!1),this.buttonFocus(!1),this.selectedKey(!1),this.submitRequest(!1),this.resultCallback=null,this.privateKeys([])},t.prototype.onBuild=function(e){var t=this;v()("tab,shift+tab",T.KeyState.PopupMessageOpenPGP,function(){switch(!0){case t.password.focus():t.buttonFocus(!0);break;case t.buttonFocus():t.password.focus(!0)}return!1});var n=this;e.on("click",".key-list__item",function(){e.find(".key-list__item .key-list__item__radio").addClass("icon-radio-unchecked").removeClass("icon-radio-checked"),O()(this).find(".key-list__item__radio").removeClass("icon-radio-unchecked").addClass("icon-radio-checked"),n.selectedKey(g.a.dataFor(this)),n.password.focus(!0)})},t.prototype.onHideWithDelay=function(){this.clearPopup()},t.prototype.onShowWithDelay=function(){this.password.focus(!0)},t.prototype.onShow=function(e,t){this.clearPopup(),this.resultCallback=e,this.privateKeys(t),this.viewModelDom&&this.viewModelDom.find(".key-list__item").first().click()},t}(A.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"doCommand",[i],c()(r.prototype,"doCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.d(t,"a",function(){return R});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(12),p=n.n(d),h=n(2),f=n(75),m=n.n(f),b=n(215),g=n.n(b),y=n(216),v=n.n(y),S=n(3),O=n(8),w=n(20),T=n(1),C=n(7),A=n(14),E=n(38),F=n(53),j=n(175),N=n(176),R=function(e){function t(){i()(this,t);var n=r()(this,e.call(this,"MessageModel"));return n.folderFullNameRaw="",n.uid="",n.hash="",n.requestHash="",n.subject=h.a.observable(""),n.subjectPrefix=h.a.observable(""),n.subjectSuffix=h.a.observable(""),n.size=h.a.observable(0),n.dateTimeStampInUTC=h.a.observable(0),n.priority=h.a.observable(S.MessagePriority.Normal),n.proxy=!1,n.fromEmailString=h.a.observable(""),n.fromClearEmailString=h.a.observable(""),n.toEmailsString=h.a.observable(""),n.toClearEmailsString=h.a.observable(""),n.senderEmailsString=h.a.observable(""),n.senderClearEmailsString=h.a.observable(""),n.emails=[],n.from=[],n.to=[],n.cc=[],n.bcc=[],n.replyTo=[],n.deliveredTo=[],n.unsubsribeLinks=[],n.newForAnimation=h.a.observable(!1),n.deleted=h.a.observable(!1),n.deletedMark=h.a.observable(!1),n.unseen=h.a.observable(!1),n.flagged=h.a.observable(!1),n.answered=h.a.observable(!1),n.forwarded=h.a.observable(!1),n.isReadReceipt=h.a.observable(!1),n.focused=h.a.observable(!1),n.selected=h.a.observable(!1),n.checked=h.a.observable(!1),n.hasAttachments=h.a.observable(!1),n.attachmentsSpecData=h.a.observableArray([]),n.attachmentIconClass=h.a.computed(function(){return Object(N.b)(n.hasAttachments()?n.attachmentsSpecData():[])}),n.body=null,n.isHtml=h.a.observable(!1),n.hasImages=h.a.observable(!1),n.attachments=h.a.observableArray([]),n.isPgpSigned=h.a.observable(!1),n.isPgpEncrypted=h.a.observable(!1),n.pgpSignedVerifyStatus=h.a.observable(S.SignedVerifyStatus.None),n.pgpSignedVerifyUser=h.a.observable(""),n.priority=h.a.observable(S.MessagePriority.Normal),n.readReceipt=h.a.observable(""),n.aDraftInfo=[],n.sMessageId="",n.sInReplyTo="",n.sReferences="",n.hasUnseenSubMessage=h.a.observable(!1),n.hasFlaggedSubMessage=h.a.observable(!1),n.threads=h.a.observableArray([]),n.threadsLen=h.a.computed(function(){return n.threads().length}),n.isImportant=h.a.computed(function(){return S.MessagePriority.High===n.priority()}),n.regDisposables([n.attachmentIconClass,n.threadsLen,n.isImportant]),n}return c()(t,e),t.newInstanceFromJson=function(e){var n=new t;return n.initByJson(e)?n:null},t.prototype.clear=function(){this.folderFullNameRaw="",this.uid="",this.hash="",this.requestHash="",this.subject(""),this.subjectPrefix(""),this.subjectSuffix(""),this.size(0),this.dateTimeStampInUTC(0),this.priority(S.MessagePriority.Normal),this.proxy=!1,this.fromEmailString(""),this.fromClearEmailString(""),this.toEmailsString(""),this.toClearEmailsString(""),this.senderEmailsString(""),this.senderClearEmailsString(""),this.emails=[],this.from=[],this.to=[],this.cc=[],this.bcc=[],this.replyTo=[],this.deliveredTo=[],this.unsubsribeLinks=[],this.newForAnimation(!1),this.deleted(!1),this.deletedMark(!1),this.unseen(!1),this.flagged(!1),this.answered(!1),this.forwarded(!1),this.isReadReceipt(!1),this.selected(!1),this.checked(!1),this.hasAttachments(!1),this.attachmentsSpecData([]),this.body=null,this.isHtml(!1),this.hasImages(!1),this.attachments([]),this.isPgpSigned(!1),this.isPgpEncrypted(!1),this.pgpSignedVerifyStatus(S.SignedVerifyStatus.None),this.pgpSignedVerifyUser(""),this.priority(S.MessagePriority.Normal),this.readReceipt(""),this.aDraftInfo=[],this.sMessageId="",this.sInReplyTo="",this.sReferences="",this.threads([]),this.hasUnseenSubMessage(!1),this.hasFlaggedSubMessage(!1)},t.prototype.getEmails=function(e){var t=this;return u.a.compact(u.a.uniq(u.a.map(u.a.reduce(e,function(e,n){return e.concat(t[n])},[]),function(e){return e?e.email:""})))},t.prototype.getRecipientsEmails=function(){return this.getEmails(["to","cc"])},t.prototype.friendlySize=function(){return Object(T.friendlySize)(this.size())},t.prototype.computeSenderEmail=function(){var e=E.a.sentFolder(),t=E.a.draftFolder();this.senderEmailsString(this.folderFullNameRaw===e||this.folderFullNameRaw===t?this.toEmailsString():this.fromEmailString()),this.senderClearEmailsString(this.folderFullNameRaw===e||this.folderFullNameRaw===t?this.toClearEmailsString():this.fromClearEmailString())},t.prototype.initByJson=function(e){var t=!1,n=S.MessagePriority.Normal;return e&&"Object/Message"===e["@Object"]&&(n=Object(T.pInt)(e.Priority),this.priority(-1<Object(T.inArray)(n,[S.MessagePriority.High,S.MessagePriority.Low])?n:S.MessagePriority.Normal),this.folderFullNameRaw=e.Folder,this.uid=e.Uid,this.hash=e.Hash,this.requestHash=e.RequestHash,this.proxy=!!e.ExternalProxy,this.size(Object(T.pInt)(e.Size)),this.from=Object(j.a)(e.From),this.to=Object(j.a)(e.To),this.cc=Object(j.a)(e.Cc),this.bcc=Object(j.a)(e.Bcc),this.replyTo=Object(j.a)(e.ReplyTo),this.deliveredTo=Object(j.a)(e.DeliveredTo),this.unsubsribeLinks=Object(T.isNonEmptyArray)(e.UnsubsribeLinks)?e.UnsubsribeLinks:[],this.subject(e.Subject),Object(T.isArray)(e.SubjectParts)?(this.subjectPrefix(e.SubjectParts[0]),this.subjectSuffix(e.SubjectParts[1])):(this.subjectPrefix(""),this.subjectSuffix(this.subject())),this.dateTimeStampInUTC(Object(T.pInt)(e.DateTimeStampInUTC)),this.hasAttachments(!!e.HasAttachments),this.attachmentsSpecData(Object(T.isArray)(e.AttachmentsSpecData)?e.AttachmentsSpecData:[]),this.fromEmailString(Object(j.b)(this.from,!0)),this.fromClearEmailString(Object(j.c)(this.from)),this.toEmailsString(Object(j.b)(this.to,!0)),this.toClearEmailsString(Object(j.c)(this.to)),this.threads(Object(T.isArray)(e.Threads)?e.Threads:[]),this.initFlagsByJson(e),this.computeSenderEmail(),t=!0),t},t.prototype.initUpdateByMessageJson=function(e){var t=!1,n=S.MessagePriority.Normal;return e&&"Object/Message"===e["@Object"]&&(n=Object(T.pInt)(e.Priority),this.priority(-1<Object(T.inArray)(n,[S.MessagePriority.High,S.MessagePriority.Low])?n:S.MessagePriority.Normal),this.aDraftInfo=e.DraftInfo,this.sMessageId=e.MessageId,this.sInReplyTo=e.InReplyTo,this.sReferences=e.References,this.proxy=!!e.ExternalProxy,F.a.capaOpenPGP()&&(this.isPgpSigned(!!e.PgpSigned),this.isPgpEncrypted(!!e.PgpEncrypted)),this.hasAttachments(!!e.HasAttachments),this.attachmentsSpecData(Object(T.isArray)(e.AttachmentsSpecData)?e.AttachmentsSpecData:[]),this.foundedCIDs=Object(T.isArray)(e.FoundedCIDs)?e.FoundedCIDs:[],this.attachments(this.initAttachmentsFromJson(e.Attachments)),this.readReceipt(e.ReadReceipt||""),this.computeSenderEmail(),t=!0),t},t.prototype.initAttachmentsFromJson=function(e){var t=0,n=0,o=null,i=[];if(e&&"Collection/AttachmentCollection"===e["@Object"]&&Object(T.isNonEmptyArray)(e["@Collection"]))for(t=0,n=e["@Collection"].length;t<n;t++)(o=N.a.newInstanceFromJson(e["@Collection"][t]))&&(""!==o.cidWithOutTags&&0<this.foundedCIDs.length&&0<=Object(T.inArray)(o.cidWithOutTags,this.foundedCIDs)&&(o.isLinked=!0),i.push(o));return i},t.prototype.hasUnsubsribeLinks=function(){return this.unsubsribeLinks&&0<this.unsubsribeLinks.length},t.prototype.getFirstUnsubsribeLink=function(){return this.unsubsribeLinks&&0<this.unsubsribeLinks.length?this.unsubsribeLinks[0]||"":""},t.prototype.initFlagsByJson=function(e){var t=!1;return e&&"Object/Message"===e["@Object"]&&(this.unseen(!e.IsSeen),this.flagged(!!e.IsFlagged),this.answered(!!e.IsAnswered),this.forwarded(!!e.IsForwarded),this.isReadReceipt(!!e.IsReadReceipt),this.deletedMark(!!e.IsDeleted),t=!0),t},t.prototype.fromToLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(j.b)(this.from,e,t)},t.prototype.fromDkimData=function(){var e=["none",""];return Object(T.isNonEmptyArray)(this.from)&&1===this.from.length&&this.from[0]&&this.from[0].dkimStatus&&(e=[this.from[0].dkimStatus,this.from[0].dkimValue||""]),e},t.prototype.toToLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(j.b)(this.to,e,t)},t.prototype.ccToLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(j.b)(this.cc,e,t)},t.prototype.bccToLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(j.b)(this.bcc,e,t)},t.prototype.replyToToLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(j.b)(this.replyTo,e,t)},t.prototype.lineAsCss=function(){return g()({deleted:this.deleted(),"deleted-mark":this.deletedMark(),selected:this.selected(),checked:this.checked(),flagged:this.flagged(),unseen:this.unseen(),answered:this.answered(),forwarded:this.forwarded(),focused:this.focused(),important:this.isImportant(),withAttachments:this.hasAttachments(),new:this.newForAnimation(),emptySubject:""===this.subject(),hasUnseenSubMessage:this.hasUnseenSubMessage(),hasFlaggedSubMessage:this.hasFlaggedSubMessage()})},t.prototype.hasVisibleAttachments=function(){return!!u.a.find(this.attachments(),function(e){return!e.isLinked})},t.prototype.findAttachmentByCid=function(e){var t=null,n=this.attachments();return Object(T.isNonEmptyArray)(n)&&(e=e.replace(/^<+/,"").replace(/>+$/,""),t=u.a.find(n,function(t){return e===t.cidWithOutTags})),t||null},t.prototype.findAttachmentByContentLocation=function(e){var t=null,n=this.attachments();return Object(T.isNonEmptyArray)(n)&&(t=u.a.find(n,function(t){return e===t.contentLocation})),t||null},t.prototype.messageId=function(){return this.sMessageId},t.prototype.inReplyTo=function(){return this.sInReplyTo},t.prototype.references=function(){return this.sReferences},t.prototype.fromAsSingleEmail=function(){return Object(T.isArray)(this.from)&&this.from[0]?this.from[0].email:""},t.prototype.viewLink=function(){return Object(A.q)(this.requestHash)},t.prototype.downloadLink=function(){return Object(A.p)(this.requestHash)},t.prototype.replyEmails=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],o=Object(T.isUnd)(e)?{}:e;return Object(j.d)(this.replyTo,o,n),0===n.length&&Object(j.d)(this.from,o,n),0!==n.length||t?n:this.replyEmails({},!0)},t.prototype.replyAllEmails=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],o=[],i=[],a=Object(T.isUnd)(e)?{}:e;return Object(j.d)(this.replyTo,a,o),0===o.length&&Object(j.d)(this.from,a,o),Object(j.d)(this.to,a,o),Object(j.d)(this.cc,a,i),0!==o.length||t?[o,i]:(n=this.replyAllEmails({},!0),[n[0],i])},t.prototype.textBodyToString=function(){return this.body?this.body.html():""},t.prototype.attachmentsToStringLine=function(){var e=u.a.map(this.attachments(),function(e){return e.fileName+" ("+e.friendlySize+")"});return e&&0<e.length?e.join(", "):""},t.prototype.viewPopupMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.showLazyExternalImagesInBody();var t=this.dateTimeStampInUTC()||0,n=this.ccToLine(!1),o=0<t?m.a.unix(t):null;Object(T.previewMessage)({title:this.subject(),subject:this.subject(),date:o?o.format("LLL"):"",fromCreds:this.fromToLine(!1),toLabel:Object(O.i18n)("MESSAGE/LABEL_TO"),toCreds:this.toToLine(!1),ccClass:n?"":"rl-preview-hide",ccLabel:Object(O.i18n)("MESSAGE/LABEL_CC"),ccCreds:n},this.body,this.isHtml(),e)},t.prototype.printMessage=function(){this.viewPopupMessage(!0)},t.prototype.generateUid=function(){return this.folderFullNameRaw+"/"+this.uid},t.prototype.populateByMessageListItem=function(e){return e&&(this.folderFullNameRaw=e.folderFullNameRaw,this.uid=e.uid,this.hash=e.hash,this.requestHash=e.requestHash,this.subject(e.subject())),this.subjectPrefix(this.subjectPrefix()),this.subjectSuffix(this.subjectSuffix()),e&&(this.size(e.size()),this.dateTimeStampInUTC(e.dateTimeStampInUTC()),this.priority(e.priority()),this.proxy=e.proxy,this.fromEmailString(e.fromEmailString()),this.fromClearEmailString(e.fromClearEmailString()),this.toEmailsString(e.toEmailsString()),this.toClearEmailsString(e.toClearEmailsString()),this.emails=e.emails,this.from=e.from,this.to=e.to,this.cc=e.cc,this.bcc=e.bcc,this.replyTo=e.replyTo,this.deliveredTo=e.deliveredTo,this.unsubsribeLinks=e.unsubsribeLinks,this.unseen(e.unseen()),this.flagged(e.flagged()),this.answered(e.answered()),this.forwarded(e.forwarded()),this.isReadReceipt(e.isReadReceipt()),this.deletedMark(e.deletedMark()),this.priority(e.priority()),this.selected(e.selected()),this.checked(e.checked()),this.hasAttachments(e.hasAttachments()),this.attachmentsSpecData(e.attachmentsSpecData())),this.body=null,this.aDraftInfo=[],this.sMessageId="",this.sInReplyTo="",this.sReferences="",e&&this.threads(e.threads()),this.computeSenderEmail(),this},t.prototype.showLazyExternalImagesInBody=function(){this.body&&p()(".lazy.lazy-inited[data-original]",this.body).each(function(){p()(this).attr("src",p()(this).attr("data-original")).removeAttr("data-original").removeAttr("data-loaded")})},t.prototype.lozad=function(){v()("img.lazy:not(.lazy-inited)",{threshold:.4,load:function(e){e.src=w.e,p()(e).addClass("lazy-inited").attr("src",e.dataset.original).removeAttr("data-loaded").removeAttr("data-original").css({opacity:.3}).animate({opacity:1},500)}}).observe()},t.prototype.showExternalImages=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.body&&this.body.data("rl-has-images")){this.hasImages(!1),this.body.data("rl-has-images",!1);var t=this.proxy?"data-x-additional-src":"data-x-src";p()("["+t+"]",this.body).each(function(){var n=p()(this);e&&n.is("img")?n.addClass("lazy").attr("data-original",n.attr(t)).removeAttr("data-loaded"):n.attr("src",n.attr(t)).removeAttr("data-loaded")}),t=this.proxy?"data-x-additional-style-url":"data-x-style-url",p()("["+t+"]",this.body).each(function(){var e=p()(this),n=Object(T.trim)(e.attr("style"));n=""===n?"":";"===n.substr(-1)?n+" ":n+"; ",e.attr("style",n+e.attr(t))}),e&&(this.lozad(),C.$win.resize()),Object(T.windowResize)(500)}},t.prototype.showInternalImages=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.body&&!this.body.data("rl-init-internal-images")){this.body.data("rl-init-internal-images",!0);var n=this;p()("[data-x-src-cid]",this.body).each(function(){var e=p()(this),o=n.findAttachmentByCid(e.attr("data-x-src-cid"));o&&o.download&&(t&&e.is("img")?e.addClass("lazy").attr("data-original",o.linkPreview()):e.attr("src",o.linkPreview()))}),p()("[data-x-src-location]",this.body).each(function(){var e=p()(this),o=n.findAttachmentByContentLocation(e.attr("data-x-src-location"));o||(o=n.findAttachmentByCid(e.attr("data-x-src-location"))),o&&o.download&&(t&&e.is("img")?e.addClass("lazy").attr("data-original",o.linkPreview()):e.attr("src",o.linkPreview()))}),p()("[data-x-style-cid]",this.body).each(function(){var e="",t="",o=p()(this),i=n.findAttachmentByCid(o.attr("data-x-style-cid"));i&&i.linkPreview&&""!==(t=o.attr("data-x-style-cid-name"))&&(e=""===(e=Object(T.trim)(o.attr("style")))?"":";"===e.substr(-1)?e+" ":e+"; ",o.attr("style",e+t+": url('"+i.linkPreview()+"')"))}),t&&u.a.delay(function(){return e.lozad()},300),Object(T.windowResize)(500)}},t.prototype.storeDataInDom=function(){this.body&&(this.body.data("rl-is-html",!!this.isHtml()),this.body.data("rl-has-images",!!this.hasImages()))},t.prototype.fetchDataFromDom=function(){this.body&&(this.isHtml(!!this.body.data("rl-is-html")),this.hasImages(!!this.body.data("rl-has-images")))},t.prototype.replacePlaneTextBody=function(e){this.body&&this.body.html(e).addClass("b-text-part plain")},t.prototype.flagHash=function(){return[this.deleted(),this.deletedMark(),this.unseen(),this.flagged(),this.answered(),this.forwarded(),this.isReadReceipt()].join(",")},t}(n(42).a)},function(e,t,n){var o,i;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o))e.push(n.apply(null,o));else if("object"===i)for(var r in o)a.call(o,r)&&o[r]&&e.push(r)}}return e.join(" ")}var a={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(o=[],void 0!==(i=function(){return n}.apply(t,o))&&(e.exports=i))}()},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){e.dataset.loaded=!0}var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},n={rootMargin:"0px",threshold:0,load:function(e){e.src=e.dataset.src}},o=function(e){return"true"===e.dataset.loaded},i=function(t){return function(n,o){n.forEach(function(n){n.intersectionRatio>0&&(o.unobserve(n.target),t(n.target),e(n.target))})}};return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".lozad",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t({},n,r),c=s.rootMargin,l=s.threshold,u=s.load,d=void 0;return window.IntersectionObserver&&(d=new IntersectionObserver(i(u),{rootMargin:c,threshold:l})),{observe:function(){for(var t=document.querySelectorAll(a),n=0;n<t.length;n++)o(t[n])||(d?d.observe(t[n]):(u(t[n]),e(t[n])))}}}})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i={urlsafe_encode:function(e){return i.encode(e).replace(/[+]/g,"-").replace(/[\/]/g,"_").replace(/[=]/g,"")},encode:function(e){var t="",n=void 0,a=void 0,r=void 0,s=void 0,c=void 0,l=void 0,u=void 0,d=0;for(e=i._utf8_encode(e);d<e.length;)s=(n=e.charCodeAt(d++))>>2,c=(3&n)<<4|(a=e.charCodeAt(d++))>>4,l=(15&a)<<2|(r=e.charCodeAt(d++))>>6,u=63&r,isNaN(a)?l=u=64:isNaN(r)&&(u=64),t=t+o.charAt(s)+o.charAt(c)+o.charAt(l)+o.charAt(u);return t},decode:function(e){var t="",n=void 0,a=void 0,r=void 0,s=void 0,c=void 0,l=void 0,u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)n=o.indexOf(e.charAt(u++))<<2|(s=o.indexOf(e.charAt(u++)))>>4,a=(15&s)<<4|(c=o.indexOf(e.charAt(u++)))>>2,r=(3&c)<<6|(l=o.indexOf(e.charAt(u++))),t+=String.fromCharCode(n),64!==c&&(t+=String.fromCharCode(a)),64!==l&&(t+=String.fromCharCode(r));return i._utf8_decode(t)},_utf8_encode:function(e){for(var t="",n=0,o=(e=e.replace(/\r\n/g,"\n")).length,i=0;n<o;n++)(i=e.charCodeAt(n))<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128));return t},_utf8_decode:function(e){for(var t="",n=0,o=0,i=0,a=0;n<e.length;)(o=e.charCodeAt(n))<128?(t+=String.fromCharCode(o),n++):o>191&&o<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((31&o)<<6|63&i),n+=2):(i=e.charCodeAt(n+1),a=e.charCodeAt(n+2),t+=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a),n+=3);return t}},a=(i.decode,i.encode,i.urlsafe_encode)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(219),c=n.n(s),l=n(1),u=n(20),d=function(){function e(){i()(this,e)}return e.prototype.set=function(e,t){var n=!1,o=null;try{o=c.a.getJSON(u.b)}catch(e){}(o||(o={}))[e]=t;try{c.a.set(u.b,o,{expires:30}),n=!0}catch(e){}return n},e.prototype.get=function(e){var t=null;try{var n=c.a.getJSON(u.b);t=n&&!Object(l.isUnd)(n[e])?n[e]:null}catch(e){}return t},e.supported=function(){return!(!r.a.navigator||!r.a.navigator.cookieEnabled)},e}()},function(e,t,n){var o,i;!function(a){if(void 0!==(i="function"==typeof(o=a)?o.call(t,n,t,e):o)&&(e.exports=i),!0,e.exports=a(),!!0){var r=window.Cookies,s=window.Cookies=a();s.noConflict=function(){return window.Cookies=r,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}function t(n){function o(t,i,a){var r;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},o.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{r=JSON.stringify(i),/^[\{\[]/.test(r)&&(i=r)}catch(e){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var c="";for(var l in a)a[l]&&(c+="; "+l,!0!==a[l]&&(c+="="+a[l]));return document.cookie=t+"="+i+c}t||(r={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,p=0;p<u.length;p++){var h=u[p].split("="),f=h.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var m=h[0].replace(d,decodeURIComponent);if(f=n.read?n.read(f,m):n(f,m)||f.replace(d,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===m){r=f;break}t||(r[m]=f)}catch(e){}}return r}}return o.set=o,o.get=function(e){return o.call(o,e)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(t,n){o(t,"",e(n,{expires:-1}))},o.withConverter=t,o}return t(function(){})})},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(1),c=n(97),l=n(20),u=function(){function e(){i()(this,e),this.s=null,this.s=r.a.localStorage||null}return e.prototype.set=function(e,t){if(!this.s)return!1;var n=null;try{var o=this.s.getItem(l.b)||null;n=null===o?null:r.a.JSON.parse(o)}catch(e){}(n||(n={}))[e]=t;try{return this.s.setItem(l.b,r.a.JSON.stringify(n)),!0}catch(e){}return!1},e.prototype.get=function(e){if(!this.s)return null;try{var t=this.s.getItem(l.b)||null,n=null===t?null:r.a.JSON.parse(t);return n&&!Object(s.isUnd)(n[e])?n[e]:null}catch(e){}return null},e.supported=function(){return Object(c.d)("localStorage")},e}()},function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(20),p=n(1),h=n(3),f=n(27),m=n(10),b=n(93),g=n(34),y=n(38),v=n(17),S=n(222),O=function(e){function t(){return i()(this,t),r()(this,e.apply(this,arguments))}return c()(t,e),t.prototype.isFolderExpanded=function(e,t){return t&&Object(p.isArray)(t)&&-1!==u.a.indexOf(t,e)},t.prototype.normalizeFolder=function(e){return""===e||d.r===e||null!==f.e(e)?e:""},t.prototype.folderResponseParseRec=function(e,t,n){var o=this,i=y.a.displaySpecSetting(),a=[];return u.a.each(t,function(t){if(t){var r=f.e(t.FullNameRaw);r||(r=S.a.newInstanceFromJson(t))&&(f.r(t.FullNameRaw,r),f.p(r.fullNameHash,t.FullNameRaw,r)),r&&(i?r.checkable(!!t.Checkable):r.checkable(!0),r.collapsed(!o.isFolderExpanded(r.fullNameHash,n)),t.Extended&&(t.Extended.Hash&&f.q(r.fullNameRaw,t.Extended.Hash),Object(p.isNormal)(t.Extended.MessageCount)&&r.messageCountAll(t.Extended.MessageCount),Object(p.isNormal)(t.Extended.MessageUnseenCount)&&r.messageCountUnread(t.Extended.MessageUnseenCount)),t.SubFolders&&"Collection/FolderCollection"===t.SubFolders["@Object"]&&t.SubFolders["@Collection"]&&Object(p.isArray)(t.SubFolders["@Collection"])&&r.subFolders(o.folderResponseParseRec(e,t.SubFolders["@Collection"],n)),a.push(r))}}),a},t.prototype.foldersList=function(e){if(e&&"Collection/FolderCollection"===e["@Object"]&&e["@Collection"]&&Object(p.isArray)(e["@Collection"])){var t=b.a(h.ClientSideKeyName.ExpandedFolders),n=Object(p.pInt)(e.CountRec),o=Object(p.pInt)(m.appSettingsGet("folderSpecLimit"));o=100<o?100:10>o?10:o,y.a.displaySpecSetting(0>=n||o<n),y.a.folderList(this.folderResponseParseRec(Object(p.isUnd)(e.Namespace)?"":e.Namespace,e["@Collection"],t))}},t.prototype.foldersAdditionalParameters=function(e){if(e&&e&&"Collection/FolderCollection"===e["@Object"]&&e["@Collection"]&&Object(p.isArray)(e["@Collection"])){Object(p.isUnd)(e.Namespace)||(y.a.namespace=e.Namespace),g.a.threadsAllowed(!!m.appSettingsGet("useImapThread")&&e.IsThreadsSupported&&!0),y.a.folderList.optimized(!!e.Optimized);var t=!1;e.SystemFolders&&""==""+m.settingsGet("SentFolder")+m.settingsGet("DraftFolder")+m.settingsGet("SpamFolder")+m.settingsGet("TrashFolder")+m.settingsGet("ArchiveFolder")+m.settingsGet("NullFolder")&&(m.settingsSet("SentFolder",e.SystemFolders[h.ServerFolderType.SENT]||null),m.settingsSet("DraftFolder",e.SystemFolders[h.ServerFolderType.DRAFTS]||null),m.settingsSet("SpamFolder",e.SystemFolders[h.ServerFolderType.JUNK]||null),m.settingsSet("TrashFolder",e.SystemFolders[h.ServerFolderType.TRASH]||null),m.settingsSet("ArchiveFolder",e.SystemFolders[h.ServerFolderType.ALL]||null),t=!0),y.a.sentFolder(this.normalizeFolder(m.settingsGet("SentFolder"))),y.a.draftFolder(this.normalizeFolder(m.settingsGet("DraftFolder"))),y.a.spamFolder(this.normalizeFolder(m.settingsGet("SpamFolder"))),y.a.trashFolder(this.normalizeFolder(m.settingsGet("TrashFolder"))),y.a.archiveFolder(this.normalizeFolder(m.settingsGet("ArchiveFolder"))),t&&v.a.saveSystemFolders(p.noop,{SentFolder:y.a.sentFolder(),DraftFolder:y.a.draftFolder(),SpamFolder:y.a.spamFolder(),TrashFolder:y.a.trashFolder(),ArchiveFolder:y.a.archiveFolder(),NullFolder:"NullFolder"}),b.b(h.ClientSideKeyName.FoldersLashHash,e.FoldersHash)}},t}(n(178).a);t.a=new O},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(2),p=n(3),h=n(1),f=n(8),m=n(27),b=n(37),g=function(e){function t(){i()(this,t);var n=r()(this,e.call(this,"FolderModel"));return n.name=d.a.observable(""),n.fullName="",n.fullNameRaw="",n.fullNameHash="",n.delimiter="",n.namespace="",n.deep=0,n.interval=0,n.selectable=!1,n.existen=!0,n.type=d.a.observable(p.FolderType.User),n.focused=d.a.observable(!1),n.selected=d.a.observable(!1),n.edited=d.a.observable(!1),n.subScribed=d.a.observable(!0),n.checkable=d.a.observable(!1),n.subFolders=d.a.observableArray([]),n.deleteAccess=d.a.observable(!1),n.actionBlink=d.a.observable(!1).extend({falseTimeout:1e3}),n.nameForEdit=d.a.observable(""),n.privateMessageCountAll=d.a.observable(0),n.privateMessageCountUnread=d.a.observable(0),n.collapsedPrivate=d.a.observable(!0),n}return c()(t,e),t.newInstanceFromJson=function(e){var n=new t;return n.initByJson(e)?n.initComputed():null},t.prototype.initComputed=function(){var e=this,t=Object(m.h)();return this.isInbox=d.a.computed(function(){return p.FolderType.Inbox===e.type()}),this.hasSubScribedSubfolders=d.a.computed(function(){return!!u.a.find(e.subFolders(),function(e){return(e.subScribed()||e.hasSubScribedSubfolders())&&!e.isSystemFolder()})}),this.canBeEdited=d.a.computed(function(){return p.FolderType.User===e.type()&&e.existen&&e.selectable}),this.visible=d.a.computed(function(){var t=e.subScribed(),n=e.hasSubScribedSubfolders();return t||n&&(!e.existen||!e.selectable)}),this.isSystemFolder=d.a.computed(function(){return p.FolderType.User!==e.type()}),this.hidden=d.a.computed(function(){var t=e.isSystemFolder(),n=e.hasSubScribedSubfolders();return t&&!n||!e.selectable&&!n}),this.selectableForFolderList=d.a.computed(function(){return!e.isSystemFolder()&&e.selectable}),this.messageCountAll=d.a.computed({read:this.privateMessageCountAll,write:function(t){Object(h.isPosNumeric)(t,!0)?e.privateMessageCountAll(t):e.privateMessageCountAll.valueHasMutated()}}).extend({notify:"always"}),this.messageCountUnread=d.a.computed({read:this.privateMessageCountUnread,write:function(t){Object(h.isPosNumeric)(t,!0)?e.privateMessageCountUnread(t):e.privateMessageCountUnread.valueHasMutated()}}).extend({notify:"always"}),this.printableUnreadCount=d.a.computed(function(){var t=e.messageCountAll(),n=e.messageCountUnread(),o=e.type();if(0<t){if(p.FolderType.Draft===o)return""+t;if(0<n&&p.FolderType.Trash!==o&&p.FolderType.Archive!==o&&p.FolderType.SentItems!==o)return""+n}return""}),this.canBeDeleted=d.a.computed(function(){return!e.isSystemFolder()&&0===e.subFolders().length&&t!==e.fullNameRaw}),this.canBeSubScribed=d.a.computed(function(){return!e.isSystemFolder()&&e.selectable&&t!==e.fullNameRaw}),this.canBeChecked=this.canBeSubScribed,this.localName=d.a.computed(function(){Object(f.trigger)();var t=e.name(),n=e.type();if(e.isSystemFolder())switch(n){case p.FolderType.Inbox:t=Object(f.i18n)("FOLDER_LIST/INBOX_NAME");break;case p.FolderType.SentItems:t=Object(f.i18n)("FOLDER_LIST/SENT_NAME");break;case p.FolderType.Draft:t=Object(f.i18n)("FOLDER_LIST/DRAFTS_NAME");break;case p.FolderType.Spam:t=Object(f.i18n)("FOLDER_LIST/SPAM_NAME");break;case p.FolderType.Trash:t=Object(f.i18n)("FOLDER_LIST/TRASH_NAME");break;case p.FolderType.Archive:t=Object(f.i18n)("FOLDER_LIST/ARCHIVE_NAME")}return t}),this.manageFolderSystemName=d.a.computed(function(){Object(f.trigger)();var t="",n=e.type(),o=e.name();if(e.isSystemFolder())switch(n){case p.FolderType.Inbox:t="("+Object(f.i18n)("FOLDER_LIST/INBOX_NAME")+")";break;case p.FolderType.SentItems:t="("+Object(f.i18n)("FOLDER_LIST/SENT_NAME")+")";break;case p.FolderType.Draft:t="("+Object(f.i18n)("FOLDER_LIST/DRAFTS_NAME")+")";break;case p.FolderType.Spam:t="("+Object(f.i18n)("FOLDER_LIST/SPAM_NAME")+")";break;case p.FolderType.Trash:t="("+Object(f.i18n)("FOLDER_LIST/TRASH_NAME")+")";break;case p.FolderType.Archive:t="("+Object(f.i18n)("FOLDER_LIST/ARCHIVE_NAME")+")"}return(""!==t&&"("+o+")"===t||"(inbox)"===t.toLowerCase())&&(t=""),t}),this.collapsed=d.a.computed({read:function(){return!e.hidden()&&e.collapsedPrivate()},write:function(t){e.collapsedPrivate(t)}}),this.hasUnreadMessages=d.a.computed(function(){return 0<e.messageCountUnread()&&""!==e.printableUnreadCount()}),this.hasSubScribedUnreadMessagesSubfolders=d.a.computed(function(){return!!u.a.find(e.subFolders(),function(e){return e.hasUnreadMessages()||e.hasSubScribedUnreadMessagesSubfolders()})}),this.name.subscribe(function(t){e.nameForEdit(t)}),this.edited.subscribe(function(t){t&&e.nameForEdit(e.name())}),this.messageCountUnread.subscribe(function(t){p.FolderType.Inbox===e.type()&&b.a("mailbox.inbox-unread-count",[t])}),this},t.prototype.collapsedCss=function(){return this.hasSubScribedSubfolders()?this.collapsed()?"icon-right-mini e-collapsed-sign":"icon-down-mini e-collapsed-sign":"icon-none e-collapsed-sign"},t.prototype.initByJson=function(e){var t=!1,n=Object(m.h)();return e&&"Object/Folder"===e["@Object"]&&(this.name(e.Name),this.delimiter=e.Delimiter,this.fullName=e.FullName,this.fullNameRaw=e.FullNameRaw,this.fullNameHash=e.FullNameHash,this.deep=e.FullNameRaw.split(this.delimiter).length-1,this.selectable=!!e.IsSelectable,this.existen=!!e.IsExists,this.subScribed(!!e.IsSubscribed),this.checkable(!!e.Checkable),this.type(n===this.fullNameRaw?p.FolderType.Inbox:p.FolderType.User),t=!0),t},t.prototype.printableFullName=function(){return this.fullName.split(this.delimiter).join(" / ")},t}(n(42).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(11),u=n.n(l),d=n(12),p=n.n(d),h=n(14),f=n(1),m=n(20),b=n(3),g=n(7),y=n(33),v=n(10),S=function(e){function t(){i()(this,t);var n=r()(this,e.call(this));return n.oRequests={},n.clear(),n}return c()(t,e),t.prototype.clear=function(){this.oRequests={}},t.prototype.abort=function(e,t){return this.oRequests[e]&&(!t&&this.oRequests[e].abort&&(this.oRequests[e].__aborted__=!0,this.oRequests[e].abort()),this.oRequests[e]=null,delete this.oRequests[e]),this},t.prototype.ajaxRequest=function(e,t,n,o,i,a){var r=this;return new u.a.Promise(function(s,c){var l=Object(f.microtime)();n=Object(f.isNormal)(n)?n:m.g,i=Object(f.isUnd)(i)?"":Object(f.pString)(i),t&&(o.XToken=v.appSettingsGet("token")),y.f("ajax-default-request",[e,o,i]),r.setTrigger(a,!0);var u=p.a.ajax({type:t?"POST":"GET",url:Object(h.a)(i),async:!0,dataType:"json",data:t?o||{}:{},timeout:n,global:!0}).always(function(t,n){var i=!1,u=null;t&&t.Time&&(i=Object(f.pInt)(t.Time)>Object(f.microtime)()-l);var d="";switch(!0){case"success"===n&&t&&t.Result&&e===t.Action:d=b.StorageResultType.Success;break;case!("abort"!==n||t&&t.__aborted__):d=b.StorageResultType.Abort;break;default:d=b.StorageResultType.Error}y.f("ajax-default-response",[e,b.StorageResultType.Success===d?t:null,d,i,o]),"success"===n?t&&t.Result&&e===t.Action?(t.__cached__=i,s(t)):t&&t.Action?(u=t,c(t.ErrorCode?t.ErrorCode:b.Notification.AjaxFalse)):(u=t,c(b.Notification.AjaxParse)):"timeout"===n?(u=t,c(b.Notification.AjaxTimeout)):"abort"===n?t&&t.__aborted__||c(b.Notification.AjaxAbort):(u=t,c(b.Notification.AjaxParse)),r.oRequests[e]&&(r.oRequests[e]=null,delete r.oRequests[e]),r.setTrigger(a,!1),u&&(-1<Object(f.inArray)(u.ErrorCode,[b.Notification.AuthError,b.Notification.AccessError,b.Notification.ConnectionError,b.Notification.DomainNotAllowed,b.Notification.AccountNotAllowed,b.Notification.MailServerError,b.Notification.UnknownNotification,b.Notification.UnknownError])&&(g.data.iAjaxErrorCount+=1),b.Notification.InvalidToken===u.ErrorCode&&(g.data.iTokenErrorCount+=1),m.q<g.data.iTokenErrorCount&&g.data.__APP__&&g.data.__APP__.loginAndLogoutReload&&g.data.__APP__.loginAndLogoutReload(!1,!0),(u.ClearAuth||u.Logout||m.a<g.data.iAjaxErrorCount)&&(g.data.__APP__&&g.data.__APP__.clearClientSideToken&&g.data.__APP__.clearClientSideToken(),g.data.__APP__&&!u.ClearAuth&&g.data.__APP__.loginAndLogoutReload&&g.data.__APP__.loginAndLogoutReload(!1,!0)))});u&&(r.oRequests[e]&&(r.oRequests[e]=null,delete r.oRequests[e]),r.oRequests[e]=u)})},t.prototype.getRequest=function(e,t,n,o){return n=Object(f.isUnd)(n)?"":Object(f.pString)(n),n=e+"/"+n,this.ajaxRequest(e,!1,o,null,n,t)},t.prototype.postRequest=function(e,t,n,o){return n=n||{},n.Action=e,this.ajaxRequest(e,!0,o,n,"",t)},t}(n(178).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(2),u=n(14),d=function(e){function t(n){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i()(this,t);var s=r()(this,e.call(this,"AccountModel"));return s.email=n,s.count=l.a.observable(a),s.deleteAccess=l.a.observable(!1),s.canBeDeleted=l.a.observable(!!o),s.canBeEdit=s.canBeDeleted,s}return c()(t,e),t.prototype.changeAccountLink=function(){return Object(u.i)(this.email)},t}(n(42).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(2),u=function(e){function t(n,o){i()(this,t);var a=r()(this,e.call(this,"IdentityModel"));return a.id=l.a.observable(n||""),a.email=l.a.observable(o),a.name=l.a.observable(""),a.replyTo=l.a.observable(""),a.bcc=l.a.observable(""),a.signature=l.a.observable(""),a.signatureInsertBefore=l.a.observable(!1),a.deleteAccess=l.a.observable(!1),a.canBeDeleted=l.a.computed(function(){return""!==a.id()}),a}return c()(t,e),t.prototype.formattedName=function(){var e=this.name(),t=this.email();return""!==e?e+" ("+t+")":t},t}(n(42).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(2),u=n(1),d=function(e){function t(n,o,a){i()(this,t);var s=r()(this,e.call(this,"TemplateModel"));return s.id=n,s.name=o,s.body=a,s.populated=!0,s.deleteAccess=l.a.observable(!1),s}return c()(t,e),t.prototype.parse=function(e){var t=!1;return e&&"Object/Template"===e["@Object"]&&(this.id=Object(u.pString)(e.ID),this.name=Object(u.pString)(e.Name),this.body=Object(u.pString)(e.Body),this.populated=!!e.Populated,t=!0),t},t}(n(42).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(2),u=n(1),d=n(42),p=n(53),h=function(e){function t(n,o,a,s,c,d,p,h,f){i()(this,t);var m=r()(this,e.call(this,"OpenPgpKeyModel"));return m.index=n,m.id=a,m.ids=Object(u.isNonEmptyArray)(s)?s:[a],m.guid=o,m.user="",m.users=c,m.email="",m.emails=d,m.armor=h,m.isPrivate=!!p,m.selectUser(f),m.deleteAccess=l.a.observable(!1),m}return c()(t,e),t.prototype.getNativeKey=function(){var e=null;try{if((e=p.a.openpgp.key.readArmored(this.armor))&&!e.err&&e.keys&&e.keys[0])return e}catch(e){Object(u.log)(e)}return null},t.prototype.getNativeKeys=function(){var e=this.getNativeKey();return e&&e.keys?e.keys:null},t.prototype.select=function(e,t){if(this[t]){var n=this[t].indexOf(e);-1!==n&&(this.user=this.users[n],this.email=this.emails[n])}},t.prototype.selectUser=function(e){this.select(e,"users")},t.prototype.selectEmail=function(e){this.select(e,"emails")},t}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(76),u=n(229),d=n(16),p=function(e){function t(){return i()(this,t),r()(this,e.call(this,"login",[u.a]))}return c()(t,e),t.prototype.onShow=function(){Object(d.a)().setWindowTitle("")},t}(l.a)},function(e,t,n){"use strict";function o(e,t,n,o,i){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}n.d(t,"a",function(){return U});var i,a,r,s,c,l,u,d,p=n(15),h=n.n(p),f=n(0),m=n.n(f),b=n(4),g=n.n(b),y=n(5),v=n.n(y),S=n(11),O=n.n(S),w=n(6),T=n.n(w),C=n(2),A=n(3),E=n(1),F=n(7),j=n(14),N=n(8),R=n(33),_=n(34),I=n(57),P=n(10),L=n(93),M=n(17),D=n(16),k=n(9),x=n(13),U=(i=Object(k.view)({name:["View/App/Login","View/User/Login"],type:k.ViewType.Center,templateID:"Login"}),a=Object(k.command)(function(e){return!e.submitRequest()&&e.facebookLoginEnabled()}),r=Object(k.command)(function(e){return!e.submitRequest()&&e.googleLoginEnabled()}),s=Object(k.command)(function(e){return!e.submitRequest()&&e.googleFastLoginEnabled()}),c=Object(k.command)(function(e){return!e.submitRequest()&&e.twitterLoginEnabled()}),l=Object(k.command)(function(e){return!e.submitRequest()}),i((d=function(e){function t(){m()(this,t);var n=g()(this,e.call(this));return n.hideSubmitButton=!!P.appSettingsGet("hideSubmitButton"),n.welcome=C.a.observable(!!P.settingsGet("UseLoginWelcomePage")),n.email=C.a.observable(""),n.password=C.a.observable(""),n.signMe=C.a.observable(!1),n.additionalCode=C.a.observable(""),n.additionalCode.error=C.a.observable(!1),n.additionalCode.errorAnimation=C.a.observable(!1).extend({falseTimeout:500}),n.additionalCode.focused=C.a.observable(!1),n.additionalCode.visibility=C.a.observable(!1),n.additionalCodeSignMe=C.a.observable(!1),n.logoImg=Object(E.trim)(P.settingsGet("LoginLogo")),n.loginPowered=!!P.settingsGet("LoginPowered"),n.loginDescription=Object(E.trim)(P.settingsGet("LoginDescription")),n.mobile=!!P.appSettingsGet("mobile"),n.mobileDevice=!!P.appSettingsGet("mobileDevice"),n.forgotPasswordLinkUrl=P.appSettingsGet("forgotPasswordLinkUrl"),n.registrationLinkUrl=P.appSettingsGet("registrationLinkUrl"),n.emailError=C.a.observable(!1),n.passwordError=C.a.observable(!1),n.emailErrorAnimation=C.a.observable(!1).extend({falseTimeout:500}),n.passwordErrorAnimation=C.a.observable(!1).extend({falseTimeout:500}),n.formHidden=C.a.observable(!1),n.formError=C.a.computed(function(){return n.emailErrorAnimation()||n.passwordErrorAnimation()||n.additionalCode.visibility()&&n.additionalCode.errorAnimation()}),n.emailFocus=C.a.observable(!1),n.passwordFocus=C.a.observable(!1),n.email.subscribe(function(){n.emailError(!1),n.additionalCode(""),n.additionalCode.visibility(!1)}),n.password.subscribe(function(){n.passwordError(!1)}),n.additionalCode.subscribe(function(){n.additionalCode.error(!1)}),n.additionalCode.visibility.subscribe(function(){n.additionalCode.error(!1)}),n.emailError.subscribe(function(e){n.emailErrorAnimation(!!e)}),n.passwordError.subscribe(function(e){n.passwordErrorAnimation(!!e)}),n.additionalCode.error.subscribe(function(e){n.additionalCode.errorAnimation(!!e)}),n.submitRequest=C.a.observable(!1),n.submitError=C.a.observable(""),n.submitErrorAddidional=C.a.observable(""),n.submitError.subscribe(function(e){""===e&&n.submitErrorAddidional("")}),n.allowLanguagesOnLogin=_.a.allowLanguagesOnLogin,n.langRequest=C.a.observable(!1),n.language=I.a.language,n.languages=I.a.languages,n.bSendLanguage=!1,n.languageFullName=C.a.computed(function(){return Object(E.convertLangName)(n.language())}),n.signMeType=C.a.observable(A.LoginSignMeType.Unused),n.signMeType.subscribe(function(e){n.signMe(A.LoginSignMeType.DefaultOn===e)}),n.signMeVisibility=C.a.computed(function(){return A.LoginSignMeType.Unused!==n.signMeType()}),n.facebookLoginEnabled=C.a.observable(!1),n.googleLoginEnabled=C.a.observable(!1),n.googleFastLoginEnabled=C.a.observable(!1),n.twitterLoginEnabled=C.a.observable(!1),n.socialLoginEnabled=C.a.computed(function(){var e=n.facebookLoginEnabled(),t=n.googleLoginEnabled(),o=n.twitterLoginEnabled();return e||t||o}),P.settingsGet("AdditionalLoginError")&&!n.submitError()&&n.submitError(P.settingsGet("AdditionalLoginError")),n}return v()(t,e),t.prototype.windowOpenFeatures=function(e){return"left=200,top=100,width="+e+",height="+e+",menubar=no,status=no,resizable=yes,scrollbars=yes"},t.prototype.facebookCommand=function(){return O.a.open(Object(j.A)(),"Facebook",this.windowOpenFeatures(500)),!0},t.prototype.googleCommand=function(){return O.a.open(Object(j.B)(),"Google",this.windowOpenFeatures(550)),!0},t.prototype.googleFastCommand=function(){return O.a.open(Object(j.B)(!0),"Google",this.windowOpenFeatures(550)),!0},t.prototype.twitterCommand=function(){return O.a.open(Object(j.C)(),"Twitter",this.windowOpenFeatures(500)),!0},t.prototype.submitCommand=function(){var e=this;if(Object(E.triggerAutocompleteInputChange)(),this.emailError(!1),this.passwordError(!1),this.emailError(""===Object(E.trim)(this.email())),this.passwordError(""===Object(E.trim)(this.password())),this.additionalCode.visibility()&&(this.additionalCode.error(!1),this.additionalCode.error(""===Object(E.trim)(this.additionalCode()))),this.emailError()||this.passwordError()||this.additionalCode.visibility()&&this.additionalCode.error()){switch(!0){case this.emailError():this.emailFocus(!0);break;case this.passwordError():this.passwordFocus(!0);break;case this.additionalCode.visibility()&&this.additionalCode.error():this.additionalCode.focused(!0)}return!1}var t=0,n="";if(R.f("user-login-submit",[function(e,o){t=e||0,n=o||""}]),0<t)return this.submitError(Object(N.getNotification)(t)),!1;if(""!==n)return this.submitError(n),!1;this.submitRequest(!0),F.$win.trigger("rl.tooltips.diactivate");return function(t){M.a.login(function(t,n){F.$win.trigger("rl.tooltips.diactivate"),F.$win.trigger("rl.tooltips.activate"),A.StorageResultType.Success===t&&n&&"Login"===n.Action?n.Result?n.TwoFactorAuth?(e.additionalCode(""),e.additionalCode.visibility(!0),e.submitRequest(!1),T.a.delay(function(){return e.additionalCode.focused(!0)},A.Magics.Time100ms)):n.Admin?Object(D.a)().redirectToAdminPanel():Object(D.a)().loginAndLogoutReload(!1):n.ErrorCode?(e.submitRequest(!1),-1<Object(E.inArray)(n.ErrorCode,[A.Notification.InvalidInputArgument])&&(n.ErrorCode=A.Notification.AuthError),e.submitError(Object(N.getNotificationFromResponse)(n)),""===e.submitError()?e.submitError(Object(N.getNotification)(A.Notification.UnknownError)):n.ErrorMessageAdditional&&e.submitErrorAddidional(n.ErrorMessageAdditional)):e.submitRequest(!1):(e.submitRequest(!1),e.submitError(Object(N.getNotification)(A.Notification.UnknownError)))},e.email(),"",t,!!e.signMe(),e.bSendLanguage?e.language():"",e.additionalCode.visibility()?e.additionalCode():"",!!e.additionalCode.visibility()&&!!e.additionalCodeSignMe()),L.b(A.ClientSideKeyName.LastSignMe,e.signMe()?"-1-":"-0-")}(this.password()),!0},t.prototype.displayMainForm=function(){this.welcome(!1)},t.prototype.onShow=function(){Object(k.routeOff)()},t.prototype.onShowWithDelay=function(){""!==this.email()&&""!==this.password()?this.passwordFocus(!0):""===this.email()?this.emailFocus(!0):""===this.password()?this.passwordFocus(!0):this.emailFocus(!0)},t.prototype.onHide=function(){this.emailFocus(!1),this.passwordFocus(!1)},t.prototype.onBuild=function(){var e=this,t=L.a(A.ClientSideKeyName.LastSignMe),n=(P.settingsGet("SignMe")||"unused").toLowerCase(),o=P.appSettingsGet("jsHash"),i=function(t){0===(t=Object(E.pInt)(t))?(e.submitRequest(!0),Object(D.a)().loginAndLogoutReload(!1)):e.submitError(Object(N.getNotification)(t))};switch(this.facebookLoginEnabled(!!P.settingsGet("AllowFacebookSocial")),this.twitterLoginEnabled(!!P.settingsGet("AllowTwitterSocial")),this.googleLoginEnabled(!!P.settingsGet("AllowGoogleSocial")&&!!P.settingsGet("AllowGoogleSocialAuth")),this.googleFastLoginEnabled(!!P.settingsGet("AllowGoogleSocial")&&!!P.settingsGet("AllowGoogleSocialAuthFast")),n){case A.LoginSignMeTypeAsString.DefaultOff:case A.LoginSignMeTypeAsString.DefaultOn:switch(this.signMeType(A.LoginSignMeTypeAsString.DefaultOn===n?A.LoginSignMeType.DefaultOn:A.LoginSignMeType.DefaultOff),t){case"-1-":this.signMeType(A.LoginSignMeType.DefaultOn);break;case"-0-":this.signMeType(A.LoginSignMeType.DefaultOff)}break;case A.LoginSignMeTypeAsString.Unused:default:this.signMeType(A.LoginSignMeType.Unused)}this.email(_.a.devEmail),this.password(_.a.devPassword),(this.googleLoginEnabled()||this.googleFastLoginEnabled())&&(O.a["rl_"+o+"_google_login_service"]=i),this.facebookLoginEnabled()&&(O.a["rl_"+o+"_facebook_login_service"]=i),this.twitterLoginEnabled()&&(O.a["rl_"+o+"_twitter_login_service"]=i),T.a.delay(function(){I.a.language.subscribe(function(t){e.langRequest(!0),Object(N.reload)(!1,t).then(function(){e.langRequest(!1),e.bSendLanguage=!0},function(){e.langRequest(!1)})})},A.Magics.Time50ms),Object(E.triggerAutocompleteInputChange)(!0)},t.prototype.submitForm=function(){this.submitCommand()},t.prototype.selectLanguage=function(){Object(k.showScreenPopup)(n(95),[this.language,this.languages(),I.a.userLanguage()])},t.prototype.selectLanguageOnTab=function(e){var t=this;return!!e||(T.a.delay(function(){t.emailFocus(!0)},A.Magics.Time50ms),!1)},t}(x.a),o(d.prototype,"facebookCommand",[a],h()(d.prototype,"facebookCommand"),d.prototype),o(d.prototype,"googleCommand",[r],h()(d.prototype,"googleCommand"),d.prototype),o(d.prototype,"googleFastCommand",[s],h()(d.prototype,"googleFastCommand"),d.prototype),o(d.prototype,"twitterCommand",[c],h()(d.prototype,"twitterCommand"),d.prototype),o(d.prototype,"submitCommand",[l],h()(d.prototype,"submitCommand"),d.prototype),u=d))||u)},function(e,t,n){"use strict";n.d(t,"a",function(){return N});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(3),p=n(7),h=n(1),f=n(27),m=n(8),b=n(37),g=n(10),y=n(34),v=n(47),S=n(41),O=n(38),w=n(45),T=n(231),C=n(232),A=n(237),E=n(241),F=n(16),j=n(9),N=function(e){function t(){return i()(this,t),r()(this,e.call(this,"mailbox",[T.a,C.a,A.a,E.a]))}return c()(t,e),t.prototype.updateWindowTitle=function(){var e=O.a.foldersInboxUnreadCount(),t=v.a.email();g.appSettingsGet("listPermanentFiltered")&&(e=0),Object(F.a)().setWindowTitle((""===t?"":(0<e?"("+e+") ":" ")+t+" - ")+Object(m.i18n)("TITLES/MAILBOX"))},t.prototype.onShow=function(){this.updateWindowTitle(),y.a.focusedState(d.Focused.None),y.a.focusedState(d.Focused.MessageList),g.appSettingsGet("mobile")&&Object(p.leftPanelDisabled)(!0),g.capa(d.Capa.Folders)?Object(p.leftPanelType)(""):Object(p.leftPanelType)(g.capa(d.Capa.Composer)||g.capa(d.Capa.Contacts)?"short":"none")},t.prototype.onRoute=function(e,t,n){var o=e.replace(/^(.+)~([\d]+)$/,"$2"),i=Object(f.e)(Object(f.f)(e.replace(/~([\d]+)$/,"")));i&&(e===o&&(o=""),O.a.currentFolder(i),w.a.messageListPage(t),w.a.messageListSearch(n),w.a.messageListThreadUid(o),Object(F.a)().reloadMessageList())},t.prototype.onStart=function(){var e=this;O.a.folderList.subscribe(h.windowResizeCallback),w.a.messageList.subscribe(h.windowResizeCallback),w.a.message.subscribe(h.windowResizeCallback),u.a.delay(function(){return S.a.layout.valueHasMutated()},d.Magics.Time50ms),u.a.delay(function(){return Object(j.warmUpScreenPopup)(n(43))},d.Magics.Time500ms),b.b("mailbox.inbox-unread-count",function(t){O.a.foldersInboxUnreadCount(t);var n=v.a.email();u.a.each(v.a.accounts(),function(e){e&&n===e.email&&e.count(t)}),e.updateWindowTitle()})},t.prototype.onBuild=function(){p.bMobileDevice||g.appSettingsGet("mobile")||u.a.defer(function(){Object(F.a)().initHorizontalLayoutResizer(d.ClientSideKeyName.MessageListSize)}),p.$html.on("click","#rl-right",function(){Object(p.moveAction)(!1)})},t.prototype.routes=function(){var e=Object(f.h)(),t=function(t,n){return n[0]=Object(h.pString)(n[0]),n[1]=Object(h.pInt)(n[1]),n[1]=0>=n[1]?1:n[1],n[2]=Object(h.pString)(n[2]),""===t&&(n[0]=e,n[1]=1),[Object(h.decodeURI)(n[0]),n[1],Object(h.decodeURI)(n[2])]};return[[/^([a-zA-Z0-9~]+)\/p([1-9][0-9]*)\/(.+)\/?$/,{normalize_:t}],[/^([a-zA-Z0-9~]+)\/p([1-9][0-9]*)$/,{normalize_:t}],[/^([a-zA-Z0-9~]+)\/(.+)\/?$/,{normalize_:function(t,n){return n[0]=Object(h.pString)(n[0]),n[1]=Object(h.pString)(n[1]),""===t&&(n[0]=e),[Object(h.decodeURI)(n[0]),1,Object(h.decodeURI)(n[1])]}}],[/^([^\/]*)$/,{normalize_:t}]]},t}(n(76).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(9),p=n(179),h=(o=Object(d.view)({name:"View/User/MailBox/SystemDropDown",type:d.ViewType.Right,templateID:"SystemDropDown"}))(i=function(e){function t(){return r()(this,t),c()(this,e.apply(this,arguments))}return u()(t,e),t}(p.a))||i},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(11),p=n.n(d),h=n(12),f=n.n(h),m=n(2),b=n(19),g=n.n(b),y=n(1),v=n(3),S=n(7),O=n(14),w=n(27),T=n(34),C=n(41),A=n(38),E=n(45),F=n(10),j=n(16),N=n(9),R=n(13),_=(o=Object(N.view)({name:"View/User/MailBox/FolderList",type:N.ViewType.Left,templateID:"MailFolderList"}))(i=function(e){function t(){r()(this,t);var n=c()(this,e.call(this));return n.oContentVisible=null,n.oContentScrollable=null,n.composeInEdit=T.a.composeInEdit,n.messageList=E.a.messageList,n.folderList=A.a.folderList,n.folderListSystem=A.a.folderListSystem,n.foldersChanging=A.a.foldersChanging,n.moveAction=S.moveAction,n.foldersListWithSingleInboxRootFolder=A.a.foldersListWithSingleInboxRootFolder,n.leftPanelDisabled=S.leftPanelDisabled,n.iDropOverTimer=0,n.allowComposer=!!F.capa(v.Capa.Composer),n.allowContacts=!!T.a.contactsIsAllowed(),n.allowFolders=!!F.capa(v.Capa.Folders),n.folderListFocused=m.a.computed(function(){return v.Focused.FolderList===T.a.focusedState()}),n.isInboxStarred=m.a.computed(function(){return A.a.currentFolder()&&A.a.currentFolder().isInbox()&&-1<Object(y.trim)(E.a.messageListSearch()).indexOf("is:flagged")}),n}return u()(t,e),t.prototype.onBuild=function(e){this.oContentVisible=f()(".b-content",e),this.oContentScrollable=f()(".content",this.oContentVisible);var t=this,n=F.appSettingsGet("mobile"),o=function(e,t,o){var i=Object(S.moveAction)();n&&Object(S.leftPanelDisabled)(!0),t.preventDefault(),o&&t.stopPropagation();var a=m.a.dataFor(e);a&&(i?(Object(S.moveAction)(!1),Object(j.a)().moveMessagesToFolder(A.a.currentFolderFullNameRaw(),E.a.messageListCheckedOrSelectedUidsWithSubMails(),a.fullNameRaw,!1)):(v.Layout.NoPreview===C.a.layout()&&E.a.message(null),a.fullNameRaw===A.a.currentFolderFullNameRaw()&&Object(w.q)(a.fullNameRaw,""),o?Object(N.setHash)(Object(O.o)(a.fullNameHash,1,"is:flagged")):Object(N.setHash)(Object(O.o)(a.fullNameHash))),T.a.focusedState(v.Focused.MessageList))};e.on("click",".b-folders .e-item .e-link .e-collapsed-sign",function(e){var t=m.a.dataFor(this);if(t&&e){var n=t.collapsed();Object(j.a)().setExpandedFolder(t.fullNameHash,n),t.collapsed(!n),e.preventDefault(),e.stopPropagation()}}).on("click",".b-folders .e-item .e-link.selectable .inbox-star-icon",function(e){o(this,e,!t.isInboxStarred())}).on("click",".b-folders .e-item .e-link.selectable",function(e){o(this,e,!1)}),g()("up, down",v.KeyState.FolderList,function(n,o){var i=o&&"up"===o.shortcut?v.EventKeyCode.Up:v.EventKeyCode.Down,a=f()(".b-folders .e-item .e-link:not(.hidden):visible",e);if(n&&a.length){var r=a.index(a.filter(".focused"));-1<r&&a.eq(r).removeClass("focused"),v.EventKeyCode.Up===i&&0<r?r-=1:v.EventKeyCode.Down===i&&r<a.length-1&&(r+=1),a.eq(r).addClass("focused"),t.scrollToFocused()}return!1}),g()("enter",v.KeyState.FolderList,function(){var t=f()(".b-folders .e-item .e-link:not(.hidden).focused",e);return t.length&&t[0]&&(T.a.focusedState(v.Focused.MessageList),t.click()),!1}),g()("space",v.KeyState.FolderList,function(){var t=f()(".b-folders .e-item .e-link:not(.hidden).focused",e);if(t.length&&t[0]){var n=m.a.dataFor(t[0]);if(n){var o=n.collapsed();Object(j.a)().setExpandedFolder(n.fullNameHash,o),n.collapsed(!o)}}return!1}),g()("esc, tab, shift+tab, right",v.KeyState.FolderList,function(){return T.a.focusedState(v.Focused.MessageList),Object(S.moveAction)(!1),!1}),T.a.focusedState.subscribe(function(t){f()(".b-folders .e-item .e-link.focused",e).removeClass("focused"),v.Focused.FolderList===t&&f()(".b-folders .e-item .e-link.selected",e).addClass("focused")})},t.prototype.messagesDropOver=function(e){p.a.clearTimeout(this.iDropOverTimer),e&&e.collapsed()&&(this.iDropOverTimer=p.a.setTimeout(function(){e.collapsed(!1),Object(j.a)().setExpandedFolder(e.fullNameHash,!0),Object(y.windowResize)()},v.Magics.Time500ms))},t.prototype.messagesDropOut=function(){p.a.clearTimeout(this.iDropOverTimer)},t.prototype.scrollToFocused=function(){if(!this.oContentVisible||!this.oContentScrollable)return!1;var e=f()(".e-item .e-link.focused",this.oContentScrollable),t=e.position(),n=this.oContentVisible.height(),o=e.outerHeight();return!(!t||!(0>t.top||t.top+o>n))&&(0>t.top?this.oContentScrollable.scrollTop(this.oContentScrollable.scrollTop()+t.top-20):this.oContentScrollable.scrollTop(this.oContentScrollable.scrollTop()+t.top-n+o+20),!0)},t.prototype.messagesDrop=function(e,t){if(e&&t&&t.helper){var n=t.helper.data("rl-folder"),o=S.$html.hasClass("rl-ctrl-key-pressed"),i=t.helper.data("rl-uids");Object(y.isNormal)(n)&&""!==n&&Object(y.isArray)(i)&&Object(j.a)().moveMessagesToFolder(n,i,e.fullNameRaw,o)}},t.prototype.composeClick=function(){F.capa(v.Capa.Composer)&&Object(N.showScreenPopup)(n(43))},t.prototype.createFolder=function(){Object(N.showScreenPopup)(n(183))},t.prototype.configureFolders=function(){Object(N.setHash)(Object(O.z)("folders"))},t.prototype.contactsClick=function(){this.allowContacts&&Object(N.showScreenPopup)(n(181))},t}(R.a))||i},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(2),u=n(1),d=n(176),p=function(e){function t(n,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";i()(this,t);var h=r()(this,e.call(this,"ComposeAttachmentModel"));return h.id=n,h.isInline=!!s,h.isLinked=!!c,h.CID=d,h.contentLocation=p,h.fromMessage=!1,h.fileName=l.a.observable(o),h.size=l.a.observable(a),h.tempName=l.a.observable(""),h.progress=l.a.observable(0),h.error=l.a.observable(""),h.waiting=l.a.observable(!0),h.uploading=l.a.observable(!1),h.enabled=l.a.observable(!0),h.complete=l.a.observable(!1),h.progressText=l.a.computed(function(){var e=h.progress();return 0===e?"":(98<e?100:e)+"%"}),h.progressStyle=l.a.computed(function(){var e=h.progress();return 0===e?"":"width:"+(98<e?100:e)+"%"}),h.title=l.a.computed(function(){var e=h.error();return""!==e?e:h.fileName()}),h.friendlySize=l.a.computed(function(){var e=h.size();return null===e?"":Object(u.friendlySize)(e)}),h.mimeType=l.a.computed(function(){return Object(u.mimeContentType)(h.fileName())}),h.fileExt=l.a.computed(function(){return Object(u.getFileExtension)(h.fileName())}),h.regDisposables([h.progressText,h.progressStyle,h.title,h.friendlySize,h.mimeType,h.fileExt]),h}return c()(t,e),t.prototype.initByUploadJson=function(e){var t=!1;return e&&(this.fileName(e.Name),this.size(Object(u.isUnd)(e.Size)?0:Object(u.pInt)(e.Size)),this.tempName(Object(u.isUnd)(e.TempName)?"":e.TempName),this.isInline=!1,t=!0),t},t.prototype.iconClass=function(){return Object(d.d)(Object(d.c)(this.fileExt(),this.mimeType()))[0]},t.prototype.iconText=function(){return Object(d.d)(Object(d.c)(this.fileExt(),this.mimeType()))[1]},t}(n(42).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(2),p=n(3),h=n(1),f=n(14),m=function(e){function t(){i()(this,t);var n=r()(this,e.call(this,"ContactModel"));return n.idContact=0,n.display="",n.properties=[],n.readOnly=!1,n.focused=d.a.observable(!1),n.selected=d.a.observable(!1),n.checked=d.a.observable(!1),n.deleted=d.a.observable(!1),n}return c()(t,e),t.prototype.getNameAndEmailHelper=function(){var e="",t="";return Object(h.isNonEmptyArray)(this.properties)&&u.a.each(this.properties,function(n){n&&(p.ContactPropertyType.FirstName===n[0]?e=Object(h.trim)(n[1]+" "+e):p.ContactPropertyType.LastName===n[0]?e=Object(h.trim)(e+" "+n[1]):""===t&&p.ContactPropertyType.Email===n[0]&&(t=n[1]))}),""===t?null:[t,e]},t.prototype.parse=function(e){var t=this,n=!1;return e&&"Object/Contact"===e["@Object"]&&(this.idContact=Object(h.pInt)(e.IdContact),this.display=Object(h.pString)(e.Display),this.readOnly=!!e.ReadOnly,Object(h.isNonEmptyArray)(e.Properties)&&u.a.each(e.Properties,function(e){e&&e.Type&&Object(h.isNormal)(e.Value)&&Object(h.isNormal)(e.TypeStr)&&t.properties.push([Object(h.pInt)(e.Type),Object(h.pString)(e.Value),Object(h.pString)(e.TypeStr)])}),n=!0),n},t.prototype.srcAttr=function(){return Object(f.j)()},t.prototype.generateUid=function(){return Object(h.pString)(this.idContact)},t.prototype.lineAsCss=function(){var e=[];return this.deleted()&&e.push("deleted"),this.selected()&&e.push("selected"),this.checked()&&e.push("checked"),this.focused()&&e.push("focused"),e.join(" ")},t}(n(42).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(2),u=n(3),d=n(1),p=n(8),h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.ContactPropertyType.Unknown,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";i()(this,t);var h=r()(this,e.call(this,"ContactPropertyModel"));return h.type=l.a.observable(Object(d.pInt)(n)),h.typeStr=l.a.observable(Object(d.pString)(o)),h.focused=l.a.observable(!!s),h.value=l.a.observable(Object(d.pString)(a)),h.placeholder=l.a.observable(c),h.placeholderValue=l.a.computed(function(){var e=h.placeholder();return e?Object(p.i18n)(e):""}),h.largeValue=l.a.computed(function(){return u.ContactPropertyType.Note===h.type()}),h.regDisposables([h.placeholderValue,h.largeValue]),h}return c()(t,e),t}(n(42).a)},function(e,t,n){"use strict";function o(e,t,n,o,i){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ComposeOpenPgpPopupView",function(){return L}),n.d(t,"default",function(){return L});var i,a,r,s,c,l,u,d=n(15),p=n.n(d),h=n(0),f=n.n(h),m=n(4),b=n.n(m),g=n(5),y=n.n(g),v=n(6),S=n.n(v),O=n(12),w=n.n(O),T=n(2),C=n(19),A=n.n(C),E=n(1),F=n(3),j=n(8),N=n(53),R=n(44),_=n(9),I=n(13),P=-8,L=(i=Object(_.popup)({name:"View/Popup/ComposeOpenPgp",templateID:"PopupsComposeOpenPgp"}),a=Object(_.command)(function(e){return!e.submitRequest()&&(e.sign()||e.encrypt())}),r=Object(_.command)(),s=Object(_.command)(),c=Object(_.command)(),i((u=function(e){function t(){f()(this,t);var n=b()(this,e.call(this));return n.publicKeysOptionsCaption=Object(j.i18n)("PGP_NOTIFICATIONS/ADD_A_PUBLICK_KEY"),n.privateKeysOptionsCaption=Object(j.i18n)("PGP_NOTIFICATIONS/SELECT_A_PRIVATE_KEY"),n.notification=T.a.observable(""),n.sign=T.a.observable(!1),n.encrypt=T.a.observable(!1),n.password=T.a.observable(""),n.password.focus=T.a.observable(!1),n.buttonFocus=T.a.observable(!1),n.text=T.a.observable(""),n.selectedPrivateKey=T.a.observable(null),n.selectedPublicKey=T.a.observable(null),n.signKey=T.a.observable(null),n.encryptKeys=T.a.observableArray([]),n.encryptKeysView=T.a.computed(function(){return S.a.compact(S.a.map(n.encryptKeys(),function(e){return e?e.key:null}))}),n.privateKeysOptions=T.a.computed(function(){var e=S.a.map(N.a.openpgpkeysPrivate(),function(e,t){return n.signKey()&&n.signKey().key.id===e.id?null:S.a.map(e.users,function(n){return{id:e.guid,name:"("+e.id.substr(P).toUpperCase()+") "+n,key:e,class:t%2?"odd":"even"}})});return S.a.compact(S.a.flatten(e,!0))}),n.publicKeysOptions=T.a.computed(function(){var e=S.a.map(N.a.openpgpkeysPublic(),function(e,t){return-1<Object(E.inArray)(e,n.encryptKeysView())?null:S.a.map(e.users,function(n){return{id:e.guid,name:"("+e.id.substr(P).toUpperCase()+") "+n,key:e,class:t%2?"odd":"even"}})});return S.a.compact(S.a.flatten(e,!0))}),n.submitRequest=T.a.observable(!1),n.resultCallback=null,n.selectedPrivateKey.subscribe(function(e){e&&(n.selectCommand(),n.updateCommand())}),n.selectedPublicKey.subscribe(function(e){e&&n.addCommand()}),n.sDefaultKeyScope=F.KeyState.PopupComposeOpenPGP,n.defautOptionsAfterRender=E.defautOptionsAfterRender,n.addOptionClass=function(e,t){n.defautOptionsAfterRender(e,t),t&&!Object(E.isUnd)(t.class)&&e&&w()(e).addClass(t.class)},n.deletePublickKey=S.a.bind(n.deletePublickKey,n),n}return y()(t,e),t.prototype.doCommand=function(){var e=this,t=!0,n=null,o=[];if(this.submitRequest(!0),t&&this.sign()&&(this.signKey()?this.signKey().key||(this.notification(Object(j.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND_FOR",{EMAIL:this.signKey().email})),t=!1):(this.notification(Object(j.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND")),t=!1),t)){var i=this.signKey().key.getNativeKeys();n=i[0]||null;try{n&&n.decrypt(Object(E.pString)(this.password()))}catch(e){n=null}n||(this.notification(Object(j.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND")),t=!1)}return t&&this.encrypt()&&(0===this.encryptKeys().length?(this.notification(Object(j.i18n)("PGP_NOTIFICATIONS/NO_PUBLIC_KEYS_FOUND")),t=!1):this.encryptKeys()&&(o=[],S.a.each(this.encryptKeys(),function(n){n&&n.key?o=o.concat(S.a.compact(S.a.flatten(n.key.getNativeKeys()))):n&&n.email&&(e.notification(Object(j.i18n)("PGP_NOTIFICATIONS/NO_PUBLIC_KEYS_FOUND_FOR",{EMAIL:n.email})),t=!1)}),!t||0!==o.length&&this.encryptKeys().length===o.length||(t=!1))),t&&this.resultCallback?S.a.delay(function(){var t=null;try{n&&0===o.length?t=N.a.openpgp.sign({data:e.text(),privateKeys:[n]}):n&&0<o.length?t=N.a.openpgp.encrypt({data:e.text(),publicKeys:o,privateKeys:[n]}):!n&&0<o.length&&(t=N.a.openpgp.encrypt({data:e.text(),publicKeys:o}))}catch(t){Object(E.log)(t),e.notification(Object(j.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+t}))}if(t)try{t.then(function(t){e.resultCallback(t.data),e.cancelCommand()}).catch(function(t){e.notification(Object(j.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+t}))})}catch(t){e.notification(Object(j.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+t}))}e.submitRequest(!1)},F.Magics.Time20ms):this.submitRequest(!1),t},t.prototype.selectCommand=function(){var e=this.selectedPrivateKey(),t=e?S.a.find(this.privateKeysOptions(),function(t){return t&&e===t.id}):null;t&&this.signKey({empty:!t.key,selected:T.a.observable(!!t.key),users:t.key.users,hash:t.key.id.substr(P).toUpperCase(),key:t.key})},t.prototype.addCommand=function(){var e=this.selectedPublicKey(),t=this.encryptKeys(),n=e?S.a.find(this.publicKeysOptions(),function(t){return t&&e===t.id}):null;n&&(t.push({empty:!n.key,selected:T.a.observable(!!n.key),removable:T.a.observable(!this.sign()||!this.signKey()||this.signKey().key.id!==n.key.id),users:n.key.users,hash:n.key.id.substr(P).toUpperCase(),key:n.key}),this.encryptKeys(t))},t.prototype.updateCommand=function(){var e=this;S.a.each(this.encryptKeys(),function(t){t.removable(!e.sign()||!e.signKey()||e.signKey().key.id!==t.key.id)})},t.prototype.deletePublickKey=function(e){this.encryptKeys.remove(e)},t.prototype.clearPopup=function(){this.notification(""),this.sign(!1),this.encrypt(!1),this.password(""),this.password.focus(!1),this.buttonFocus(!1),this.signKey(null),this.encryptKeys([]),this.text(""),this.resultCallback=null},t.prototype.onBuild=function(){var e=this;A()("tab,shift+tab",F.KeyState.PopupComposeOpenPGP,function(){switch(!0){case e.password.focus():e.buttonFocus(!0);break;case e.buttonFocus():e.password.focus(!0)}return!1})},t.prototype.onHideWithDelay=function(){this.clearPopup()},t.prototype.onShowWithDelay=function(){this.sign()?this.password.focus(!0):this.buttonFocus(!0)},t.prototype.onShow=function(e,t,n,o,i,a){var r=this;this.clearPopup();var s=[],c="",l=new R.EmailModel;if(this.resultCallback=e,""!==o&&s.push(o),""!==i&&s.push(i),""!==a&&s.push(a),s=s.join(", ").split(","),s=S.a.compact(S.a.map(s,function(e){return l.clear(),l.mailsoParse(Object(E.trim)(e)),""!==l.email&&l.email})),n&&n.email()){c=n.email(),s.unshift(c);var u=N.a.findAllPrivateKeysByEmailNotNative(c);u&&u[0]&&this.signKey({users:u[0].users||[c],hash:u[0].id.substr(P).toUpperCase(),key:u[0]})}this.signKey()&&this.sign(!0),s&&0<s.length&&(this.encryptKeys(S.a.uniq(S.a.compact(S.a.flatten(S.a.map(s,function(e){var t=N.a.findAllPublicKeysByEmailNotNative(e);return t?S.a.map(t,function(t){return{empty:!t,selected:T.a.observable(!!t),removable:T.a.observable(!r.sign()||!r.signKey()||r.signKey().key.id!==t.id),users:t?t.users||[e]:[e],hash:t?t.id.substr(P).toUpperCase():"",key:t}}):[]}),!0)),function(e){return e.hash})),0<this.encryptKeys().length&&this.encrypt(!0)),this.text(t)},t}(I.a),o(u.prototype,"doCommand",[a],p()(u.prototype,"doCommand"),u.prototype),o(u.prototype,"selectCommand",[r],p()(u.prototype,"selectCommand"),u.prototype),o(u.prototype,"addCommand",[s],p()(u.prototype,"addCommand"),u.prototype),o(u.prototype,"updateCommand",[c],p()(u.prototype,"updateCommand"),u.prototype),l=u))||l)},function(e,t,n){"use strict";function o(e,t,n,o,i){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}n.d(t,"a",function(){return ie});var i,a,r,s,c,l,u,d,p,h,f,m,b,g=n(15),y=n.n(g),v=n(0),S=n.n(v),O=n(4),w=n.n(O),T=n(5),C=n.n(T),A=n(11),E=n.n(A),F=n(6),j=n.n(F),N=n(12),R=n.n(N),_=n(2),I=n(19),P=n.n(I),L=n(99),M=n.n(L),D=n(238),k=n.n(D),x=n(3),U=n(20),H=n(7),B=n(1),G=n(14),K=n(182),V=n(37),z=n(8),q=n(27),W=n(34),Y=n(177),$=n(41),J=n(38),X=n(45),Z=n(10),Q=n(17),ee=n(16),te=n(9),ne=n(13),oe=function(e){return e.canBeMoved()},ie=(i=Object(te.view)({name:"View/User/MailBox/MessageList",type:te.ViewType.Right,templateID:"MailMessageList"}),a=Object(te.command)(),r=Object(te.command)(),s=Object(te.command)(oe),c=Object(te.command)(oe),l=Object(te.command)(oe),u=Object(te.command)(oe),d=Object(te.command)(oe),p=Object(te.command)(oe),h=Object(te.command)(oe),f=Object(te.command)(oe),i((b=function(e){function t(){S()(this,t);var n=w()(this,e.call(this));return n.sLastUid=null,n.bPrefetch=!1,n.emptySubjectValue="",n.iGoToUpUpOrDownDownTimeout=0,n.mobile=!!Z.appSettingsGet("mobile"),n.newMoveToFolder=W.a.newMoveToFolder,n.allowReload=!!Z.capa(x.Capa.Reload),n.allowSearch=!!Z.capa(x.Capa.Search),n.allowSearchAdv=!!Z.capa(x.Capa.SearchAdv),n.allowComposer=!!Z.capa(x.Capa.Composer),n.allowMessageListActions=!!Z.capa(x.Capa.MessageListActions),n.allowDangerousActions=!!Z.capa(x.Capa.DangerousActions),n.allowFolders=!!Z.capa(x.Capa.Folders),n.popupVisibility=H.popupVisibility,n.message=X.a.message,n.messageList=X.a.messageList,n.messageListDisableAutoSelect=X.a.messageListDisableAutoSelect,n.folderList=J.a.folderList,n.composeInEdit=W.a.composeInEdit,n.leftPanelDisabled=H.leftPanelDisabled,n.selectorMessageSelected=X.a.selectorMessageSelected,n.selectorMessageFocused=X.a.selectorMessageFocused,n.isMessageSelected=X.a.isMessageSelected,n.messageListSearch=X.a.messageListSearch,n.messageListThreadUid=X.a.messageListThreadUid,n.messageListError=X.a.messageListError,n.folderMenuForMove=J.a.folderMenuForMove,n.useCheckboxesInList=$.a.useCheckboxesInList,n.mainMessageListSearch=X.a.mainMessageListSearch,n.messageListEndFolder=X.a.messageListEndFolder,n.messageListEndThreadUid=X.a.messageListEndThreadUid,n.messageListChecked=X.a.messageListChecked,n.messageListCheckedOrSelected=X.a.messageListCheckedOrSelected,n.messageListCheckedOrSelectedUidsWithSubMails=X.a.messageListCheckedOrSelectedUidsWithSubMails,n.messageListCompleteLoadingThrottle=X.a.messageListCompleteLoadingThrottle,n.messageListCompleteLoadingThrottleForAnimation=X.a.messageListCompleteLoadingThrottleForAnimation,Object(z.initOnStartOrLangChange)(function(){n.emptySubjectValue=Object(z.i18n)("MESSAGE_LIST/EMPTY_SUBJECT_TEXT")}),n.userQuota=Y.a.quota,n.userUsageSize=Y.a.usage,n.userUsageProc=Y.a.percentage,n.moveDropdownTrigger=_.a.observable(!1),n.moreDropdownTrigger=_.a.observable(!1),n.dragOver=_.a.observable(!1).extend({throttle:1}),n.dragOverEnter=_.a.observable(!1).extend({throttle:1}),n.dragOverArea=_.a.observable(null),n.dragOverBodyArea=_.a.observable(null),n.messageListItemTemplate=_.a.computed(function(){return n.mobile||x.Layout.SidePreview===$.a.layout()?"MailMessageListItem":"MailMessageListItemNoPreviewPane"}),n.messageListSearchDesc=_.a.computed(function(){var e=X.a.messageListEndSearch();return""===e?"":Object(z.i18n)("MESSAGE_LIST/SEARCH_RESULT_FOR",{SEARCH:e})}),n.messageListPagenator=_.a.computed(Object(B.computedPagenatorHelper)(X.a.messageListPage,X.a.messageListPageCount)),n.checkAll=_.a.computed({read:function(){return 0<X.a.messageListChecked().length},write:function(e){e=!!e,j.a.each(X.a.messageList(),function(t){t.checked(e)})}}),n.inputMessageListSearchFocus=_.a.observable(!1),n.sLastSearchValue="",n.inputProxyMessageListSearch=_.a.computed({read:n.mainMessageListSearch,write:function(e){n.sLastSearchValue=e}}),n.isIncompleteChecked=_.a.computed(function(){var e=X.a.messageList().length,t=X.a.messageListChecked().length;return 0<e&&0<t&&e>t}),n.hasMessages=_.a.computed(function(){return 0<n.messageList().length}),n.hasCheckedOrSelectedLines=_.a.computed(function(){return 0<n.messageListCheckedOrSelected().length}),n.isSpamFolder=_.a.computed(function(){return J.a.spamFolder()===n.messageListEndFolder()&&""!==J.a.spamFolder()}),n.isSpamDisabled=_.a.computed(function(){return U.r===J.a.spamFolder()}),n.isTrashFolder=_.a.computed(function(){return J.a.trashFolder()===n.messageListEndFolder()&&""!==J.a.trashFolder()}),n.isDraftFolder=_.a.computed(function(){return J.a.draftFolder()===n.messageListEndFolder()&&""!==J.a.draftFolder()}),n.isSentFolder=_.a.computed(function(){return J.a.sentFolder()===n.messageListEndFolder()&&""!==J.a.sentFolder()}),n.isArchiveFolder=_.a.computed(function(){return J.a.archiveFolder()===n.messageListEndFolder()&&""!==J.a.archiveFolder()}),n.isArchiveDisabled=_.a.computed(function(){return U.r===J.a.archiveFolder()}),n.isArchiveVisible=_.a.computed(function(){return!n.isArchiveFolder()&&!n.isArchiveDisabled()&&!n.isDraftFolder()}),n.isSpamVisible=_.a.computed(function(){return!(n.isSpamFolder()||n.isSpamDisabled()||n.isDraftFolder()||n.isSentFolder())}),n.isUnSpamVisible=_.a.computed(function(){return n.isSpamFolder()&&!n.isSpamDisabled()&&!n.isDraftFolder()&&!n.isSentFolder()}),n.mobileCheckedStateShow=_.a.computed(function(){var e=0<n.messageListChecked().length;return!n.mobile||e}),n.mobileCheckedStateHide=_.a.computed(function(){var e=0<n.messageListChecked().length;return!n.mobile||!e}),n.messageListFocused=_.a.computed(function(){return x.Focused.MessageList===W.a.focusedState()}),n.canBeMoved=n.hasCheckedOrSelectedLines,n.quotaTooltip=j.a.bind(n.quotaTooltip,n),n.selector=new K.a(n.messageList,n.selectorMessageSelected,n.selectorMessageFocused,".messageListItem .actionHandle",".messageListItem.selected",".messageListItem .checkboxMessage",".messageListItem.focused"),n.selector.on("onItemSelect",function(e){X.a.selectMessage(e)}),n.selector.on("onItemGetUid",function(e){return e?e.generateUid():""}),n.selector.on("onAutoSelect",function(){return n.useAutoSelect()}),n.selector.on("onUpUpOrDownDown",function(e){n.goToUpUpOrDownDown(e)}),V.b("mailbox.message-list.selector.go-down",function(e){n.selector.goDown(e)}),V.b("mailbox.message-list.selector.go-up",function(e){n.selector.goUp(e)}),V.b("mailbox.message.show",function(e,t){var o=j.a.find(n.messageList(),function(n){return n&&e===n.folderFullNameRaw&&t===n.uid});"INBOX"===e&&Object(te.setHash)(Object(G.o)(e,1)),o?n.selector.selectMessageItem(o):("INBOX"!==e&&Object(te.setHash)(Object(G.o)(e,1)),X.a.selectMessageByFolderAndUid(e,t))}),X.a.messageListEndHash.subscribe(function(){n.selector.scrollToTop()}),n}return C()(t,e),t.prototype.clearCommand=function(){Z.capa(x.Capa.DangerousActions)&&Object(te.showScreenPopup)(n(239),[J.a.currentFolder()])},t.prototype.reloadCommand=function(){!X.a.messageListCompleteLoadingThrottleForAnimation()&&this.allowReload&&Object(ee.a)().reloadMessageList(!1,!0)},t.prototype.multyForwardCommand=function(){Z.capa(x.Capa.Composer)&&Object(te.showScreenPopup)(n(43),[x.ComposeType.ForwardAsAttachment,X.a.messageListCheckedOrSelected()])},t.prototype.deleteWithoutMoveCommand=function(){Z.capa(x.Capa.DangerousActions)&&Object(ee.a)().deleteMessagesFromFolder(x.FolderType.Trash,J.a.currentFolderFullNameRaw(),X.a.messageListCheckedOrSelectedUidsWithSubMails(),!1)},t.prototype.deleteCommand=function(){Object(ee.a)().deleteMessagesFromFolder(x.FolderType.Trash,J.a.currentFolderFullNameRaw(),X.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},t.prototype.archiveCommand=function(){Object(ee.a)().deleteMessagesFromFolder(x.FolderType.Archive,J.a.currentFolderFullNameRaw(),X.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},t.prototype.spamCommand=function(){Object(ee.a)().deleteMessagesFromFolder(x.FolderType.Spam,J.a.currentFolderFullNameRaw(),X.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},t.prototype.notSpamCommand=function(){Object(ee.a)().deleteMessagesFromFolder(x.FolderType.NotSpam,J.a.currentFolderFullNameRaw(),X.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},t.prototype.moveCommand=function(){},t.prototype.moveNewCommand=function(e,t){this.newMoveToFolder()&&this.mobileCheckedStateShow()&&(e&&t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation&&t.stopPropagation()),Object(H.moveAction)()?(W.a.focusedState(x.Focused.MessageList),Object(H.moveAction)(!1)):(W.a.focusedState(x.Focused.FolderList),Object(H.moveAction)(!0)))},t.prototype.hideLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(H.leftPanelDisabled)(!0)},t.prototype.showLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(H.leftPanelDisabled)(!1)},t.prototype.composeClick=function(){Z.capa(x.Capa.Composer)&&Object(te.showScreenPopup)(n(43))},t.prototype.goToUpUpOrDownDown=function(e){var t=this;return!(0<this.messageListChecked().length)&&(E.a.clearTimeout(this.iGoToUpUpOrDownDownTimeout),this.iGoToUpUpOrDownDownTimeout=E.a.setTimeout(function(){var n=null,o=null,i=null,a=null;j.a.find(t.messageListPagenator(),function(e){if(e){if(a&&(o=e),e.current&&(a=e,n=i),o)return!0;i=e}return!1}),x.Layout.NoPreview!==$.a.layout()||t.message()?t.selector.iSelectNextHelper=e?-1:1:t.selector.iFocusedNextHelper=e?-1:1,(e?n:o)&&(t.selector.unselect(),t.gotoPage(e?n:o))},x.Magics.Time350ms),!0)},t.prototype.useAutoSelect=function(){return!this.messageListDisableAutoSelect()&&(!/is:unseen/.test(this.mainMessageListSearch())&&x.Layout.NoPreview!==$.a.layout())},t.prototype.searchEnterAction=function(){this.mainMessageListSearch(this.sLastSearchValue),this.inputMessageListSearchFocus(!1)},t.prototype.printableMessageCountForDeletion=function(){var e=this.messageListCheckedOrSelectedUidsWithSubMails().length;return 1<e?" ("+(100>e?e:"99+")+")":""},t.prototype.cancelSearch=function(){this.mainMessageListSearch(""),this.inputMessageListSearchFocus(!1)},t.prototype.cancelThreadUid=function(){Object(te.setHash)(Object(G.o)(J.a.currentFolderFullNameHash(),X.a.messageListPageBeforeThread(),X.a.messageListSearch()))},t.prototype.moveSelectedMessagesToFolder=function(e,t){return this.canBeMoved()&&Object(ee.a)().moveMessagesToFolder(J.a.currentFolderFullNameRaw(),X.a.messageListCheckedOrSelectedUidsWithSubMails(),e,t),!1},t.prototype.dragAndDronHelper=function(e){e&&e.checked(!0);var t=Object(B.draggablePlace)(),n=function(){var e=X.a.messageListCheckedOrSelectedUidsWithSubMails();t.data("rl-uids",e),t.find(".text").text(""+e.length)};return t.data("rl-folder",J.a.currentFolderFullNameRaw()),n(),j.a.defer(n),t},t.prototype.setAction=function(e,t,n){Object(ee.a)().messageListAction(e,t,n)},t.prototype.setActionForAll=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(""!==e){var o=0,i=[],a=Object(q.e)(e);if(a){switch(t){case x.MessageSetAction.SetSeen:(a=Object(q.e)(e))&&(j.a.each(X.a.messageList(),function(e){e.unseen()&&(o+=1),e.unseen(!1),i.push(e.uid)}),n?(a.messageCountUnread(a.messageCountUnread()-o),0>a.messageCountUnread()&&a.messageCountUnread(0)):a.messageCountUnread(0),Object(q.c)(e)),Q.a.messageSetSeenToAll(B.noop,e,!0,n?i:null);break;case x.MessageSetAction.UnsetSeen:(a=Object(q.e)(e))&&(j.a.each(X.a.messageList(),function(e){e.unseen()||(o+=1),e.unseen(!0),i.push(e.uid)}),n?(a.messageCountUnread(a.messageCountUnread()+o),a.messageCountAll()<a.messageCountUnread()&&a.messageCountUnread(a.messageCountAll())):a.messageCountUnread(a.messageCountAll()),Object(q.c)(e)),Q.a.messageSetSeenToAll(B.noop,e,!1,n?i:null)}Object(ee.a)().reloadFlagsCurrentMessageListAndMessageFromCache()}}},t.prototype.listSetSeen=function(){this.setAction(J.a.currentFolderFullNameRaw(),x.MessageSetAction.SetSeen,X.a.messageListCheckedOrSelected())},t.prototype.listSetAllSeen=function(){this.setActionForAll(J.a.currentFolderFullNameRaw(),x.MessageSetAction.SetSeen,this.messageListEndThreadUid())},t.prototype.listUnsetSeen=function(){this.setAction(J.a.currentFolderFullNameRaw(),x.MessageSetAction.UnsetSeen,X.a.messageListCheckedOrSelected())},t.prototype.listSetFlags=function(){this.setAction(J.a.currentFolderFullNameRaw(),x.MessageSetAction.SetFlag,X.a.messageListCheckedOrSelected())},t.prototype.listUnsetFlags=function(){this.setAction(J.a.currentFolderFullNameRaw(),x.MessageSetAction.UnsetFlag,X.a.messageListCheckedOrSelected())},t.prototype.flagMessages=function(e){var t=this.messageListCheckedOrSelected();if(e){var n=j.a.map(t,function(e){return e.uid});0<n.length&&-1<Object(B.inArray)(e.uid,n)?this.setAction(e.folderFullNameRaw,e.flagged()?x.MessageSetAction.UnsetFlag:x.MessageSetAction.SetFlag,t):this.setAction(e.folderFullNameRaw,e.flagged()?x.MessageSetAction.UnsetFlag:x.MessageSetAction.SetFlag,[e])}},t.prototype.flagMessagesFast=function(e){var t=this.messageListCheckedOrSelected();if(0<t.length)if(Object(B.isUnd)(e)){var n=j.a.filter(t,function(e){return e.flagged()});this.setAction(t[0].folderFullNameRaw,t.length===n.length?x.MessageSetAction.UnsetFlag:x.MessageSetAction.SetFlag,t)}else this.setAction(t[0].folderFullNameRaw,e?x.MessageSetAction.SetFlag:x.MessageSetAction.UnsetFlag,t)},t.prototype.seenMessagesFast=function(e){var t=this.messageListCheckedOrSelected();if(0<t.length)if(Object(B.isUnd)(e)){var n=j.a.filter(t,function(e){return e.unseen()});this.setAction(t[0].folderFullNameRaw,0<n.length?x.MessageSetAction.SetSeen:x.MessageSetAction.UnsetSeen,t)}else this.setAction(t[0].folderFullNameRaw,e?x.MessageSetAction.SetSeen:x.MessageSetAction.UnsetSeen,t)},t.prototype.gotoPage=function(e){e&&Object(te.setHash)(Object(G.o)(J.a.currentFolderFullNameHash(),e.value,X.a.messageListSearch(),X.a.messageListThreadUid()))},t.prototype.gotoThread=function(e){e&&0<e.threadsLen()&&(X.a.messageListPageBeforeThread(X.a.messageListPage()),Object(te.setHash)(Object(G.o)(J.a.currentFolderFullNameHash(),1,X.a.messageListSearch(),e.uid)))},t.prototype.clearListIsVisible=function(){return""===this.messageListSearchDesc()&&""===this.messageListError()&&""===this.messageListEndThreadUid()&&0<this.messageList().length&&(this.isSpamFolder()||this.isTrashFolder())},t.prototype.onBuild=function(e){var t=this,n=this;this.oContentVisible=R()(".b-content",e),this.oContentScrollable=R()(".content",this.oContentVisible),this.selector.init(this.oContentVisible,this.oContentScrollable,x.KeyState.MessageList),this.mobile&&e.on("click",function(){Object(H.leftPanelDisabled)(!0)}),e.on("click",".messageList .b-message-list-wrapper",function(){x.Focused.MessageView===W.a.focusedState()&&W.a.focusedState(x.Focused.MessageList)}).on("click",".e-pagenator .e-page",function(){n.gotoPage(_.a.dataFor(this))}).on("click",".messageList .checkboxCkeckAll",function(){t.checkAll(!t.checkAll())}).on("click",".messageList .messageListItem .flagParent",function(){n.flagMessages(_.a.dataFor(this))}).on("click",".messageList .messageListItem .threads-len",function(){n.gotoThread(_.a.dataFor(this))}).on("dblclick",".messageList .messageListItem .actionHandle",function(){n.gotoThread(_.a.dataFor(this))}),this.initUploaderForAppend(),this.initShortcuts(),!H.bMobileDevice&&k.a&&Z.capa(x.Capa.Prefetch)&&(k.a.setIdleDuration(x.Magics.ifvisibleIdle10s),k.a.idle(function(){t.prefetchNextTick()}))},t.prototype.initShortcuts=function(){var e=this;P()("enter",x.KeyState.MessageList,function(){return!e.message()||!e.useAutoSelect()||(V.a("mailbox.message-view.toggle-full-screen"),!1)}),Z.capa(x.Capa.MessageListActions)&&(P()("z",[x.KeyState.MessageList,x.KeyState.MessageView],function(){return e.archiveCommand(),!1}),P()("delete, shift+delete, shift+3",x.KeyState.MessageList,function(t,n){return!t||(0<X.a.messageListCheckedOrSelected().length&&(n&&"shift+delete"===n.shortcut?e.deleteWithoutMoveCommand():e.deleteCommand()),!1)})),Z.capa(x.Capa.Reload)&&P()("ctrl+r, command+r",[x.KeyState.FolderList,x.KeyState.MessageList,x.KeyState.MessageView],function(){return e.reloadCommand(),!1}),P()("ctrl+a, command+a",x.KeyState.MessageList,function(){return e.checkAll(!(e.checkAll()&&!e.isIncompleteChecked())),!1}),Z.capa(x.Capa.Composer)&&P()("w,c",[x.KeyState.MessageList,x.KeyState.MessageView],function(){return Object(te.showScreenPopup)(n(43)),!1}),Z.capa(x.Capa.MessageListActions)&&P()("i",[x.KeyState.MessageList,x.KeyState.MessageView],function(){return e.flagMessagesFast(),!1}),P()("t",[x.KeyState.MessageList],function(){var t=e.selectorMessageSelected();return t||(t=e.selectorMessageFocused()),t&&0<t.threadsLen()&&e.gotoThread(t),!1}),Z.capa(x.Capa.MessageListActions)&&P()("m",x.KeyState.MessageList,function(){return e.newMoveToFolder()?e.moveNewCommand():e.moveDropdownTrigger(!0),!1}),Z.capa(x.Capa.MessageListActions)&&(P()("q",[x.KeyState.MessageList,x.KeyState.MessageView],function(){return e.seenMessagesFast(!0),!1}),P()("u",[x.KeyState.MessageList,x.KeyState.MessageView],function(){return e.seenMessagesFast(!1),!1})),Z.capa(x.Capa.Composer)&&P()("shift+f",[x.KeyState.MessageList,x.KeyState.MessageView],function(){return e.multyForwardCommand(),!1}),Z.capa(x.Capa.Search)&&P()("/",[x.KeyState.MessageList,x.KeyState.MessageView],function(){return e.inputMessageListSearchFocus(!0),!1}),P()("esc",x.KeyState.MessageList,function(){return""!==e.messageListSearchDesc()?(e.cancelSearch(),!1):""===e.messageListEndThreadUid()||(e.cancelThreadUid(),!1)}),P()("tab, shift+tab, left, right",x.KeyState.MessageList,function(t,n){return t&&n&&("shift+tab"===n.shortcut||"left"===n.shortcut)?W.a.focusedState(x.Focused.FolderList):e.message()&&W.a.focusedState(x.Focused.MessageView),!1}),P()("ctrl+left, command+left",x.KeyState.MessageView,B.noopFalse),P()("ctrl+right, command+right",x.KeyState.MessageView,B.noopFalse)},t.prototype.prefetchNextTick=function(){var e=this;if(k.a&&!this.bPrefetch&&!k.a.now()&&this.viewModelVisibility()){var t=j.a.find(this.messageList(),function(e){return e&&!Object(q.m)(e.folderFullNameRaw,e.uid)});t&&(this.bPrefetch=!0,Object(q.b)(t.folderFullNameRaw,t.uid),Q.a.message(function(t,n){var o=!(x.StorageResultType.Success!==t||!n||!n.Result);j.a.delay(function(){e.bPrefetch=!1,o&&e.prefetchNextTick()},x.Magics.Time1s)},t.folderFullNameRaw,t.uid))}},t.prototype.advancedSearchClick=function(){Z.capa(x.Capa.SearchAdv)&&Object(te.showScreenPopup)(n(240),[this.mainMessageListSearch()])},t.prototype.quotaTooltip=function(){return Object(z.i18n)("MESSAGE_LIST/QUOTA_SIZE",{SIZE:Object(B.friendlySize)(this.userUsageSize()),PROC:this.userUsageProc(),LIMIT:Object(B.friendlySize)(this.userQuota())})},t.prototype.initUploaderForAppend=function(){var e=this;if(!Z.appSettingsGet("allowAppendMessage")||!this.dragOverArea())return!1;var t=new M.a({action:Object(G.b)(),name:"AppendFile",queueSize:1,multipleSizeLimit:1,hidden:{Folder:function(){return J.a.currentFolderFullNameRaw()}},dragAndDropElement:this.dragOverArea(),dragAndDropBodyElement:this.dragOverBodyArea()});return this.dragOver.subscribe(function(t){t&&e.selector.scrollToTop()}),t.on("onDragEnter",function(){e.dragOverEnter(!0)}).on("onDragLeave",function(){e.dragOverEnter(!1)}).on("onBodyDragEnter",function(){e.dragOver(!0)}).on("onBodyDragLeave",function(){e.dragOver(!1)}).on("onSelect",function(e,t){return!(!e||!t||"message/rfc822"!==t.Type)&&(X.a.messageListLoading(!0),!0)}).on("onComplete",function(){Object(ee.a)().reloadMessageList(!0,!0)}),!!t},t}(ne.a),o(b.prototype,"clearCommand",[a],y()(b.prototype,"clearCommand"),b.prototype),o(b.prototype,"reloadCommand",[r],y()(b.prototype,"reloadCommand"),b.prototype),o(b.prototype,"multyForwardCommand",[s],y()(b.prototype,"multyForwardCommand"),b.prototype),o(b.prototype,"deleteWithoutMoveCommand",[c],y()(b.prototype,"deleteWithoutMoveCommand"),b.prototype),o(b.prototype,"deleteCommand",[l],y()(b.prototype,"deleteCommand"),b.prototype),o(b.prototype,"archiveCommand",[u],y()(b.prototype,"archiveCommand"),b.prototype),o(b.prototype,"spamCommand",[d],y()(b.prototype,"spamCommand"),b.prototype),o(b.prototype,"notSpamCommand",[p],y()(b.prototype,"notSpamCommand"),b.prototype),o(b.prototype,"moveCommand",[h],y()(b.prototype,"moveCommand"),b.prototype),o(b.prototype,"moveNewCommand",[f],y()(b.prototype,"moveNewCommand"),b.prototype),m=b))||m)},function(e,t){e.exports=window.ifvisible},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FolderClearPopupView",function(){return C}),n.d(t,"default",function(){return C});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(2),b=n(3),g=n(8),y=n(27),v=n(45),S=n(17),O=n(16),w=n(9),T=n(13),C=(o=Object(w.popup)({name:"View/Popup/FolderClear",templateID:"PopupsFolderClear"}),i=Object(w.command)(function(e){var t=e.selectedFolder();return!e.clearingProcess()&&null!==t}),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.selectedFolder=m.a.observable(null),n.clearingProcess=m.a.observable(!1),n.clearingError=m.a.observable(""),n.folderFullNameForClear=m.a.computed(function(){var e=n.selectedFolder();return e?e.printableFullName():""}),n.folderNameForClear=m.a.computed(function(){var e=n.selectedFolder();return e?e.localName():""}),n.dangerDescHtml=m.a.computed(function(){return Object(g.i18n)("POPUPS_CLEAR_FOLDER/DANGER_DESC_HTML_1",{FOLDER:n.folderNameForClear()})}),n}return f()(t,e),t.prototype.clearCommand=function(){var e=this,t=this.selectedFolder();t&&(v.a.message(null),v.a.messageList([]),this.clearingProcess(!0),t.messageCountAll(0),t.messageCountUnread(0),Object(y.q)(t.fullNameRaw,""),S.a.folderClear(function(t,n){e.clearingProcess(!1),b.StorageResultType.Success===t&&n&&n.Result?(Object(O.a)().reloadMessageList(!0),e.cancelCommand()):n&&n.ErrorCode?e.clearingError(Object(g.getNotification)(n.ErrorCode)):e.clearingError(Object(g.getNotification)(b.Notification.MailServerError))},t.fullNameRaw))},t.prototype.clearPopup=function(){this.clearingProcess(!1),this.selectedFolder(null)},t.prototype.onShow=function(e){this.clearPopup(),e&&this.selectedFolder(e)},t}(T.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"clearCommand",[i],c()(r.prototype,"clearCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AdvancedSearchPopupView",function(){return C}),n.d(t,"default",function(){return C});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(6),b=n.n(m),g=n(2),y=n(1),v=n(8),S=n(40),O=n(45),w=n(9),T=n(13),C=(o=Object(w.popup)({name:"View/Popup/AdvancedSearch",templateID:"PopupsAdvancedSearch"}),i=Object(w.command)(),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.fromFocus=g.a.observable(!1),n.from=g.a.observable(""),n.to=g.a.observable(""),n.subject=g.a.observable(""),n.text=g.a.observable(""),n.selectedDateValue=g.a.observable(-1),n.hasAttachment=g.a.observable(!1),n.starred=g.a.observable(!1),n.unseen=g.a.observable(!1),n.selectedDates=g.a.computed(function(){return Object(v.trigger)(),[{id:-1,name:Object(v.i18n)("SEARCH/LABEL_ADV_DATE_ALL")},{id:3,name:Object(v.i18n)("SEARCH/LABEL_ADV_DATE_3_DAYS")},{id:7,name:Object(v.i18n)("SEARCH/LABEL_ADV_DATE_7_DAYS")},{id:30,name:Object(v.i18n)("SEARCH/LABEL_ADV_DATE_MONTH")},{id:90,name:Object(v.i18n)("SEARCH/LABEL_ADV_DATE_3_MONTHS")},{id:180,name:Object(v.i18n)("SEARCH/LABEL_ADV_DATE_6_MONTHS")},{id:365,name:Object(v.i18n)("SEARCH/LABEL_ADV_DATE_YEAR")}]}),n}return f()(t,e),t.prototype.searchCommand=function(){var e=this.buildSearchString();""!==e&&O.a.mainMessageListSearch(e),this.cancelCommand()},t.prototype.parseSearchStringValue=function(e){var t=this,n=(e||"").split(/[\s]+/g);b.a.each(n,function(e){switch(e){case"has:attachment":t.hasAttachment(!0);break;case"is:unseen,flagged":t.starred(!0);case"is:unseen":t.unseen(!0)}})},t.prototype.buildSearchStringValue=function(e){return-1<e.indexOf(" ")&&(e='"'+e+'"'),e},t.prototype.buildSearchString=function(){var e=[],t=Object(y.trim)(this.from()),n=Object(y.trim)(this.to()),o=Object(y.trim)(this.subject()),i=Object(y.trim)(this.text()),a=[],r=[];return t&&""!==t&&e.push("from:"+this.buildSearchStringValue(t)),n&&""!==n&&e.push("to:"+this.buildSearchStringValue(n)),o&&""!==o&&e.push("subject:"+this.buildSearchStringValue(o)),this.hasAttachment()&&r.push("attachment"),this.unseen()&&a.push("unseen"),this.starred()&&a.push("flagged"),0<r.length&&e.push("has:"+r.join(",")),0<a.length&&e.push("is:"+a.join(",")),-1<this.selectedDateValue()&&e.push("date:"+Object(S.searchSubtractFormatDateHelper)(this.selectedDateValue())+"/"),i&&""!==i&&e.push("text:"+this.buildSearchStringValue(i)),Object(y.trim)(e.join(" "))},t.prototype.clearPopup=function(){this.from(""),this.to(""),this.subject(""),this.text(""),this.selectedDateValue(-1),this.hasAttachment(!1),this.starred(!1),this.unseen(!1),this.fromFocus(!0)},t.prototype.onShow=function(e){this.clearPopup(),this.parseSearchStringValue(e)},t.prototype.onShowWithDelay=function(){this.fromFocus(!0)},t}(T.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"searchCommand",[i],c()(r.prototype,"searchCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";function o(e,t,n,o,i){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}n.d(t,"a",function(){return X});var i,a,r,s,c,l,u,d,p=n(15),h=n.n(p),f=n(0),m=n.n(f),b=n(4),g=n.n(b),y=n(5),v=n.n(y),S=n(11),O=n.n(S),w=n(6),T=n.n(w),C=n(12),A=n.n(C),E=n(2),F=n(19),j=n.n(F),N=n(20),R=n(3),_=n(7),I=n(1),P=n(146),L=n(37),M=n(8),D=n(14),k=n(27),x=n(56),U=n(34),H=n(41),B=n(47),G=n(38),K=n(45),V=n(93),z=n(10),q=n(17),W=n(94),Y=n(16),$=n(9),J=n(13),X=(i=Object($.view)({name:"View/User/MailBox/MessageView",type:$.ViewType.Right,templateID:"MailMessageView"}),a=Object($.command)(),r=Object($.command)(function(e){return e.messageVisibility()}),s=Object($.command)(function(e){return e.messageVisibility()}),c=Object($.command)(function(e){return!e.messageListAndMessageViewLoading()}),l=Object($.command)(function(e){return!e.messageListAndMessageViewLoading()}),i((d=function(e){function t(){m()(this,t);var n=g()(this,e.call(this)),o="",i=function(e){return Object($.createCommand)(function(){n.lastReplyAction(e),n.replyOrforward(e)},n.canBeRepliedOrForwarded)},a=function(e,t){return Object($.createCommand)(function(){var o=n.message();o&&n.allowMessageListActions&&(n.message(null),Object(Y.a)().deleteMessagesFromFolder(e,o.folderFullNameRaw,[o.uid],t))},n.messageVisibility)};return n.oDom=null,n.oHeaderDom=null,n.oMessageScrollerDom=null,n.bodyBackgroundColor=E.a.observable(""),n.pswp=null,n.moveAction=_.moveAction,n.allowComposer=!!z.capa(R.Capa.Composer),n.allowMessageActions=!!z.capa(R.Capa.MessageActions),n.allowMessageListActions=!!z.capa(R.Capa.MessageListActions),n.logoImg=Object(I.trim)(z.settingsGet("UserLogoMessage")),n.logoIframe=Object(I.trim)(z.settingsGet("UserIframeMessage")),n.mobile=!!z.appSettingsGet("mobile"),n.attachmentsActions=U.a.attachmentsActions,n.message=K.a.message,n.messageListChecked=K.a.messageListChecked,n.hasCheckedMessages=K.a.hasCheckedMessages,n.messageListCheckedOrSelectedUidsWithSubMails=K.a.messageListCheckedOrSelectedUidsWithSubMails,n.messageLoadingThrottle=K.a.messageLoadingThrottle,n.messagesBodiesDom=K.a.messagesBodiesDom,n.useThreads=H.a.useThreads,n.replySameFolder=H.a.replySameFolder,n.layout=H.a.layout,n.usePreviewPane=H.a.usePreviewPane,n.isMessageSelected=K.a.isMessageSelected,n.messageActiveDom=K.a.messageActiveDom,n.messageError=K.a.messageError,n.fullScreenMode=K.a.messageFullScreenMode,n.messageListOfThreadsLoading=E.a.observable(!1).extend({rateLimit:1}),n.highlightUnselectedAttachments=E.a.observable(!1).extend({falseTimeout:2e3}),n.showAttachmnetControls=E.a.observable(!1),n.showAttachmnetControlsState=function(e){V.b(R.ClientSideKeyName.MessageAttachmnetControls,!!e)},n.allowAttachmnetControls=E.a.computed(function(){return 0<n.attachmentsActions().length&&z.capa(R.Capa.AttachmentsActions)}),n.downloadAsZipAllowed=E.a.computed(function(){return-1<Object(I.inArray)("zip",n.attachmentsActions())&&n.allowAttachmnetControls()}),n.downloadAsZipLoading=E.a.observable(!1),n.downloadAsZipError=E.a.observable(!1).extend({falseTimeout:7e3}),n.saveToOwnCloudAllowed=E.a.computed(function(){return-1<Object(I.inArray)("owncloud",n.attachmentsActions())&&n.allowAttachmnetControls()}),n.saveToOwnCloudLoading=E.a.observable(!1),n.saveToOwnCloudSuccess=E.a.observable(!1).extend({falseTimeout:2e3}),n.saveToOwnCloudError=E.a.observable(!1).extend({falseTimeout:7e3}),n.saveToOwnCloudSuccess.subscribe(function(e){e&&n.saveToOwnCloudError(!1)}),n.saveToOwnCloudError.subscribe(function(e){e&&n.saveToOwnCloudSuccess(!1)}),n.saveToDropboxAllowed=E.a.computed(function(){return-1<Object(I.inArray)("dropbox",n.attachmentsActions())&&n.allowAttachmnetControls()}),n.saveToDropboxLoading=E.a.observable(!1),n.saveToDropboxSuccess=E.a.observable(!1).extend({falseTimeout:2e3}),n.saveToDropboxError=E.a.observable(!1).extend({falseTimeout:7e3}),n.saveToDropboxSuccess.subscribe(function(e){e&&n.saveToDropboxError(!1)}),n.saveToDropboxError.subscribe(function(e){e&&n.saveToDropboxSuccess(!1)}),n.showAttachmnetControls.subscribe(function(e){n.message()&&T.a.each(n.message().attachments(),function(t){t&&t.checked(!!e)})}),n.lastReplyAction_=E.a.observable(""),n.lastReplyAction=E.a.computed({read:n.lastReplyAction_,write:function(e){n.lastReplyAction_(-1===Object(I.inArray)(e,[R.ComposeType.Reply,R.ComposeType.ReplyAll,R.ComposeType.Forward])?R.ComposeType.Reply:e)}}),n.lastReplyAction(V.a(R.ClientSideKeyName.LastReplyAction)||R.ComposeType.Reply),n.lastReplyAction_.subscribe(function(e){V.b(R.ClientSideKeyName.LastReplyAction,e)}),n.showFullInfo=E.a.observable("1"===V.a(R.ClientSideKeyName.MessageHeaderFullInfo)),n.moreDropdownTrigger=E.a.observable(!1),n.messageDomFocused=E.a.observable(!1).extend({rateLimit:0}),n.messageVisibility=E.a.computed(function(){return!n.messageLoadingThrottle()&&!!n.message()}),n.message.subscribe(function(e){e||K.a.selectorMessageSelected(null)}),n.canBeRepliedOrForwarded=E.a.computed(function(){var e=n.messageVisibility();return!n.isDraftFolder()&&e}),n.replyCommand=i(R.ComposeType.Reply),n.replyAllCommand=i(R.ComposeType.ReplyAll),n.forwardCommand=i(R.ComposeType.Forward),n.forwardAsAttachmentCommand=i(R.ComposeType.ForwardAsAttachment),n.editAsNewCommand=i(R.ComposeType.EditAsNew),n.deleteCommand=a(R.FolderType.Trash,!0),n.deleteWithoutMoveCommand=a(R.FolderType.Trash,!1),n.archiveCommand=a(R.FolderType.Archive,!0),n.spamCommand=a(R.FolderType.Spam,!0),n.notSpamCommand=a(R.FolderType.NotSpam,!0),n.dropboxEnabled=x.a.dropbox.enabled,n.dropboxApiKey=x.a.dropbox.apiKey,n.viewBodyTopValue=E.a.observable(0),n.viewFolder="",n.viewUid="",n.viewHash="",n.viewSubject=E.a.observable(""),n.viewFromShort=E.a.observable(""),n.viewFromDkimData=E.a.observable(["none",""]),n.viewToShort=E.a.observable(""),n.viewFrom=E.a.observable(""),n.viewTo=E.a.observable(""),n.viewCc=E.a.observable(""),n.viewBcc=E.a.observable(""),n.viewReplyTo=E.a.observable(""),n.viewTimeStamp=E.a.observable(0),n.viewSize=E.a.observable(""),n.viewLineAsCss=E.a.observable(""),n.viewViewLink=E.a.observable(""),n.viewUnsubscribeLink=E.a.observable(""),n.viewDownloadLink=E.a.observable(""),n.viewUserPic=E.a.observable(N.f),n.viewUserPicVisible=E.a.observable(!1),n.viewIsImportant=E.a.observable(!1),n.viewIsFlagged=E.a.observable(!1),n.viewFromDkimVisibility=E.a.computed(function(){return"none"!==n.viewFromDkimData()[0]}),n.viewFromDkimStatusIconClass=E.a.computed(function(){switch(n.viewFromDkimData()[0]){case"none":return"icon-none iconcolor-display-none";case"pass":return"icon-ok iconcolor-green";default:return"icon-warning-alt iconcolor-red"}}),n.viewFromDkimStatusTitle=E.a.computed(function(){var e=n.viewFromDkimData();if(Object(I.isNonEmptyArray)(e)){if(e[0]&&e[1])return e[1];if(e[0])return"DKIM: "+e[0]}return""}),n.messageActiveDom.subscribe(function(e){n.bodyBackgroundColor(e?n.detectDomBackgroundColor(e):"")},n),n.message.subscribe(function(e){n.messageActiveDom(null),e?(n.showAttachmnetControls(!1),V.a(R.ClientSideKeyName.MessageAttachmnetControls)&&T.a.delay(function(){n.showAttachmnetControls(!0)},R.Magics.Time50ms),n.viewHash!==e.hash&&n.scrollMessageToTop(),n.viewFolder=e.folderFullNameRaw,n.viewUid=e.uid,n.viewHash=e.hash,n.viewSubject(e.subject()),n.viewFromShort(e.fromToLine(!0,!0)),n.viewFromDkimData(e.fromDkimData()),n.viewToShort(e.toToLine(!0,!0)),n.viewFrom(e.fromToLine(!1)),n.viewTo(e.toToLine(!1)),n.viewCc(e.ccToLine(!1)),n.viewBcc(e.bccToLine(!1)),n.viewReplyTo(e.replyToToLine(!1)),n.viewTimeStamp(e.dateTimeStampInUTC()),n.viewSize(e.friendlySize()),n.viewLineAsCss(e.lineAsCss()),n.viewViewLink(e.viewLink()),n.viewUnsubscribeLink(e.getFirstUnsubsribeLink()),n.viewDownloadLink(e.downloadLink()),n.viewIsImportant(e.isImportant()),n.viewIsFlagged(e.flagged()),o=e.fromAsSingleEmail(),Object(k.k)(o,function(e,t){e!==n.viewUserPic()&&o===t&&(n.viewUserPicVisible(!1),n.viewUserPic(N.f),""!==e&&(n.viewUserPicVisible(!0),n.viewUserPic(e)))})):(n.viewFolder="",n.viewUid="",n.viewHash="",n.scrollMessageToTop())}),n.message.viewTrigger.subscribe(function(){var e=n.message();e?n.viewIsFlagged(e.flagged()):n.viewIsFlagged(!1)}),n.fullScreenMode.subscribe(function(e){_.$html.toggleClass("rl-message-fullscreen",e),Object(I.windowResize)()}),n.messageLoadingThrottle.subscribe(I.windowResizeCallback),n.messageFocused=E.a.computed(function(){return R.Focused.MessageView===U.a.focusedState()}),n.messageListAndMessageViewLoading=E.a.computed(function(){return K.a.messageListCompleteLoadingThrottle()||K.a.messageLoadingThrottle()}),L.b("mailbox.message-view.toggle-full-screen",function(){n.toggleFullScreen()}),n.attachmentPreview=T.a.bind(n.attachmentPreview,n),n}return v()(t,e),t.prototype.closeMessageCommand=function(){K.a.message(null)},t.prototype.messageVisibilityCommand=function(){},t.prototype.messageEditCommand=function(){this.editMessage()},t.prototype.goUpCommand=function(){L.a("mailbox.message-list.selector.go-up",[R.Layout.NoPreview!==this.layout()||!!this.message()])},t.prototype.goDownCommand=function(){L.a("mailbox.message-list.selector.go-down",[R.Layout.NoPreview!==this.layout()||!!this.message()])},t.prototype.detectDomBackgroundColor=function(e){var t=5,n="";if(e&&1===e.length){for(var o=e;""===n&&!(0>=(t-=1))&&(o=function(e){var t=e?e.children():null;return t&&1===t.length&&t.is("table,div,center")?t:null}(o));)n=function(e){var t="";return e&&(t=e.css("background-color")||"",e.is("table")||(t=Object(I.isTransparent)(t)?"":t)),t}(o);n=Object(I.isTransparent)(n)?"":n}return n},t.prototype.fullScreen=function(){this.fullScreenMode(!0),Object(I.windowResize)()},t.prototype.unFullScreen=function(){this.fullScreenMode(!1),Object(I.windowResize)()},t.prototype.toggleFullScreen=function(){Object(I.removeSelection)(),this.fullScreenMode(!this.fullScreenMode()),Object(I.windowResize)()},t.prototype.replyOrforward=function(e){z.capa(R.Capa.Composer)&&Object($.showScreenPopup)(n(43),[e,K.a.message()])},t.prototype.checkHeaderHeight=function(){this.oHeaderDom&&this.viewBodyTopValue(this.message()?this.oHeaderDom.height()+R.Magics.Size20px+R.Magics.Size1px:0)},t.prototype.attachmentPreview=function(e){if(e&&e.isImage()&&!e.isLinked&&this.message()&&this.message().attachments()){var t=0,n=0,o=A()("<div>"),i=T.a.compact(T.a.map(this.message().attachments(),function(o){return o&&!o.isLinked&&o.isImage()?(o===e&&(t=n),n+=1,{src:o.linkPreview(),thumb:o.linkThumbnail(),subHtml:o.fileName,downloadUrl:o.linkPreview()}):null}));return 0<i.length&&(o.on("onBeforeOpen.lg",function(){Object(_.useKeyboardShortcuts)(!1),Object(I.removeInFocus)(!0)}),o.on("onCloseAfter.lg",function(){Object(_.useKeyboardShortcuts)(!0)}),o.lightGallery({dynamic:!0,loadYoutubeThumbnail:!1,loadVimeoThumbnail:!1,thumbWidth:80,thumbContHeight:95,showThumbByDefault:!1,mode:"lg-lollipop",index:t,dynamicEl:i})),!1}return!0},t.prototype.onBuild=function(e){var t=this,o=this,i=T.a.bind(this.checkHeaderHeight,this);this.oDom=e,this.fullScreenMode.subscribe(function(e){e&&t.message()&&U.a.focusedState(R.Focused.MessageView)}),this.showAttachmnetControls.subscribe(i),this.fullScreenMode.subscribe(i),this.showFullInfo.subscribe(i),this.message.subscribe(i),L.b("window.resize",T.a.throttle(function(){T.a.delay(i,1),T.a.delay(i,R.Magics.Time200ms),T.a.delay(i,R.Magics.Time500ms)},R.Magics.Time50ms)),this.showFullInfo.subscribe(function(e){Object(I.windowResize)(),Object(I.windowResize)(R.Magics.Time200ms),V.b(R.ClientSideKeyName.MessageHeaderFullInfo,e?"1":"0")}),x.a.appendDropbox(),this.oHeaderDom=A()(".messageItemHeader",e),this.oHeaderDom=this.oHeaderDom[0]?this.oHeaderDom:null,this.mobile&&e.on("click",function(){Object(_.leftPanelDisabled)(!0)}),e.on("click","a",function(e){return!(e&&R.Magics.EventWhichMouseMiddle!==e.which&&Object(I.mailToHelper)(A()(this).attr("href"),z.capa(R.Capa.Composer)?n(43):null))}).on("click",".attachmentsPlace .attachmentIconParent",function(e){e&&e.stopPropagation&&e.stopPropagation()}).on("click",".attachmentsPlace .showPreplay",function(e){e&&e.stopPropagation&&e.stopPropagation();var t=E.a.dataFor(this);if(t&&P.a.supported)switch(!0){case P.a.supportedMp3&&t.isMp3():P.a.playMp3(t.linkDownload(),t.fileName);break;case P.a.supportedOgg&&t.isOgg():P.a.playOgg(t.linkDownload(),t.fileName);break;case P.a.supportedWav&&t.isWav():P.a.playWav(t.linkDownload(),t.fileName)}}).on("click",".attachmentsPlace .attachmentItem .attachmentNameParent",function(){var e=E.a.dataFor(this);e&&e.download&&Object(Y.a)().download(e.linkDownload())}).on("click",".messageItemHeader .subjectParent .flagParent",function(){var e=o.message();e&&Object(Y.a)().messageListAction(e.folderFullNameRaw,e.flagged()?R.MessageSetAction.UnsetFlag:R.MessageSetAction.SetFlag,[e])}).on("click",".thread-list .flagParent",function(){var e=E.a.dataFor(this);return e&&e.folder&&e.uid&&Object(Y.a)().messageListAction(e.folder,e.flagged()?R.MessageSetAction.UnsetFlag:R.MessageSetAction.SetFlag,[e]),o.threadsDropdownTrigger(!0),!1}),U.a.focusedState.subscribe(function(e){R.Focused.MessageView!==e&&(t.scrollMessageToTop(),t.scrollMessageToLeft())}),_.keyScopeReal.subscribe(function(e){t.messageDomFocused(R.KeyState.MessageView===e&&!Object(I.inFocus)())}),this.oMessageScrollerDom=e.find(".messageItem .content"),this.oMessageScrollerDom=this.oMessageScrollerDom&&this.oMessageScrollerDom[0]?this.oMessageScrollerDom:null,this.initShortcuts()},t.prototype.escShortcuts=function(){return!this.viewModelVisibility()||!this.message()||(this.fullScreenMode()?(this.fullScreenMode(!1),R.Layout.NoPreview!==this.layout()&&U.a.focusedState(R.Focused.MessageList)):R.Layout.NoPreview===this.layout()?this.message(null):U.a.focusedState(R.Focused.MessageList),!1)},t.prototype.initShortcuts=function(){var e=this;j()("esc, backspace",R.KeyState.MessageView,T.a.bind(this.escShortcuts,this)),j()("enter",R.KeyState.MessageView,function(){return e.toggleFullScreen(),!1}),j()("r",[R.KeyState.MessageList,R.KeyState.MessageView],function(){return!K.a.message()||(e.replyCommand(),!1)}),j()("a",[R.KeyState.MessageList,R.KeyState.MessageView],function(){return!K.a.message()||(e.replyAllCommand(),!1)}),j()("f",[R.KeyState.MessageList,R.KeyState.MessageView],function(){return!K.a.message()||(e.forwardCommand(),!1)}),j()("ctrl+i, command+i",[R.KeyState.MessageList,R.KeyState.MessageView],function(){return K.a.message()&&e.showFullInfo(!e.showFullInfo()),!1}),j()("b",[R.KeyState.MessageList,R.KeyState.MessageView],function(){return!K.a.message()||!K.a.message().body||(K.a.message().body.find(".rlBlockquoteSwitcher").click(),!1)}),j()("ctrl+up, command+up, ctrl+left, command+left",[R.KeyState.MessageList,R.KeyState.MessageView],function(){return e.goUpCommand(),!1}),j()("ctrl+down, command+down, ctrl+right, command+right",[R.KeyState.MessageList,R.KeyState.MessageView],function(){return e.goDownCommand(),!1}),j()("ctrl+p, command+p",[R.KeyState.MessageView,R.KeyState.MessageList],function(){return e.message()&&e.message().printMessage(),!1}),j()("delete, shift+delete",R.KeyState.MessageView,function(t,n){return!t||(n&&"shift+delete"===n.shortcut?e.deleteWithoutMoveCommand():e.deleteCommand(),!1)}),j()("tab, shift+tab, left",R.KeyState.MessageView,function(t,n){if(!e.fullScreenMode()&&e.message()&&R.Layout.NoPreview!==e.layout())if(t&&n&&"left"===n.shortcut){if(e.oMessageScrollerDom&&0<e.oMessageScrollerDom.scrollLeft())return!0;U.a.focusedState(R.Focused.MessageList)}else U.a.focusedState(R.Focused.MessageList);else if(e.message()&&R.Layout.NoPreview===e.layout()&&t&&n&&"left"===n.shortcut)return!0;return!1})},t.prototype.isDraftFolder=function(){return K.a.message()&&G.a.draftFolder()===K.a.message().folderFullNameRaw},t.prototype.isSentFolder=function(){return K.a.message()&&G.a.sentFolder()===K.a.message().folderFullNameRaw},t.prototype.isSpamFolder=function(){return K.a.message()&&G.a.spamFolder()===K.a.message().folderFullNameRaw},t.prototype.isSpamDisabled=function(){return K.a.message()&&G.a.spamFolder()===N.r},t.prototype.isArchiveFolder=function(){return K.a.message()&&G.a.archiveFolder()===K.a.message().folderFullNameRaw},t.prototype.isArchiveDisabled=function(){return K.a.message()&&G.a.archiveFolder()===N.r},t.prototype.isDraftOrSentFolder=function(){return this.isDraftFolder()||this.isSentFolder()},t.prototype.composeClick=function(){z.capa(R.Capa.Composer)&&Object($.showScreenPopup)(n(43))},t.prototype.editMessage=function(){z.capa(R.Capa.Composer)&&K.a.message()&&Object($.showScreenPopup)(n(43),[R.ComposeType.Draft,K.a.message()])},t.prototype.scrollMessageToTop=function(){this.oMessageScrollerDom&&(R.Magics.Size50px<this.oMessageScrollerDom.scrollTop()?this.oMessageScrollerDom.scrollTop(R.Magics.Size50px).animate({scrollTop:0},R.Magics.Time200ms):this.oMessageScrollerDom.scrollTop(0),Object(I.windowResize)())},t.prototype.scrollMessageToLeft=function(){this.oMessageScrollerDom&&(this.oMessageScrollerDom.scrollLeft(0),Object(I.windowResize)())},t.prototype.getAttachmentsHashes=function(){var e=this.message()?this.message().attachments():[];return T.a.compact(T.a.map(e,function(e){return e&&!e.isLinked&&e.checked()?e.download:""}))},t.prototype.downloadAsZip=function(){var e=this,t=this.getAttachmentsHashes();0<t.length?W.a.attachmentsActions("Zip",t,this.downloadAsZipLoading).then(function(t){t&&t.Result&&t.Result.Files&&t.Result.Files[0]&&t.Result.Files[0].Hash?Object(Y.a)().download(Object(D.c)(t.Result.Files[0].Hash)):e.downloadAsZipError(!0)}).catch(function(){e.downloadAsZipError(!0)}):this.highlightUnselectedAttachments(!0)},t.prototype.saveToOwnCloud=function(){var e=this,t=this.getAttachmentsHashes();0<t.length?W.a.attachmentsActions("OwnCloud",t,this.saveToOwnCloudLoading).then(function(t){t&&t.Result?e.saveToOwnCloudSuccess(!0):e.saveToOwnCloudError(!0)}).catch(function(){e.saveToOwnCloudError(!0)}):this.highlightUnselectedAttachments(!0)},t.prototype.saveToDropbox=function(){var e=this,t=[],n=this.getAttachmentsHashes();0<n.length?O.a.Dropbox&&W.a.attachmentsActions("Dropbox",n,this.saveToDropboxLoading).then(function(n){n&&n.Result&&n.Result.Url&&n.Result.ShortLife&&n.Result.Files&&(O.a.Dropbox&&Object(I.isArray)(n.Result.Files)?(T.a.each(n.Result.Files,function(e){t.push({url:n.Result.Url+Object(D.c)(e.Hash,n.Result.ShortLife),filename:e.FileName})}),O.a.Dropbox.save({files:t,progress:function(){e.saveToDropboxLoading(!0),e.saveToDropboxError(!1),e.saveToDropboxSuccess(!1)},cancel:function(){e.saveToDropboxSuccess(!1),e.saveToDropboxError(!1),e.saveToDropboxLoading(!1)},success:function(){e.saveToDropboxSuccess(!0),e.saveToDropboxLoading(!1)},error:function(){e.saveToDropboxError(!0),e.saveToDropboxLoading(!1)}})):e.saveToDropboxError(!0))}).catch(function(){e.saveToDropboxError(!0)}):this.highlightUnselectedAttachments(!0)},t.prototype.showImages=function(e){e&&e.showExternalImages&&e.showExternalImages(!0),this.checkHeaderHeight()},t.prototype.printableCheckedMessageCount=function(){var e=this.messageListCheckedOrSelectedUidsWithSubMails().length;return 0<e?100>e?e:"99+":""},t.prototype.readReceipt=function(e){e&&""!==e.readReceipt()&&(q.a.sendReadReceiptMessage(I.noop,e.folderFullNameRaw,e.uid,e.readReceipt(),Object(M.i18n)("READ_RECEIPT/SUBJECT",{SUBJECT:e.subject()}),Object(M.i18n)("READ_RECEIPT/BODY",{"READ-RECEIPT":B.a.email()})),e.isReadReceipt(!0),Object(k.u)(e),Object(Y.a)().reloadFlagsCurrentMessageListAndMessageFromCache()),this.checkHeaderHeight()},t}(J.a),o(d.prototype,"closeMessageCommand",[a],h()(d.prototype,"closeMessageCommand"),d.prototype),o(d.prototype,"messageVisibilityCommand",[r],h()(d.prototype,"messageVisibilityCommand"),d.prototype),o(d.prototype,"messageEditCommand",[s],h()(d.prototype,"messageEditCommand"),d.prototype),o(d.prototype,"goUpCommand",[c],h()(d.prototype,"goUpCommand"),d.prototype),o(d.prototype,"goDownCommand",[l],h()(d.prototype,"goDownCommand"),d.prototype),u=d))||u)},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(3),u=n(7),d=n(33),p=n(8),h=n(34),f=n(47),m=n(10),b=n(9),g=n(150),y=n(243),v=n(244),S=n(245),O=n(246),w=n(249),T=n(252),C=n(253),A=n(254),E=n(255),F=n(256),j=n(257),N=n(261),R=n(262),_=n(263),I=n(16),P=function(e){function t(){i()(this,t);var n=r()(this,e.call(this,[N.a,R.a,_.a]));return Object(p.initOnStartOrLangChange)(function(){n.sSettingsTitle=Object(p.i18n)("TITLES/SETTINGS")},function(){n.setSettingsTitle()}),n}return c()(t,e),t.prototype.setupSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return m.capa(l.Capa.Settings)?(Object(b.addSettingsViewModel)(y.a,"SettingsGeneral","SETTINGS_LABELS/LABEL_GENERAL_NAME","general",!0),h.a.contactsIsAllowed()&&Object(b.addSettingsViewModel)(v.a,"SettingsContacts","SETTINGS_LABELS/LABEL_CONTACTS_NAME","contacts"),(m.capa(l.Capa.AdditionalAccounts)||m.capa(l.Capa.Identities))&&Object(b.addSettingsViewModel)(S.a,"SettingsAccounts",m.capa(l.Capa.AdditionalAccounts)?"SETTINGS_LABELS/LABEL_ACCOUNTS_NAME":"SETTINGS_LABELS/LABEL_IDENTITIES_NAME","accounts"),m.capa(l.Capa.Sieve)&&Object(b.addSettingsViewModel)(O.a,"SettingsFilters","SETTINGS_LABELS/LABEL_FILTERS_NAME","filters"),(m.capa(l.Capa.AutoLogout)||m.capa(l.Capa.TwoFactor))&&Object(b.addSettingsViewModel)(w.a,"SettingsSecurity","SETTINGS_LABELS/LABEL_SECURITY_NAME","security"),f.a.isRootAccount()&&(m.settingsGet("AllowGoogleSocial")&&m.settingsGet("AllowGoogleSocialAuth")||m.settingsGet("AllowFacebookSocial")||m.settingsGet("AllowTwitterSocial"))&&Object(b.addSettingsViewModel)(T.a,"SettingsSocial","SETTINGS_LABELS/LABEL_SOCIAL_NAME","social"),m.settingsGet("ChangePasswordIsAllowed")&&Object(b.addSettingsViewModel)(C.a,"SettingsChangePassword","SETTINGS_LABELS/LABEL_CHANGE_PASSWORD_NAME","change-password"),m.capa(l.Capa.Templates)&&Object(b.addSettingsViewModel)(A.a,"SettingsTemplates","SETTINGS_LABELS/LABEL_TEMPLATES_NAME","templates"),m.capa(l.Capa.Folders)&&Object(b.addSettingsViewModel)(E.a,"SettingsFolders","SETTINGS_LABELS/LABEL_FOLDERS_NAME","folders"),m.capa(l.Capa.Themes)&&Object(b.addSettingsViewModel)(F.a,"SettingsThemes","SETTINGS_LABELS/LABEL_THEMES_NAME","themes"),m.capa(l.Capa.OpenPGP)&&Object(b.addSettingsViewModel)(j.a,"SettingsOpenPGP","SETTINGS_LABELS/LABEL_OPEN_PGP_NAME","openpgp"),Object(d.g)(!1),e&&e(),!0):(e&&e(),!1)},t.prototype.onShow=function(){this.setSettingsTitle(),Object(u.keyScope)(l.KeyState.Settings),Object(u.leftPanelType)(""),m.appSettingsGet("mobile")&&Object(u.leftPanelDisabled)(!0)},t.prototype.setSettingsTitle=function(){var e=f.a.email();Object(I.a)().setWindowTitle((""===e?"":e+" - ")+this.sSettingsTitle)},t}(g.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n(0),i=n.n(o),a=n(6),r=n.n(a),s=n(2),c=n(20),l=n(7),u=n(3),d=n(1),p=n(8),h=n(9),f=n(34),m=n(57),b=n(41),g=n(98),y=n(145),v=n(45),S=n(17),O=function(){function e(){var t=this;i()(this,e),this.language=m.a.language,this.languages=m.a.languages,this.messagesPerPage=b.a.messagesPerPage,this.messagesPerPageArray=c.j,this.editorDefaultType=b.a.editorDefaultType,this.layout=b.a.layout,this.usePreviewPane=b.a.usePreviewPane,this.soundNotificationIsSupported=y.a.soundNotificationIsSupported,this.enableSoundNotification=y.a.enableSoundNotification,this.enableDesktopNotification=y.a.enableDesktopNotification,this.isDesktopNotificationSupported=y.a.isDesktopNotificationSupported,this.isDesktopNotificationDenied=y.a.isDesktopNotificationDenied,this.showImages=b.a.showImages,this.useCheckboxesInList=b.a.useCheckboxesInList,this.threadsAllowed=f.a.threadsAllowed,this.useThreads=b.a.useThreads,this.replySameFolder=b.a.replySameFolder,this.allowLanguagesOnSettings=f.a.allowLanguagesOnSettings,this.languageFullName=s.a.computed(function(){return Object(d.convertLangName)(t.language())}),this.languageTrigger=s.a.observable(u.SaveSettingsStep.Idle).extend({throttle:u.Magics.Time100ms}),this.mppTrigger=s.a.observable(u.SaveSettingsStep.Idle),this.editorDefaultTypeTrigger=s.a.observable(u.SaveSettingsStep.Idle),this.layoutTrigger=s.a.observable(u.SaveSettingsStep.Idle),this.isAnimationSupported=l.bAnimationSupported,this.identities=g.a.identities,this.identityMain=s.a.computed(function(){var e=t.identities();return Object(d.isArray)(e)?r.a.find(e,function(e){return e&&""===e.id()}):null}),this.identityMainDesc=s.a.computed(function(){var e=t.identityMain();return e?e.formattedName():"---"}),this.editorDefaultTypes=s.a.computed(function(){return Object(p.trigger)(),[{id:u.EditorDefaultType.Html,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_HTML")},{id:u.EditorDefaultType.Plain,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_PLAIN")},{id:u.EditorDefaultType.HtmlForced,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_HTML_FORCED")},{id:u.EditorDefaultType.PlainForced,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_PLAIN_FORCED")}]}),this.layoutTypes=s.a.computed(function(){return Object(p.trigger)(),[{id:u.Layout.NoPreview,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_NO_SPLIT")},{id:u.Layout.SidePreview,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_VERTICAL_SPLIT")},{id:u.Layout.BottomPreview,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_HORIZONTAL_SPLIT")}]})}return e.prototype.editMainIdentity=function(){var e=this.identityMain();e&&Object(h.showScreenPopup)(n(151),[e])},e.prototype.testSoundNotification=function(){y.a.playSoundNotification(!0)},e.prototype.onBuild=function(){var e=this;r.a.delay(function(){var t=Object(d.settingsSaveHelperSimpleFunction)(e.editorDefaultTypeTrigger,e),n=Object(d.settingsSaveHelperSimpleFunction)(e.mppTrigger,e),o=Object(d.settingsSaveHelperSimpleFunction)(e.layoutTrigger,e),i=function(t){return function(){e.languageTrigger(t),r.a.delay(function(){return e.languageTrigger(u.SaveSettingsStep.Idle)},u.Magics.Time1s)}};e.language.subscribe(function(t){e.languageTrigger(u.SaveSettingsStep.Animate),Object(p.reload)(!1,t).then(i(u.SaveSettingsStep.TrueResult),i(u.SaveSettingsStep.FalseResult)).then(function(){S.a.saveSettings(null,{Language:t})})}),e.editorDefaultType.subscribe(S.a.saveSettingsHelper("EditorDefaultType",null,t)),e.messagesPerPage.subscribe(S.a.saveSettingsHelper("MPP",null,n)),e.showImages.subscribe(S.a.saveSettingsHelper("ShowImages",d.boolToAjax)),e.useCheckboxesInList.subscribe(S.a.saveSettingsHelper("UseCheckboxesInList",d.boolToAjax)),e.enableDesktopNotification.subscribe(function(e){Object(d.timeOutAction)("SaveDesktopNotifications",function(){S.a.saveSettings(null,{DesktopNotifications:Object(d.boolToAjax)(e)})},u.Magics.Time3s)}),e.enableSoundNotification.subscribe(function(e){Object(d.timeOutAction)("SaveSoundNotification",function(){S.a.saveSettings(null,{SoundNotification:Object(d.boolToAjax)(e)})},u.Magics.Time3s)}),e.replySameFolder.subscribe(function(e){Object(d.timeOutAction)("SaveReplySameFolder",function(){S.a.saveSettings(null,{ReplySameFolder:Object(d.boolToAjax)(e)})},u.Magics.Time3s)}),e.useThreads.subscribe(function(e){v.a.messageList([]),S.a.saveSettings(null,{UseThreads:Object(d.boolToAjax)(e)})}),e.layout.subscribe(function(e){v.a.messageList([]),S.a.saveSettings(o,{Layout:e})})},u.Magics.Time50ms)},e.prototype.onShow=function(){this.enableDesktopNotification.valueHasMutated()},e.prototype.selectLanguage=function(){Object(h.showScreenPopup)(n(95),[this.language,this.languages(),m.a.userLanguage()])},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),i=n.n(o),a=n(2),r=n(3),s=n(1),c=n(34),l=n(147),u=n(17),d=function(){function e(){var t=this;i()(this,e),this.contactsAutosave=c.a.contactsAutosave,this.allowContactsSync=l.a.allowContactsSync,this.enableContactsSync=l.a.enableContactsSync,this.contactsSyncUrl=l.a.contactsSyncUrl,this.contactsSyncUser=l.a.contactsSyncUser,this.contactsSyncPass=l.a.contactsSyncPass,this.saveTrigger=a.a.computed(function(){return[t.enableContactsSync()?"1":"0",t.contactsSyncUrl(),t.contactsSyncUser(),t.contactsSyncPass()].join("|")}).extend({throttle:r.Magics.Time500ms})}return e.prototype.onBuild=function(){var e=this;this.contactsAutosave.subscribe(function(e){u.a.saveSettings(null,{ContactsAutosave:Object(s.boolToAjax)(e)})}),this.saveTrigger.subscribe(function(){u.a.saveContactsSyncData(null,e.enableContactsSync(),e.contactsSyncUrl(),e.contactsSyncUser(),e.contactsSyncPass())})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),i=n.n(o),a=n(11),r=n.n(a),s=n(6),c=n.n(s),l=n(2),u=n(3),d=n(14),p=n(10),h=n(47),f=n(98),m=n(17),b=n(16),g=n(9),y=function(){function e(){i()(this,e),this.allowAdditionalAccount=Object(p.capa)(u.Capa.AdditionalAccounts),this.allowIdentities=Object(p.capa)(u.Capa.Identities),this.accounts=h.a.accounts,this.identities=f.a.identities,this.accountForDeletion=l.a.observable(null).deleteAccessHelper(),this.identityForDeletion=l.a.observable(null).deleteAccessHelper()}return e.prototype.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},e.prototype.addNewAccount=function(){Object(g.showScreenPopup)(n(149))},e.prototype.editAccount=function(e){e&&e.canBeEdit()&&Object(g.showScreenPopup)(n(149),[e])},e.prototype.addNewIdentity=function(){Object(g.showScreenPopup)(n(151))},e.prototype.editIdentity=function(e){Object(g.showScreenPopup)(n(151),[e])},e.prototype.deleteAccount=function(e){e&&e.deleteAccess()&&(this.accountForDeletion(null),e&&(this.accounts.remove(function(t){return e===t}),m.a.accountDelete(function(e,t){u.StorageResultType.Success===e&&t&&t.Result&&t.Reload?(Object(g.routeOff)(),Object(g.setHash)(Object(d.w)(),!0),Object(g.routeOff)(),c.a.defer(function(){return r.a.location.reload()})):Object(b.a)().accountsAndIdentities()},e.email)))},e.prototype.deleteIdentity=function(e){e&&e.deleteAccess()&&(this.identityForDeletion(null),e&&(f.a.identities.remove(function(t){return e===t}),m.a.identityDelete(function(){Object(b.a)().accountsAndIdentities()},e.id)))},e.prototype.accountsAndIdentitiesAfterMove=function(){m.a.accountsAndIdentitiesSortOrder(null,h.a.accountsEmails.peek(),f.a.identitiesIDS.peek())},e.prototype.onBuild=function(e){var t=this;e.on("click",".accounts-list .account-item .e-action",function(){var e=l.a.dataFor(this);e&&t.editAccount(e)}).on("click",".identities-list .identity-item .e-action",function(){var e=l.a.dataFor(this);e&&t.editIdentity(e)})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o,i,a=n(15),r=n.n(a),s=n(0),c=n.n(s),l=n(6),u=n.n(l),d=n(2),p=n(1),h=n(3),f=n(8),m=n(184),b=n(17),g=n(247),y=n(9),v=(o=Object(y.command)(function(e){return e.haveChanges()}),i=function(){function e(){var t=this;c()(this,e),this.modules=m.a.modules,this.filters=m.a.filters,this.inited=d.a.observable(!1),this.serverError=d.a.observable(!1),this.serverErrorDesc=d.a.observable(""),this.haveChanges=d.a.observable(!1),this.saveErrorText=d.a.observable(""),this.filters.subscribe(p.windowResizeCallback),this.serverError.subscribe(function(e){e||t.serverErrorDesc("")},this),this.filterRaw=m.a.raw,this.filterRaw.capa=m.a.capa,this.filterRaw.active=d.a.observable(!1),this.filterRaw.allow=d.a.observable(!1),this.filterRaw.error=d.a.observable(!1),this.filterForDeletion=d.a.observable(null).deleteAccessHelper(),this.filters.subscribe(function(){t.haveChanges(!0)}),this.filterRaw.subscribe(function(){t.haveChanges(!0),t.filterRaw.error(!1)}),this.haveChanges.subscribe(function(){t.saveErrorText("")}),this.filterRaw.active.subscribe(function(){t.haveChanges(!0),t.filterRaw.error(!1)})}return e.prototype.saveChangesCommand=function(){var e=this;if(!this.filters.saving()){if(this.filterRaw.active()&&""===Object(p.trim)(this.filterRaw()))return this.filterRaw.error(!0),!1;this.filters.saving(!0),this.saveErrorText(""),b.a.filtersSave(function(t,n){e.filters.saving(!1),h.StorageResultType.Success===t&&n&&n.Result?(e.haveChanges(!1),e.updateList()):n&&n.ErrorCode?e.saveErrorText(n.ErrorMessageAdditional||Object(f.getNotification)(n.ErrorCode)):e.saveErrorText(Object(f.getNotification)(h.Notification.CantSaveFilters))},this.filters(),this.filterRaw(),this.filterRaw.active())}return!0},e.prototype.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},e.prototype.updateList=function(){var e=this;this.filters.loading()||(this.filters.loading(!0),b.a.filtersGet(function(t,n){e.filters.loading(!1),e.serverError(!1),h.StorageResultType.Success===t&&n&&n.Result&&Object(p.isArray)(n.Result.Filters)?(e.inited(!0),e.serverError(!1),e.filters(u.a.compact(u.a.map(n.Result.Filters,function(e){var t=new g.a;return t&&t.parse(e)?t:null}))),e.modules(n.Result.Modules?n.Result.Modules:{}),e.filterRaw(n.Result.Raw||""),e.filterRaw.capa(Object(p.isArray)(n.Result.Capa)?n.Result.Capa.join(" "):""),e.filterRaw.active(!!n.Result.RawIsActive),e.filterRaw.allow(!!n.Result.RawIsAllow)):(e.filters([]),e.modules({}),e.filterRaw(""),e.filterRaw.capa({}),e.serverError(!0),e.serverErrorDesc(n&&n.ErrorCode?Object(f.getNotification)(n.ErrorCode):Object(f.getNotification)(h.Notification.CantGetFilters))),e.haveChanges(!1)}))},e.prototype.deleteFilter=function(e){this.filters.remove(e),Object(p.delegateRunOnDestroy)(e)},e.prototype.addFilter=function(){var e=this,t=new g.a;t.generateID(),Object(y.showScreenPopup)(n(185),[t,function(){e.filters.push(t),e.filterRaw.active(!1)},!1])},e.prototype.editFilter=function(e){var t=this,o=e.cloneSelf();Object(y.showScreenPopup)(n(185),[o,function(){var n=t.filters(),i=n.indexOf(e);-1<i&&n[i]&&(Object(p.delegateRunOnDestroy)(n[i]),n[i]=o,t.filters(n),t.haveChanges(!0))},!0])},e.prototype.onBuild=function(e){var t=this;e.on("click",".filter-item .e-action",function(){var e=d.a.dataFor(this);e&&t.editFilter(e)})},e.prototype.onShow=function(){this.updateList()},e}(),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(i.prototype,"saveChangesCommand",[o],r()(i.prototype,"saveChangesCommand"),i.prototype),i)},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(2),p=n(3),h=n(1),f=n(8),m=n(27),b=n(47),g=n(248),y=function(e){function t(){i()(this,t);var n=r()(this,e.call(this,"FilterModel"));n.enabled=d.a.observable(!0),n.id="",n.name=d.a.observable(""),n.name.error=d.a.observable(!1),n.name.focused=d.a.observable(!1),n.conditions=d.a.observableArray([]),n.conditionsType=d.a.observable(p.FilterRulesType.Any),n.actionValue=d.a.observable(""),n.actionValue.error=d.a.observable(!1),n.actionValueSecond=d.a.observable(""),n.actionValueThird=d.a.observable(""),n.actionValueFourth=d.a.observable(""),n.actionValueFourth.error=d.a.observable(!1),n.actionMarkAsRead=d.a.observable(!1),n.actionKeep=d.a.observable(!0),n.actionNoStop=d.a.observable(!1),n.actionType=d.a.observable(p.FiltersAction.MoveTo),n.actionType.subscribe(function(){n.actionValue(""),n.actionValue.error(!1),n.actionValueSecond(""),n.actionValueThird(""),n.actionValueFourth(""),n.actionValueFourth.error(!1)});var o=function(e){var t=Object(m.e)(e);return t?t.fullName.replace("."===t.delimiter?/\./:/[\\\/]+/," / "):e};return n.nameSub=d.a.computed(function(){var e="",t=n.actionValue();switch(n.actionType()){case p.FiltersAction.MoveTo:e=Object(f.i18n)("SETTINGS_FILTERS/SUBNAME_MOVE_TO",{FOLDER:o(t)});break;case p.FiltersAction.Forward:e=Object(f.i18n)("SETTINGS_FILTERS/SUBNAME_FORWARD_TO",{EMAIL:t});break;case p.FiltersAction.Vacation:e=Object(f.i18n)("SETTINGS_FILTERS/SUBNAME_VACATION_MESSAGE");break;case p.FiltersAction.Reject:e=Object(f.i18n)("SETTINGS_FILTERS/SUBNAME_REJECT");break;case p.FiltersAction.Discard:e=Object(f.i18n)("SETTINGS_FILTERS/SUBNAME_DISCARD")}return e?"("+e+")":""}),n.actionTemplate=d.a.computed(function(){var e="";switch(n.actionType()){case p.FiltersAction.Forward:e="SettingsFiltersActionForward";break;case p.FiltersAction.Vacation:e="SettingsFiltersActionVacation";break;case p.FiltersAction.Reject:e="SettingsFiltersActionReject";break;case p.FiltersAction.None:e="SettingsFiltersActionNone";break;case p.FiltersAction.Discard:e="SettingsFiltersActionDiscard";break;case p.FiltersAction.MoveTo:default:e="SettingsFiltersActionMoveToFolder"}return e}),n.regDisposables(n.conditions.subscribe(h.windowResizeCallback)),n.regDisposables(n.name.subscribe(function(e){n.name.error(""===e)})),n.regDisposables(n.actionValue.subscribe(function(e){n.actionValue.error(""===e)})),n.regDisposables([n.actionNoStop,n.actionTemplate]),n.deleteAccess=d.a.observable(!1),n.canBeDeleted=d.a.observable(!0),n}return c()(t,e),t.prototype.generateID=function(){this.id=Object(h.fakeMd5)()},t.prototype.verify=function(){return""===this.name()?(this.name.error(!0),!1):!(0<this.conditions().length&&u.a.find(this.conditions(),function(e){return e&&!e.verify()}))&&(""===this.actionValue()&&-1<Object(h.inArray)(this.actionType(),[p.FiltersAction.MoveTo,p.FiltersAction.Forward,p.FiltersAction.Reject,p.FiltersAction.Vacation])?(this.actionValue.error(!0),!1):p.FiltersAction.Forward===this.actionType()&&-1===this.actionValue().indexOf("@")?(this.actionValue.error(!0),!1):p.FiltersAction.Vacation===this.actionType()&&""!==this.actionValueFourth()&&-1===this.actionValueFourth().indexOf("@")?(this.actionValueFourth.error(!0),!1):(this.name.error(!1),this.actionValue.error(!1),!0))},t.prototype.toJson=function(){return{ID:this.id,Enabled:this.enabled()?"1":"0",Name:this.name(),ConditionsType:this.conditionsType(),Conditions:u.a.map(this.conditions(),function(e){return e.toJson()}),ActionValue:this.actionValue(),ActionValueSecond:this.actionValueSecond(),ActionValueThird:this.actionValueThird(),ActionValueFourth:this.actionValueFourth(),ActionType:this.actionType(),Stop:this.actionNoStop()?"0":"1",Keep:this.actionKeep()?"1":"0",MarkAsRead:this.actionMarkAsRead()?"1":"0"}},t.prototype.addCondition=function(){this.conditions.push(new g.a)},t.prototype.removeCondition=function(e){this.conditions.remove(e),Object(h.delegateRunOnDestroy)(e)},t.prototype.setRecipients=function(){this.actionValueFourth(b.a.accountsEmails().join(", "))},t.prototype.parse=function(e){var t=!1;return e&&"Object/Filter"===e["@Object"]&&(this.id=Object(h.pString)(e.ID),this.name(Object(h.pString)(e.Name)),this.enabled(!!e.Enabled),this.conditionsType(Object(h.pString)(e.ConditionsType)),this.conditions([]),Object(h.isNonEmptyArray)(e.Conditions)&&this.conditions(u.a.compact(u.a.map(e.Conditions,function(e){var t=new g.a;return t&&t.parse(e)?t:null}))),this.actionType(Object(h.pString)(e.ActionType)),this.actionValue(Object(h.pString)(e.ActionValue)),this.actionValueSecond(Object(h.pString)(e.ActionValueSecond)),this.actionValueThird(Object(h.pString)(e.ActionValueThird)),this.actionValueFourth(Object(h.pString)(e.ActionValueFourth)),this.actionNoStop(!e.Stop),this.actionKeep(!!e.Keep),this.actionMarkAsRead(!!e.MarkAsRead),t=!0),t},t.prototype.cloneSelf=function(){var e=new t;return e.id=this.id,e.enabled(this.enabled()),e.name(this.name()),e.name.error(this.name.error()),e.conditionsType(this.conditionsType()),e.actionMarkAsRead(this.actionMarkAsRead()),e.actionType(this.actionType()),e.actionValue(this.actionValue()),e.actionValue.error(this.actionValue.error()),e.actionValueSecond(this.actionValueSecond()),e.actionValueThird(this.actionValueThird()),e.actionValueFourth(this.actionValueFourth()),e.actionKeep(this.actionKeep()),e.actionNoStop(this.actionNoStop()),e.conditions(u.a.map(this.conditions(),function(e){return e.cloneSelf()})),e},t}(n(42).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),i=n.n(o),a=n(4),r=n.n(a),s=n(5),c=n.n(s),l=n(2),u=n(3),d=n(1),p=function(e){function t(){i()(this,t);var n=r()(this,e.call(this,"FilterConditionModel"));return n.field=l.a.observable(u.FilterConditionField.From),n.type=l.a.observable(u.FilterConditionType.Contains),n.value=l.a.observable(""),n.value.error=l.a.observable(!1),n.valueSecond=l.a.observable(""),n.valueSecond.error=l.a.observable(!1),n.template=l.a.computed(function(){var e="";switch(n.field()){case u.FilterConditionField.Size:e="SettingsFiltersConditionSize";break;case u.FilterConditionField.Header:e="SettingsFiltersConditionMore";break;default:e="SettingsFiltersConditionDefault"}return e},n),n.field.subscribe(function(){n.value(""),n.valueSecond("")}),n.regDisposables([n.template]),n}return c()(t,e),t.prototype.verify=function(){return""===this.value()?(this.value.error(!0),!1):u.FilterConditionField.Header!==this.field()||""!==this.valueSecond()||(this.valueSecond.error(!0),!1)},t.prototype.parse=function(e){return!!(e&&e.Field&&e.Type)&&(this.field(Object(d.pString)(e.Field)),this.type(Object(d.pString)(e.Type)),this.value(Object(d.pString)(e.Value)),this.valueSecond(Object(d.pString)(e.ValueSecond)),!0)},t.prototype.toJson=function(){return{Field:this.field(),Type:this.type(),Value:this.value(),ValueSecond:this.valueSecond()}},t.prototype.cloneSelf=function(){var e=new t;return e.field(this.field()),e.type(this.type()),e.value(this.value()),e.valueSecond(this.valueSecond()),e},t}(n(42).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(0),i=n.n(o),a=n(6),r=n.n(a),s=n(2),c=n(1),l=n(3),u=n(8),d=n(10),p=n(9),h=n(41),f=n(17),m=function(){function e(){i()(this,e),this.capaAutoLogout=Object(d.capa)(l.Capa.AutoLogout),this.capaTwoFactor=Object(d.capa)(l.Capa.TwoFactor),this.autoLogout=h.a.autoLogout,this.autoLogout.trigger=s.a.observable(l.SaveSettingsStep.Idle),this.autoLogoutOptions=s.a.computed(function(){return Object(u.trigger)(),[{id:0,name:Object(u.i18n)("SETTINGS_SECURITY/AUTOLOGIN_NEVER_OPTION_NAME")},{id:5,name:Object(u.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:5})},{id:10,name:Object(u.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:10})},{id:30,name:Object(u.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:30})},{id:60,name:Object(u.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:60})},{id:120,name:Object(u.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:2})},{id:300,name:Object(u.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:5})},{id:600,name:Object(u.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:10})}]})}return e.prototype.configureTwoFactor=function(){Object(p.showScreenPopup)(n(186))},e.prototype.onBuild=function(){var e=this;this.capaAutoLogout&&r.a.delay(function(){var t=Object(c.settingsSaveHelperSimpleFunction)(e.autoLogout.trigger,e);e.autoLogout.subscribe(f.a.saveSettingsHelper("AutoLogout",c.pInt,t))})},e}()},function(e,t){e.exports=window.qr},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TwoFactorTestPopupView",function(){return O}),n.d(t,"default",function(){return O});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(2),b=n(3),g=n(7),y=n(17),v=n(9),S=n(13),O=(o=Object(v.popup)({name:"View/Popup/TwoFactorTest",templateID:"PopupsTwoFactorTest"}),i=Object(v.command)(function(e){return""!==e.code()&&!e.testing()}),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.code=m.a.observable(""),n.code.focused=m.a.observable(!1),n.code.status=m.a.observable(null),n.koTestedTrigger=null,n.testing=m.a.observable(!1),n}return f()(t,e),t.prototype.testCodeCommand=function(){var e=this;this.testing(!0),y.a.testTwoFactor(function(t,n){e.testing(!1),e.code.status(b.StorageResultType.Success===t&&n&&!!n.Result),e.koTestedTrigger&&e.code.status()&&e.koTestedTrigger(!0)},this.code())},t.prototype.clearPopup=function(){this.code(""),this.code.focused(!1),this.code.status(null),this.testing(!1),this.koTestedTrigger=null},t.prototype.onShow=function(e){this.clearPopup(),this.koTestedTrigger=e},t.prototype.onShowWithDelay=function(){g.bMobileDevice||this.code.focused(!0)},t}(S.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"testCodeCommand",[i],c()(r.prototype,"testCodeCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";function o(e,t,n,o,i){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}n.d(t,"a",function(){return y});var i,a,r,s,c,l,u,d=n(15),p=n.n(d),h=n(0),f=n.n(h),m=n(56),b=n(16),g=n(9),y=(i=Object(g.command)(function(e){return!e.googleLoggined()&&!e.googleActions()}),a=Object(g.command)(),r=Object(g.command)(function(e){return!e.facebookLoggined()&&!e.facebookActions()}),s=Object(g.command)(),c=Object(g.command)(function(e){return!e.twitterLoggined()&&!e.twitterActions()}),l=Object(g.command)(),u=function(){function e(){f()(this,e),this.googleEnable=m.a.google.enabled,this.googleEnableAuth=m.a.google.capa.auth,this.googleEnableAuthFast=m.a.google.capa.authFast,this.googleEnableDrive=m.a.google.capa.drive,this.googleEnablePreview=m.a.google.capa.preview,this.googleActions=m.a.google.loading,this.googleLoggined=m.a.google.loggined,this.googleUserName=m.a.google.userName,this.facebookEnable=m.a.facebook.enabled,this.facebookActions=m.a.facebook.loading,this.facebookLoggined=m.a.facebook.loggined,this.facebookUserName=m.a.facebook.userName,this.twitterEnable=m.a.twitter.enabled,this.twitterActions=m.a.twitter.loading,this.twitterLoggined=m.a.twitter.loggined,this.twitterUserName=m.a.twitter.userName}return e.prototype.connectGoogleCommand=function(){this.googleLoggined()||Object(b.a)().googleConnect()},e.prototype.disconnectGoogleCommand=function(){Object(b.a)().googleDisconnect()},e.prototype.connectFacebookCommand=function(){this.facebookLoggined()||Object(b.a)().facebookConnect()},e.prototype.disconnectFacebookCommand=function(){Object(b.a)().facebookDisconnect()},e.prototype.connectTwitterCommand=function(){this.twitterLoggined()||Object(b.a)().twitterConnect()},e.prototype.disconnectTwitterCommand=function(){Object(b.a)().twitterDisconnect()},e}(),o(u.prototype,"connectGoogleCommand",[i],p()(u.prototype,"connectGoogleCommand"),u.prototype),o(u.prototype,"disconnectGoogleCommand",[a],p()(u.prototype,"disconnectGoogleCommand"),u.prototype),o(u.prototype,"connectFacebookCommand",[r],p()(u.prototype,"connectFacebookCommand"),u.prototype),o(u.prototype,"disconnectFacebookCommand",[s],p()(u.prototype,"disconnectFacebookCommand"),u.prototype),o(u.prototype,"connectTwitterCommand",[c],p()(u.prototype,"connectTwitterCommand"),u.prototype),o(u.prototype,"disconnectTwitterCommand",[l],p()(u.prototype,"disconnectTwitterCommand"),u.prototype),u)},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o,i,a=n(15),r=n.n(a),s=n(0),c=n.n(s),l=n(6),u=n.n(l),d=n(2),p=n(3),h=n(8),f=n(17),m=n(16),b=n(9),g=(o=Object(b.command)(function(e){return!e.changeProcess()&&""!==e.currentPassword()&&""!==e.newPassword()&&""!==e.newPassword2()}),i=function(){function e(){var t=this;c()(this,e),this.changeProcess=d.a.observable(!1),this.errorDescription=d.a.observable(""),this.passwordMismatch=d.a.observable(!1),this.passwordUpdateError=d.a.observable(!1),this.passwordUpdateSuccess=d.a.observable(!1),this.currentPassword=d.a.observable(""),this.currentPassword.error=d.a.observable(!1),this.newPassword=d.a.observable(""),this.newPassword2=d.a.observable(""),this.currentPassword.subscribe(function(){t.passwordUpdateError(!1),t.passwordUpdateSuccess(!1),t.currentPassword.error(!1)}),this.newPassword.subscribe(function(){t.passwordUpdateError(!1),t.passwordUpdateSuccess(!1),t.passwordMismatch(!1)}),this.newPassword2.subscribe(function(){t.passwordUpdateError(!1),t.passwordUpdateSuccess(!1),t.passwordMismatch(!1)}),this.onChangePasswordResponse=u.a.bind(this.onChangePasswordResponse,this)}return e.prototype.saveNewPasswordCommand=function(){this.newPassword()!==this.newPassword2()?(this.passwordMismatch(!0),this.errorDescription(Object(h.i18n)("SETTINGS_CHANGE_PASSWORD/ERROR_PASSWORD_MISMATCH"))):(this.changeProcess(!0),this.passwordUpdateError(!1),this.passwordUpdateSuccess(!1),this.currentPassword.error(!1),this.passwordMismatch(!1),this.errorDescription(""),f.a.changePassword(this.onChangePasswordResponse,this.currentPassword(),this.newPassword()))},e.prototype.onHide=function(){this.changeProcess(!1),this.currentPassword(""),this.newPassword(""),this.newPassword2(""),this.errorDescription(""),this.passwordMismatch(!1),this.currentPassword.error(!1)},e.prototype.onChangePasswordResponse=function(e,t){this.changeProcess(!1),this.passwordMismatch(!1),this.errorDescription(""),this.currentPassword.error(!1),p.StorageResultType.Success===e&&t&&t.Result?(this.currentPassword(""),this.newPassword(""),this.newPassword2(""),this.passwordUpdateSuccess(!0),this.currentPassword.error(!1),Object(m.a)().setClientSideToken(t.Result)):(t&&p.Notification.CurrentPasswordIncorrect===t.ErrorCode&&this.currentPassword.error(!0),this.passwordUpdateError(!0),this.errorDescription(Object(h.getNotificationFromResponse)(t,p.Notification.CouldNotSaveNewPassword)))},e}(),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(i.prototype,"saveNewPasswordCommand",[o],r()(i.prototype,"saveNewPasswordCommand"),i.prototype),i)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),i=n.n(o),a=n(2),r=n(8),s=n(174),c=n(17),l=n(16),u=n(9),d=function(){function e(){var t=this;i()(this,e),this.templates=s.a.templates,this.processText=a.a.computed(function(){return s.a.templates.loading()?Object(r.i18n)("SETTINGS_TEMPLETS/LOADING_PROCESS"):""}),this.visibility=a.a.computed(function(){return""===t.processText()?"hidden":"visible"}),this.templateForDeletion=a.a.observable(null).deleteAccessHelper()}return e.prototype.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},e.prototype.addNewTemplate=function(){Object(u.showScreenPopup)(n(187))},e.prototype.editTemplate=function(e){e&&Object(u.showScreenPopup)(n(187),[e])},e.prototype.deleteTemplate=function(e){var t=this;e&&e.deleteAccess()&&(this.templateForDeletion(null),e&&(this.templates.remove(function(t){return e===t}),c.a.templateDelete(function(){t.reloadTemplates()},e.id)))},e.prototype.reloadTemplates=function(){Object(l.a)().templates()},e.prototype.onBuild=function(e){var t=this;e.on("click",".templates-list .template-item .e-action",function(){var e=a.a.dataFor(this);e&&t.editTemplate(e)}),this.reloadTemplates()},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),i=n.n(o),a=n(2),r=n(3),s=n(1),c=n(8),l=n(27),u=n(10),d=n(93),p=n(38),h=n(94),f=n(17),m=n(16),b=n(9),g=function(){function e(){i()(this,e),this.displaySpecSetting=p.a.displaySpecSetting,this.folderList=p.a.folderList,this.folderListHelp=a.a.observable("").extend({throttle:r.Magics.Time100ms}),this.loading=a.a.computed(function(){var e=p.a.foldersLoading(),t=p.a.foldersCreating(),n=p.a.foldersDeleting(),o=p.a.foldersRenaming();return e||t||n||o}),this.folderForDeletion=a.a.observable(null).deleteAccessHelper(),this.folderForEdit=a.a.observable(null).extend({toggleSubscribeProperty:[this,"edited"]}),this.useImapSubscribe=!!Object(u.appSettingsGet)("useImapSubscribe")}return e.prototype.folderEditOnEnter=function(e){var t=e?Object(s.trim)(e.nameForEdit()):"";""!==t&&e.name()!==t&&(d.b(r.ClientSideKeyName.FoldersLashHash,""),Object(m.a)().foldersPromisesActionHelper(h.a.folderRename(e.fullNameRaw,t,p.a.foldersRenaming),r.Notification.CantRenameFolder),Object(l.o)(e.fullNameRaw),e.name(t)),e.edited(!1)},e.prototype.folderEditOnEsc=function(e){e&&e.edited(!1)},e.prototype.onShow=function(){p.a.folderList.error("")},e.prototype.onBuild=function(e){var t=this;e.on("mouseover",".delete-folder-parent",function(){t.folderListHelp(Object(c.i18n)("SETTINGS_FOLDERS/HELP_DELETE_FOLDER"))}).on("mouseover",".subscribe-folder-parent",function(){t.folderListHelp(Object(c.i18n)("SETTINGS_FOLDERS/HELP_SHOW_HIDE_FOLDER"))}).on("mouseover",".check-folder-parent",function(){t.folderListHelp(Object(c.i18n)("SETTINGS_FOLDERS/HELP_CHECK_FOR_NEW_MESSAGES"))}).on("mouseout",".subscribe-folder-parent, .check-folder-parent, .delete-folder-parent",function(){t.folderListHelp("")})},e.prototype.createFolder=function(){Object(b.showScreenPopup)(n(183))},e.prototype.systemFolder=function(){Object(b.showScreenPopup)(n(100))},e.prototype.deleteFolder=function(e){if(e&&e.canBeDeleted()&&e.deleteAccess()&&0===e.privateMessageCountAll()){if(this.folderForDeletion(null),e){d.b(r.ClientSideKeyName.FoldersLashHash,""),p.a.folderList.remove(function t(n){return e===n||(n.subFolders.remove(t),!1)}),Object(m.a)().foldersPromisesActionHelper(h.a.folderDelete(e.fullNameRaw,p.a.foldersDeleting),r.Notification.CantDeleteFolder),Object(l.o)(e.fullNameRaw)}}else 0<e.privateMessageCountAll()&&p.a.folderList.error(Object(c.getNotification)(r.Notification.CantDeleteNonEmptyFolder))},e.prototype.subscribeFolder=function(e){d.b(r.ClientSideKeyName.FoldersLashHash,""),f.a.folderSetSubscribe(s.noop,e.fullNameRaw,!0),e.subScribed(!0)},e.prototype.unSubscribeFolder=function(e){d.b(r.ClientSideKeyName.FoldersLashHash,""),f.a.folderSetSubscribe(s.noop,e.fullNameRaw,!1),e.subScribed(!1)},e.prototype.checkableTrueFolder=function(e){f.a.folderSetCheckable(s.noop,e.fullNameRaw,!0),e.checkable(!0)},e.prototype.checkableFalseFolder=function(e){f.a.folderSetCheckable(s.noop,e.fullNameRaw,!1),e.checkable(!1)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(0),i=n.n(o),a=n(6),r=n.n(a),s=n(12),c=n.n(s),l=n(2),u=n(99),d=n.n(u),p=n(3),h=n(1),f=n(14),m=n(8),b=n(10),g=n(72),y=n(17),v=function(){function e(){var t=this;i()(this,e),this.theme=g.a.theme,this.themes=g.a.themes,this.themesObjects=l.a.observableArray([]),this.background={},this.background.name=g.a.themeBackgroundName,this.background.hash=g.a.themeBackgroundHash,this.background.uploaderButton=l.a.observable(null),this.background.loading=l.a.observable(!1),this.background.error=l.a.observable(""),this.capaUserBackground=l.a.observable(Object(b.capa)(p.Capa.UserBackground)),this.themeTrigger=l.a.observable(p.SaveSettingsStep.Idle).extend({throttle:p.Magics.Time100ms}),this.iTimer=0,this.oThemeAjaxRequest=null,this.theme.subscribe(function(e){r.a.each(t.themesObjects(),function(t){t.selected(e===t.name)}),Object(h.changeTheme)(e,t.themeTrigger),y.a.saveSettings(null,{Theme:e})}),this.background.hash.subscribe(function(e){var t=c()("#rl-bg");e?t.attr("style","background-image: none !important;").backstretch(Object(f.J)(e),{fade:p.Magics.Time1s,centeredX:!0,centeredY:!0}).removeAttr("style"):t.data("backstretch")&&t.backstretch("destroy").attr("style","")})}return e.prototype.onBuild=function(){var e=this.theme();this.themesObjects(r.a.map(this.themes(),function(t){return{name:t,nameDisplay:Object(h.convertThemeName)(t),selected:l.a.observable(t===e),themePreviewSrc:Object(f.F)(t)}})),this.initUploader()},e.prototype.onShow=function(){this.background.error("")},e.prototype.clearBackground=function(){var e=this;this.capaUserBackground()&&y.a.clearUserBackground(function(){e.background.name(""),e.background.hash("")})},e.prototype.initUploader=function(){var e=this;this.background.uploaderButton()&&this.capaUserBackground()&&new d.a({action:Object(f.H)(),name:"uploader",queueSize:1,multipleSizeLimit:1,disableDragAndDrop:!0,disableMultiple:!0,clickElement:this.background.uploaderButton()}).on("onStart",function(){return e.background.loading(!0),e.background.error(""),!0}).on("onComplete",function(t,n,o){if(e.background.loading(!1),n&&t&&o&&o.Result&&o.Result.Name&&o.Result.Hash)e.background.name(o.Result.Name),e.background.hash(o.Result.Hash);else{e.background.name(""),e.background.hash("");var i="";if(o.ErrorCode)switch(o.ErrorCode){case p.UploadErrorCode.FileIsTooBig:i=Object(m.i18n)("SETTINGS_THEMES/ERROR_FILE_IS_TOO_BIG");break;case p.UploadErrorCode.FileType:i=Object(m.i18n)("SETTINGS_THEMES/ERROR_FILE_TYPE_ERROR")}!i&&o.ErrorMessage&&(i=o.ErrorMessage),e.background.error(i||Object(m.i18n)("SETTINGS_THEMES/ERROR_UNKNOWN"))}return!0})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(0),i=n.n(o),a=n(6),r=n.n(a),s=n(2),c=n(1),l=n(3),u=n(7),d=n(53),p=n(41),h=n(17),f=n(16),m=n(9),b=function(){function e(){i()(this,e),this.openpgpkeys=d.a.openpgpkeys,this.openpgpkeysPublic=d.a.openpgpkeysPublic,this.openpgpkeysPrivate=d.a.openpgpkeysPrivate,this.openPgpKeyForDeletion=s.a.observable(null).deleteAccessHelper(),this.allowDraftAutosave=p.a.allowDraftAutosave,this.isHttps=u.bIsHttps}return e.prototype.addOpenPgpKey=function(){Object(m.showScreenPopup)(n(258))},e.prototype.generateOpenPgpKey=function(){Object(m.showScreenPopup)(n(259))},e.prototype.viewOpenPgpKey=function(e){e&&Object(m.showScreenPopup)(n(260),[e])},e.prototype.deleteOpenPgpKey=function(e){if(e&&e.deleteAccess()&&(this.openPgpKeyForDeletion(null),e&&d.a.openpgpKeyring)){var t=r.a.find(d.a.openpgpkeys(),function(t){return e===t});t&&(d.a.openpgpkeys.remove(t),Object(c.delegateRunOnDestroy)(t),d.a.openpgpKeyring[t.isPrivate?"privateKeys":"publicKeys"].removeForId(t.guid),d.a.openpgpKeyring.store()),Object(f.a)().reloadOpenPgpKeys()}},e.prototype.onBuild=function(){var e=this;r.a.delay(function(){e.allowDraftAutosave.subscribe(h.a.saveSettingsHelper("AllowDraftAutosave",c.boolToAjax))},l.Magics.Time50ms)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AddOpenPgpKeyPopupView",function(){return O}),n.d(t,"default",function(){return O});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(2),b=n(1),g=n(53),y=n(16),v=n(9),S=n(13),O=(o=Object(v.popup)({name:"View/Popup/AddOpenPgpKey",templateID:"PopupsAddOpenPgpKey"}),i=Object(v.command)(),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.key=m.a.observable(""),n.key.focus=m.a.observable(!1),n.key.error=m.a.observable(!1),n.key.errorMessage=m.a.observable(""),n.key.subscribe(function(){n.key.error(!1),n.key.errorMessage("")}),n}return f()(t,e),t.prototype.addOpenPgpKeyCommand=function(){var e=/[\-]{3,6}BEGIN[\s]PGP[\s](PRIVATE|PUBLIC)[\s]KEY[\s]BLOCK[\-]{3,6}[\s\S]+?[\-]{3,6}END[\s]PGP[\s](PRIVATE|PUBLIC)[\s]KEY[\s]BLOCK[\-]{3,6}/gi,t=g.a.openpgpKeyring,n=Object(b.trim)(this.key());if(/[\n]/.test(n)&&(n=n.replace(/[\r]+/g,"").replace(/[\n]{2,}/g,"\n\n")),this.key.error(""===n),this.key.errorMessage(""),!t||this.key.error())return!1;var o=null,i=30,a=!1;do{if((o=e.exec(n))&&0<i){if(o[0]&&o[1]&&o[2]&&o[1]===o[2]){var r=null;"PRIVATE"===o[1]?r=t.privateKeys.importKey(o[0]):"PUBLIC"===o[1]&&(r=t.publicKeys.importKey(o[0])),r&&(this.key.error(!0),this.key.errorMessage(r&&r[0]?""+r[0]:""),Object(b.log)(r))}i-=1,a=!1}else a=!0}while(!a);return t.store(),Object(y.a)().reloadOpenPgpKeys(),!this.key.error()&&(Object(b.delegateRun)(this,"cancelCommand"),!0)},t.prototype.clearPopup=function(){this.key(""),this.key.error(!1),this.key.errorMessage("")},t.prototype.onShow=function(){this.clearPopup()},t.prototype.onShowWithDelay=function(){this.key.focus(!0)},t}(S.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"addOpenPgpKeyCommand",[i],c()(r.prototype,"addOpenPgpKeyCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"NewOpenPgpKeyPopupView",function(){return C}),n.d(t,"default",function(){return C});var o,i,a,r,s=n(15),c=n.n(s),l=n(0),u=n.n(l),d=n(4),p=n.n(d),h=n(5),f=n.n(h),m=n(6),b=n.n(m),g=n(2),y=n(3),v=n(1),S=n(53),O=n(16),w=n(9),T=n(13),C=(o=Object(w.popup)({name:"View/Popup/NewOpenPgpKey",templateID:"PopupsNewOpenPgpKey"}),i=Object(w.command)(),o((r=function(e){function t(){u()(this,t);var n=p()(this,e.call(this));return n.email=g.a.observable(""),n.email.focus=g.a.observable(""),n.email.error=g.a.observable(!1),n.name=g.a.observable(""),n.password=g.a.observable(""),n.keyBitLength=g.a.observable(y.Magics.BitLength2048),n.submitRequest=g.a.observable(!1),n.submitError=g.a.observable(""),n.email.subscribe(function(){n.email.error(!1)}),n}return f()(t,e),t.prototype.generateOpenPgpKeyCommand=function(){var e=this,t={},n=S.a.openpgpKeyring;return this.email.error(""===Object(v.trim)(this.email())),!(!n||this.email.error())&&(t.email=this.email(),""!==this.name()&&(t.name=this.name()),this.submitRequest(!0),this.submitError(""),b.a.delay(function(){try{S.a.openpgp.generateKey({userIds:[t],numBits:Object(v.pInt)(e.keyBitLength()),passphrase:Object(v.trim)(e.password())}).then(function(t){e.submitRequest(!1),t&&t.privateKeyArmored&&(n.privateKeys.importKey(t.privateKeyArmored),n.publicKeys.importKey(t.publicKeyArmored),n.store(),Object(O.a)().reloadOpenPgpKeys(),Object(v.delegateRun)(e,"cancelCommand"))}).catch(function(t){e.submitRequest(!1),e.showError(t)})}catch(t){e.submitRequest(!1),e.showError(t)}},y.Magics.Time100ms),!0)},t.prototype.showError=function(e){Object(v.log)(e),e&&e.message&&this.submitError(e.message)},t.prototype.clearPopup=function(){this.name(""),this.password(""),this.email(""),this.email.error(!1),this.keyBitLength(y.Magics.BitLength2048),this.submitError("")},t.prototype.onShow=function(){this.clearPopup()},t.prototype.onShowWithDelay=function(){this.email.focus(!0)},t}(T.a),function(e,t,n,o,i){var a={};Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}(r.prototype,"generateOpenPgpKeyCommand",[i],c()(r.prototype,"generateOpenPgpKeyCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ViewOpenPgpKeyPopupView",function(){return y}),n.d(t,"default",function(){return y});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(2),p=n(19),h=n.n(p),f=n(3),m=n(1),b=n(9),g=n(13),y=(o=Object(b.popup)({name:"View/Popup/ViewOpenPgpKey",templateID:"PopupsViewOpenPgpKey"}))(i=function(e){function t(){r()(this,t);var n=c()(this,e.call(this));return n.key=d.a.observable(""),n.keyDom=d.a.observable(null),n.sDefaultKeyScope=f.KeyState.PopupViewOpenPGP,n}return u()(t,e),t.prototype.clearPopup=function(){this.key("")},t.prototype.selectKey=function(){var e=this.keyDom();e&&Object(m.selectElement)(e)},t.prototype.onShow=function(e){this.clearPopup(),e&&this.key(e.armor)},t.prototype.onBuild=function(){var e=this;h()("ctrl+a, command+a",f.KeyState.PopupViewOpenPGP,function(){return e.selectKey(),!1})},t}(g.a))||i},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(9),p=n(179),h=(o=Object(d.view)({name:"View/User/Settings/SystemDropDown",type:d.ViewType.Right,templateID:"SystemDropDown"}))(i=function(e){function t(){return r()(this,t),c()(this,e.apply(this,arguments))}return u()(t,e),t}(p.a))||i},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(12),p=n.n(d),h=n(19),f=n.n(h),m=n(3),b=n(7),g=n(14),y=n(27),v=n(10),S=n(9),O=n(13),w=(o=Object(S.view)({name:"View/User/Settings/Menu",type:S.ViewType.Left,templateID:"SettingsMenu"}))(i=function(e){function t(n){r()(this,t);var o=c()(this,e.call(this));return o.leftPanelDisabled=b.leftPanelDisabled,o.mobile=v.appSettingsGet("mobile"),o.menu=n.menu,o}return u()(t,e),t.prototype.onBuild=function(e){this.mobile&&e.on("click",".b-settings-menu .e-item.selectable",function(){Object(b.leftPanelDisabled)(!0)}),f()("up, down",m.KeyState.Settings,Object(S.settingsMenuKeysHendler)(p()(".b-settings-menu .e-item",e)))},t.prototype.link=function(e){return Object(g.z)(e)},t.prototype.backToMailBoxClick=function(){Object(S.setHash)(Object(g.m)(Object(y.h)()))},t}(O.a))||i},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(14),p=n(27),h=n(7),f=n(10),m=n(45),b=n(9),g=n(13),y=(o=Object(b.view)({name:"View/User/Settings/Pane",type:b.ViewType.Right,templateID:"SettingsPane"}))(i=function(e){function t(){r()(this,t);var n=c()(this,e.call(this));return n.mobile=f.appSettingsGet("mobile"),n.leftPanelDisabled=h.leftPanelDisabled,n}return u()(t,e),t.prototype.onShow=function(){m.a.message(null)},t.prototype.hideLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(h.leftPanelDisabled)(!0)},t.prototype.showLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(h.leftPanelDisabled)(!1)},t.prototype.onBuild=function(e){this.mobile&&e.on("click",function(){Object(h.leftPanelDisabled)(!0)})},t.prototype.backToMailBoxClick=function(){Object(b.setHash)(Object(d.m)(Object(p.h)()))},t}(g.a))||i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"WelcomePagePopupView",function(){return m}),n.d(t,"default",function(){return m});var o,i,a=n(0),r=n.n(a),s=n(4),c=n.n(s),l=n(5),u=n.n(l),d=n(2),p=n(94),h=n(9),f=n(13),m=(o=Object(h.popup)({name:"View/Popup/WelcomePage",templateID:"PopupsWelcomePage"}))(i=function(e){function t(){r()(this,t);var n=c()(this,e.call(this));return n.welcomePageURL=d.a.observable(""),n.closeFocused=d.a.observable(!1),n}return u()(t,e),t.prototype.clearPopup=function(){this.welcomePageURL(""),this.closeFocused(!1)},t.prototype.onShow=function(e){this.clearPopup(),this.welcomePageURL(e)},t.prototype.onShowWithDelay=function(){this.closeFocused(!0)},t.prototype.onHide=function(){p.a.welcomeClose()},t}(f.a))||i}]);
